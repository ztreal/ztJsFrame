var ADURL="";var pj_lf="http://a.pojaaimg.cn/ditu/2/";var cacheIMG=[];var wINDEX=1;function wsetZINDEX(a,b){if(y5){clearTimeout(y5)}$(a).closest("div").css("z-index",++wINDEX);px?$("#"+b).css("z-index",++wINDEX):null;b?setToolTipMenu(b,a):hideToolTipMenu()}if(typeof strImgsvrUrl=="undefined"){strImgsvrUrl="http://img.mapbar.com/maplite/"}if(typeof strMapsvrUrl=="undefined"){strMapsvrUrl="http://api.mapbar.com/api/"}CTLIMG_RESOURCE=[{url:pj_lf+"images/mapbar31.2.1.png",w:210,h:235}];var transparencyLevel=60;var DirectionInfo="";var strLicenseKey="8890";var strRemoteIP="www.mapbar.com";if(typeof iToolTipStyle=="undefined"){var iToolTipStyle=1}var mapwidth=600;var mapheight=400;var MapBackgroundColor="#EBEAE8";var arrayCity=new Array();function getPid(b){if(typeof arrayCity[b]=="undefined"){return b}return arrayCity[b]}var topColor="#FFFFFF";var subColor="#FFFFFF";var xoffset=0;var yoffset=0;var sN=function(){this.clear=function(){};this.paint=function(){};this.lB=function(){};this.lE=function(){};this.setColor=function(){}};var jsGraphics=function(a){};var q1=function(a){if(document.getElementById(a)!=null){return document.getElementById(a)}return null};var q2=function(a){if(document.getElementById(a)!=null){return document.getElementById(a).style}return null};var qZ=function(b,g,f,d,a,h,c,e){document.writeln('<div unselectable="on" id="'+b+'" style="position:absolute; overflow:none; left:'+g+"px; top:"+f+"px; width:"+d+"px; height:"+a+"px; visibility:"+(h?"visible;":"hidden;")+"z-Index:"+c+';">');document.writeln(e);document.writeln("</div>")};var gq=function(a,d,g,b,i,c,j,f){var e=document.createElement("div");e.unselectable="on";e.id=a;e.style.position="absolute";e.style.top=parseInt(g)+"px";e.style.left=parseInt(d)+"px";e.style.zIndex=j;e.style.width=b+(b=="auto"?"":"px");e.style.height=i+(i=="auto"?"":"px");e.style.visibility=(c)?"visible":"hidden";e.innerHTML=f;return e};var gt=function(d,f,e,c,a){var b=new Image();b.unselectable="on";b.style.position="absolute";b.style.top=parseInt(e)+"px";b.style.left=parseInt(f)+"px";b.style.width=parseInt(c)+"px";b.style.height=parseInt(a)+"px";if(d!="undefined"){b.src=d}b.onerror=function(){this.onerror=null;if(this.parentNode){this.parentNode.removeChild(this)}};return b};var gu=function(a,b){var c=document.createElement("div");c.style.position="absolute";c.unselectable="on";var d='<div unselectable="on" id="mbglabel" style="border:1px solid '+b+";left:2px;top:2px;background-color:"+b+";color:"+this.color+';"><table border="1" cellspacing="0" cellpadding="0" bordercolor="'+b+'"><tr><td width="100%"><font class="ptlabel" color="'+b+'">'+a+"</font></td></tr></table></div>";d+='<div unselectable="on" id="mfglabel" style="border:1px solid '+b+";left:0px;top:0px;background-color:#FFFFCC;color:"+this.color+';"><table border="1" cellspacing="0" cellpadding="0" bordercolor=#FFFFCC><tr><td width="100%"><font class="ptlabel" color="'+b+'" title="'+a+'">'+a+"</font></td></tr></table></div>";c.innerHTML=d;return c};var PerformControl=function(c,b,d){var a=b.parentNode.q9;switch(d){case 1:a.panTo(parseInt(a.width)/2,0);break;case 2:a.panTo(0,parseInt(a.height)/2);break;case 3:a.panTo(-parseInt(a.width)/2,0);break;case 4:a.panTo(0,-parseInt(a.height)/2);break;case 5:a.zoomIn();break;case 6:a.zoomOut();break;case 7:a.setMode(ts.tb);break;case 8:var f=parseInt(b.style.top)-96+parseInt(a.controlCanvas.top);var e=parseInt((px)?event.clientY:c.clientY)-parseInt(a.offsetY)-parseInt(a.top);e-=f;if(!px&&a.vb.style.position!="absolute"){}AB=sY-Math.max(0,Math.min(sY,parseInt((parseInt(e)-100)/gb.bO724)));b.parentNode.update(AB);a._09rf();a.setZoomLevel(AB,true,false);break;default:break}};var y4=null;var showMouseTipBox=function(a,f,d,e){try{if(y4==null||y4=="undefined"){if(maplet.sS!=ts.tw){var b='<table style="border:1px solid #0E347F;"><tr><td><font class="ptlabel" color="#D50F1E" id="pjlxl">'+d+"</font></td></tr></table>";y4=gq("mousetipbox",parseInt(a)+10,parseInt(f)+18,"auto","auto",1,100,b);y4.style.backgroundColor="#FFFFFF";y4.style.padding="1px"}else{y4=gq("mousetipbox",parseInt(a)+10,parseInt(f)+18,"auto","auto",1,100,d)}y4.unselectable="on";y4.style.MozUserSelect="none"}else{y4.style.left=(parseInt(a)+10)+"px";y4.style.top=(parseInt(f)+18)+"px";y4.visibility="visible"}if(y4!=null&&(y4.parentNode==null||y4.parentNode!=e)){e.appendChild(y4)}}catch(c){}};var nX=function(){if(y4!=null){if(y4.parentNode!=null){_removeNode(y4)}y4=null}};var nE=function(a){return(px)?event.srcElement.id:a.target.id};var imageTileError=function(a){if(a.width==300&&a.ntry=="0"){a.ntry="1";a.src=a.src+"?"}else{if(a.width==300&&a.ntry=="1"){a.ntry="2";a.src=a.src+"?"}else{a.ntry="3";a.onerror=null;a.src=strImgsvrUrl+"images/mask.gif";a.style.width="300px";a.style.height="300px"}}};var imageTileOk=function(a){a.onerror=null;a.onload=null;a.style.width="300px";a.style.height="300px"};var fJ=function(b,c){var a=false;while(b!=null){if((typeof c=="string"&&b.id==c)||(b==c)){a=true;break}b=b.parentNode}return a};var pE=function(c,e,d,b,a,f){this.pP=gt(c,e,d,b,a);this.gd=0;this.ge=0;this.name=name;f.appendChild(this.pP);this.hide=function(){this.pP.style.visibility="hidden"};this.show=function(){this.pP.style.visibility="visible"};this.moveTo=function(g,h){this.pP.style.left=parseInt(g)+"px";this.pP.style.top=parseInt(h)+"px"};this.resize=function(g,i){this.pP.style.width=parseInt(g)+"px";this.pP.style.height=parseInt(i)+"px"};this.getName=function(){return this.name};this.aW=function(g){g.appendChild(this.pP)}};var yq=function(a,b,c){if(b!="undefined"&&b!=""){a.src=b}a.style.zIndex=c};var vB=function(a,c){try{if(document.getElementById(c)!=null&&a!=null){document.getElementById(c).innerHTML=vo(a.responseText)}}catch(b){}};var vo=function(a){return a};var uP=function(d,e,c){var b=document["mapbar-maplet"];var a=((px)?event.clientX:d.clientX)-b.offsetX-b.left;var f=((px)?event.clientY:d.clientY)-b.offsetY-b.top;b.wN(a,f,e,c)};var lbp2=function(b,a){if(typeof b=="string"&&b!=null&&document.getElementById(b)!=null&&typeof a=="string"&&a!=null){document.getElementById(b).innerHTML+=a}};var y5=null;var waitHideTip=function(){if(y5){clearTimeout(y5)}y5=null;y5=setTimeout(function(){hideToolTipMenu()},300)};var lbp=function(a,g,f,i,c,j,e,d,b){var h='<table class="pojaaAD" onmouseover="javascript:{if (y5) clearTimeout(y5);}" onmouseout="javascript:waitHideTip()" style="position:absolute;display:none;" border="0" cellspacing="0" cellpadding="0"><tr><td width="100%" bgcolor="#FF0000"><table border="0" cellspacing="1" cellpadding="0"><tr><td width="100%" bgcolor="#FF0000"><table border="0" width="100%" cellspacing="0" cellpadding="0"><tr><td width="100%" bgcolor='+topColor+'><table border="0" width="100%" cellspacing="0" cellpadding="0" align="center"><tr><td id="mytooltiptitle"width="100%" class="tooltiptitle">'+e+'</td><td style="cursor:hand;cursor:pointer;" valign="top" align="right"><img src="'+strImgsvrUrl+'images/xclose.gif" onclick="javascript:hideToolTipMenu();"></td></tr></table></td></tr><tr><td width="100%" bgcolor='+subColor+'><table border="0" width="100%" cellpadding="0" cellspacing="0" align="center"><tr><td id="mytooltipcontent" width="100%" class="tooltipcontent">'+d+"</td></tr></table></td></tr></table></td></tr></table></td></tr></table>";hO624[a]={x:g,y:f,w:i,wO:(!b?c+h+j:c+j),y6:e,yU:d,AP98:b};yk6b(a,g,f,i,(!b?c+h+j:c+j),e,d,b)};var yk6b=function(h,b,g,c,f,a,d,e){if(typeof h=="string"&&h!=null&&document.getElementById(h)!=null&&typeof f=="string"&&f!=null){if(!e){document.getElementById(h).innerHTML+='<div unselectable="on" class="hotspotlabel" style="position:absolute;left:'+b+"px;top:"+g+"px;width:"+c+'px;height:0px">'+f+"</div>"}else{document.getElementById(h).innerHTML+='<div unselectable="on"  style="position:absolute;left:'+b+"px;top:"+g+"px;width:"+c+'px;height:0px">'+f+"</div>"}}};var hO624={};var T3K=function(c,b,d){var a=b.parentNode.q9;switch(d){case 1:hideBubble(a);a.panTo(parseInt(a.width)/2,0);break;case 2:hideBubble(a);a.panTo(0,parseInt(a.height)/2);break;case 3:hideBubble(a);a.panTo(-parseInt(a.width)/2,0);break;case 4:hideBubble(a);a.panTo(0,-parseInt(a.height)/2);break;case 5:hideBubble(a);a.zoomIn();break;case 6:hideBubble(a);a.zoomOut();break;case 7:hideBubble(a);a.setMode(ts.tb);break;case 8:hideBubble(a);var f=parseInt(b.style.top)-96+parseInt(a.controlCanvas.top);var e=parseInt((px)?event.clientY:c.clientY)-parseInt(a.offsetY)-parseInt(a.top);e-=f;if(!px&&a.vb.style.position!="absolute"){}AB=sY-Math.max(0,Math.min(sY,parseInt((parseInt(e)-100)/(132/(sY-1)))));b.parentNode.update(AB);a.setZoomLevel(AB);break;default:break}};function CreateToolTip(a,d,c){var e='<table id="mytooltip_container" border="0" width="150" cellspacing="0" cellpadding="0"><tr><td width="100%" bgcolor="#FF0000"><table border="0" width="150" cellspacing="1" cellpadding="0"><tr><td width="100%" bgcolor="#FF0000"><table border="0" width="100%" cellspacing="0" cellpadding="0"><tr><td width="100%" bgcolor='+topColor+'><table border="0" width="100%" cellspacing="0" cellpadding="0" align="center"><tr><td id="mytooltiptitle"width="100%" class="tooltiptitle">'+d+'</td><td style="cursor:hand;cursor:pointer;" valign="top" align="right"><img src="'+strImgsvrUrl+'images/xclose.gif" onclick="javascript:hideToolTipMenu();"></td></tr></table></td></tr><tr><td width="100%" bgcolor='+subColor+'><table border="0" width="100%" cellpadding="0" cellspacing="0" align="center"><tr><td id="mytooltipcontent" width="100%" class="tooltipcontent">'+c+"</td></tr></table></td></tr></table></td></tr></table></td></tr></table>";document.getElementById(a).innerHTML=e;var b=document.getElementById(a).childNodes[0];document.getElementById(a).style.width=b.clientWidth;document.getElementById(a).style.height=b.clientHeight}var setToolTipMenu=function(f,b){var b=$(b);var e=b.offset();mapwidth=maplet.width-3;mapheight=maplet.height-5;var a=b.closest("div").find(".pojaaAD");document.getElementById("img_"+f)?document.getElementById("img_"+f).src=cacheIMG["img_"+f].src:null;var d=a.width()+e.left>mapwidth?(mapwidth-e.left-a.width()):e.left<0?b.width()/2-e.left:20;var c=(a.height()+b.height()+e.top>mapheight&&e.top>mapheight/2)?(-a.height()):b.height();$(".pojaaAD").hide();a.css({left:d,top:c}).show()};var hideToolTipMenu=function(){$(".pojaaAD").hide()};var MoveToolTip=function(qR,nr,nq){if(px){document.getElementById(qR).style.top=parseInt(eval(nr))+"px"}else{document.getElementById(qR).style.top=parseInt(eval(nr))+"px"}document.getElementById(qR).style.left=parseInt(eval(nq))+"px"};var UpdateContent=function(a,c,b){if(initialize==0){CreateToolTip(a,c,b);initialize=1}if(document.getElementById("mytooltiptitle")){document.getElementById("mytooltiptitle").innerHTML=c}if(document.getElementById("mytooltipcontent")){document.getElementById("mytooltipcontent").innerHTML=b}var e=document.getElementById("ToolTip");var d=document.getElementById("mytooltip_container");if(d){e.style.width=d.clientWidth+"px";e.style.height=d.clientHeight+"px"}};var ts={tz:1,tA:2,ty:3,tv:5,tw:6,tx:7,tt:8,lz:9,ly:10,tb:11,np:12,l3:13,tM:14,tu:23,ta:15,$9f:24};var showLoading=function(){sb++;if(document.getElementById("loading")){document.getElementById("loading").style.display="block";document.getElementById("loading").style.visibility="visible"}};var hideLoading=function(){sb--;if(sb<=0){if(document.getElementById("loading")){document.getElementById("loading").style.display="none";document.getElementById("loading").style.visibility="hidden";if(a&&new Date().getTime()-ac.getTime()>9){document.getElementById("sendmapload").src="http://211.157.24.143:8001/log.jsp?type=map-mapbar&time="+(new Date().getTime()-ac.getTime())+"&"+Math.random();if(typeof a=="undefined"){var a=false}else{a=false}}}}};var vZ=function(a){if(document.getElementById("loading")){document.getElementById("loading").style.left=((a.width-parseInt(document.getElementById("loading").clientWidth))/2)+"px";document.getElementById("loading").style.top=((a.height-parseInt(document.getElementById("loading").clientHeight))/2)+"px"}};var pc=new Array();pc.icon1=strImgsvrUrl+"images/number1.gif";pc.icon2=strImgsvrUrl+"images/number2.gif";pc.icon3=strImgsvrUrl+"images/number3.gif";pc.icon4=strImgsvrUrl+"images/number4.gif";pc.icon5=strImgsvrUrl+"images/number5.gif";pc.icon6=strImgsvrUrl+"images/number6.gif";pc.icon7=strImgsvrUrl+"images/number7.gif";pc.icon8=strImgsvrUrl+"images/number8.gif";pc.icon9=strImgsvrUrl+"images/number9.gif";pc.icon10=strImgsvrUrl+"images/number10.gif";var pb=new Array();pb.icon1=strImgsvrUrl+"images/number1-2.gif";pb.icon2=strImgsvrUrl+"images/number2-2.gif";pb.icon3=strImgsvrUrl+"images/number3-2.gif";pb.icon4=strImgsvrUrl+"images/number4-2.gif";pb.icon5=strImgsvrUrl+"images/number5-2.gif";pb.icon6=strImgsvrUrl+"images/number6-2.gif";pb.icon7=strImgsvrUrl+"images/number7-2.gif";pb.icon8=strImgsvrUrl+"images/number8-2.gif";pb.icon9=strImgsvrUrl+"images/number9-2.gif";pb.icon10=strImgsvrUrl+"images/number10-2.gif";function GYAjR(a){if(typeof a=="undefined"||!a){return false}return a.constructor.toString().indexOf("Array")!=-1}function P2jRn(c){var b=0,a=0;if(typeof c=="string"&&c){c=document.getElementById(c)}if(typeof c=="object"&&c){do{b+=c.offsetTop||0;a+=c.offsetLeft||0;if(c.offsetParent==document.body){if(c.style.position=="absolute"){break}}c=c.offsetParent}while(c)}return[a,b]}function k9B(a,b){var c=null;if(typeof a=="string"&&a){a=aa(a)}if(typeof a=="object"&&a){do{c=a.getAttribute(b);if(c||a.parentNode==maplet.map){break}a=a.parentNode}while(a)}return c}function _getStyle(c,d,b){var a=null;if(typeof c=="string"&&c){a=document.getElementById(c)}else{a=c}if(typeof a!="object"||!a){return""}if(!d&&!b){return""}if(d&&!b){b=d}if(!d&&b){d=b}var f="";if(a.currentStyle){f=a.currentStyle[d]}else{if(document.defaultView&&document.defaultView.getComputedStyle){var e=document.defaultView.getComputedStyle(a,null);f=e?e.getPropertyValue(b):""}}return f}function cm5UC(a,b){if(isNaN(parseInt(a))){return(typeof b!="number"?0:b)}else{return parseInt(a)}}function _isInsidePolygon(f,e){for(var g=false,d=-1,a=e.length,b=a-1;++d<a;b=d){if(((e[d].y<=f.y&&f.y<e[b].y)||(e[b].y<=f.y&&f.y<e[d].y))&&(f.x<(e[b].x-e[d].x)*(f.y-e[d].y)/(e[b].y-e[d].y)+e[d].x)){g=!g}}return g}function _isInsideRect(b,a){if(a.max.x>b.x&&a.min.x<=b.x&&a.max.y>b.y&&a.min.y<=b.y){return true}return false}function _isRectint(a,b){return Math.abs((a.min.x+a.max.x)/2-(b.min.x+b.max.x)/2)<((a.max.x+b.max.x-a.min.x-b.min.x)/2)&&Math.abs((a.min.y+a.max.y)/2-(b.min.y+b.max.y)/2)<((a.max.y+b.max.y-a.min.y-b.min.y)/2)}function _IsIntersect(c,f){var e=(c.end.y-c.start.y)*(f.end.x-f.start.x)-(f.end.y-f.start.y)*(c.end.x-c.start.x);if(e==0){return false}else{var b=((c.end.x-c.start.x)*(f.end.x-f.start.x)*(f.start.y-c.start.y)+(c.end.y-c.start.y)*(f.end.x-f.start.x)*c.start.x-(f.end.y-f.start.y)*(c.end.x-c.start.x)*f.start.x)/e;var a=((c.end.y-c.start.y)*(f.end.y-f.start.y)*(f.start.x-c.start.x)+(c.end.x-c.start.x)*(f.end.y-f.start.y)*c.start.y-(f.end.x-f.start.x)*(c.end.y-c.start.y)*f.start.y)/(-e);if((b-c.start.x)*(b-c.end.x)<=0&&(b-f.start.x)*(b-f.end.x)<=0&&(a-c.start.y)*(a-c.end.y)<=0&&(a-f.start.y)*(a-f.end.y)<=0){return true}}return false}var E49=function(a){if(window.event){return window.event}else{while(a.caller){a=a.caller}if(typeof a.arguments!="undefined"&&a.arguments&&a.arguments.length>0){if(a.arguments[0].constructor.toString().indexOf("Event")){return a.arguments[0]}}}return null};var _66=function(a){if(typeof a=="undefined"){return}if(window.event){window.event.returnValue=false;window.event.cancelBubble=true}else{a.preventDefault();a.stopPropagation()}};function aa(a){if(typeof a=="string"){return document.getElementById(a)}else{return null}}_removeNode=document.all?function(){var a;return function(b){if(b&&b.tagName!="BODY"){a=a||document.createElement("div");a.appendChild(b);a.innerHTML=""}}}():function(a){if(a&&a.parentNode&&a.tagName!="BODY"){a.parentNode.removeChild(a)}};rtg5S=function(a){var b=new RegExp("<.*?>|\r|\n","gi");return function(c){return c.replace(b,"")}}();var i96=function(a,d,e,c,g,b,f){this.URL=a;this.$if4L=d;this.Hi6x_=g;this.oGU=b;this.aB=f;this.mG9W3=e;this.C9r8$=c};i96.prototype.V96Xw=function(){var f=document.getElementById("scriptTemp");if(f){_removeNode(f)}var c=document.createElement("script");c.language="javascript";c.type="text/javascript";c.id=(this.C9r8$&&this.C9r8$==true)?"Temp"+Math.random():"scriptTemp";c.src=(this.mG9W3&&this.mG9W3==true)?this.URL+"?"+Math.random():this.URL;var a=this.$if4L?(this.$if4L):parseInt;var b=this.Hi6x_;var e=this.oGU;var d=typeof this.aB=="undefined"||!this.aB?[]:this.aB;c.onload=c.onreadystatechange=function(){if(typeof ActiveXObject!="undefined"){if(c.readyState=="loaded"||c.readyState=="complete"){if(typeof a=="function"){d.push(c.id);a.apply(b,d)}c.onerror=null;c.onload=null;c.onreadystatechange=null}}else{if(typeof a=="function"){d.push(c.id);a.apply(b,d)}c.onerror=null;c.onload=null;c.onreadystatechange=null}};c.onerror=function(){if(c&&c.parentNode){c.parentNode.removeChild(c)}if(typeof e=="function"){d.push(c.id);e.apply(b,d)}c.onerror=null;c.onload=null;c.onreadystatechange=null};document.body.insertBefore(c,document.body.firstChild)};var sC=function(a,d,b){document.getElementById("myalert").style.top=(parseInt(d)-60+parseInt(document.body.scrollTop))+"px";document.getElementById("myalert").style.left=(parseInt(a)-100+parseInt(document.body.scrollLeft))+"px";var c=(en==1)?"Close":tX("%u5175%uE760");document.getElementById("myalert").innerHTML='<table width="196px" border="0" cellpadding="0" cellspacing="0" style="border:2px solid #0E347F;"><tr><td height="100px" align="center" valign="middle" bgcolor="#FFFFFF"><table width="167px" height="79px" border="0" cellpadding="0" cellspacing="0"><tr><td height="55px" align="center" valign="middle" style="font-size: 12px;color: #0065AD;">'+b+'</td></tr><tr><td height="24px" align="center" valign="middle"><input type="button" value="'+c+"\" onClick=\"document.getElementById('myalert').style.visibility = 'hidden'\"onMouseOver=\"style.background='#DEE7EF';style.cursor='hand';style.cursor='pointer'\"onMouseOut=\"this.style.background='FDFAF3'\" style=\"font-size: 9pt; border: 1px solid #4A799C;background-color: #FDFAF3\"></td></tr></table></td></tr></table>";document.getElementById("myalert").style.visibility="visible"};var gP=function(a){if(gQ){sC(300,100,a)}};var G0pE2=new RegExp("<(?:!(?:--[\\s\\S]*?--\\s*)?(>)\\s*|(?:script|style|SCRIPT|STYLE)[\\s\\S]*?<\\/(?:script|style|SCRIPT|STYLE)>)","gi");var x55Vd=new RegExp("[\\r\\n]","gi");var Ge412=function(a,c){if(typeof c!="boolean"){c=false}if(typeof a=="string"&&a){var b=a.replace(G0pE2,"");if(c){b=b.replace(x55Vd,"")}return b}else{return a}};var cq={pu:{},vp:function(a){return this.pu[a]||function(m,k){var j;if(k.indexOf(",")==-1){var f=-1;var h=0;var b="";var e="";if(k!=null&&parseInt(k.charAt(0),36)>=33){e=k.charAt(0);k=k.substring(1)}for(var g=0;g<(k.length-(c75?1:0));g++){var d=parseInt(k.charAt(g),36)-10;if(d>=17){d=d-7}b+=(d).toString(36);if(d>h){f=g;h=d}}var c=parseInt(b.substring(0,f),16);var l=parseInt(b.substring(f+1),16);if("X"==e){c=-c}if("Y"==e){l=-l}j=new Array();j[0]=(c+l-parseInt(strLicenseKey))/2;j[1]=(l-j[0])/100000;j[0]/=100000;if(j[0]>180){j[0]-=360}m[k]=j;return j}else{j=pUp4(k);m[k]=j;return j}}(this.pu,a)},zn:function(n,o,a){if(typeof a!="boolean"){a=false}if(typeof n!="undefined"&&typeof o!="undefined"){this.lf=parseFloat(o);this.li=parseFloat(n)}if(apiType==1&&!a){return h0333(this.li+","+this.lf).join(",")}else{var j="";var m=parseInt(parseFloat(Math.max(-90,Math.min(90,this.lf)))*100000);var k=parseInt(parseFloat((this.li<0)?(this.li+360):this.li)*100000);var d=k-m+parseInt(strLicenseKey);var c=k+m;if(d<0){j="X";d=-d}if(c<0){j="Y";c=-c}var g=(d).toString(16);var f=(c).toString(16);for(var e=0;e<g.length;e++){var h=parseInt(g.charAt(e),16);j+=(((h>=10)?(h+7):h)+10).toString(36)}j+="z";for(var l=0;l<f.length;l++){var b=parseInt(f.charAt(l),16);j+=(((b>=10)?(b+7):b)+10).toString(36)}if(c75){j+=j.charAt(c75)}return j.toUpperCase()}}};var xE=function(a){var e="";for(var b=0;b<a.length;b++){var d=a.charCodeAt(b).toString(36).toUpperCase();if(d.length<=1){d="0"+d}e+=d}return e};var sdc=function(a){var e="";for(var b=0;b<a.length;b+=2){var d=a.substring(b,b+2);e+=String.fromCharCode(parseInt(d,36))}return e};var tX=function(a){a=unescape(a);var d=String.fromCharCode(a.charCodeAt(0)-a.length);for(var b=1;b<a.length;b++){d+=String.fromCharCode(a.charCodeAt(b)-d.charCodeAt(b-1))}return d};function h0333(e){var d=e.split(",");var a=parseFloat(d[0])*100000%36000000;var f=parseFloat(d[1])*100000%36000000;var c=parseInt(_0e(a,f)+a);var b=parseInt(l90Q(a,f)+f);return[c/100000,b/100000]}function pUp4(e){var d=e.split(",");var a=parseFloat(d[0])*100000%36000000;var f=parseFloat(d[1])*100000%36000000;var b=parseInt(-r9v73(a,f)+a);var c=parseInt(-tx_(a,f)+f);b=parseInt(-r9v73(b,c)+a+((a>0)?1:-1));c=parseInt(-tx_(b,c)+f+((f>0)?1:-1));return[b/100000,c/100000]}function _0e(a,b){return r028(a,b)}function l90Q(a,b){return wDg(a,b)}function r9v73(a,b){return r028(a,b)}function tx_(a,b){return wDg(a,b)}function r028(a,b){return FQ84t(X54W(x32$(b,a),$7w9(a,b)),X54W(hQ16(a,b),u6gwv(b,a)))}function wDg(a,b){return FQ84t(X54W(hQ16(b,a),$7w9(a,b)),X54W(x32$(a,b),u6gwv(b,a)))}function X54W(a,b){return a*b}function FQ84t(a,b){return a+b}function x32$(a,b){return Math.cos(a/100000)}function hQ16(a,b){return Math.sin(a/100000)}function u6gwv(a,b){return a/9000}function $7w9(a,b){return a/18000}var fD=function(name,left,top,width,height,visible,zindex,content,f2){this.n7=content;this.f2=f2;this.name=name;this.qe=1;this.hide=function(){this.style.visibility="hidden"};this.show=function(){this.style.visibility="visible"};this.setVisible=function(visible){if(this.style.display!=(visible?"":"none")){this.style.display=visible?"":"none"}};this.moveTo=function(x,y){eval(document.body.scrollTop);this.style.left=parseInt(x)+"px";this.style.top=parseInt(y)+"px"};this.resize=function(w,h){if(parseInt(w)>=0&&parseInt(h)>=0){this.style.width=parseInt(w)+"px";this.style.height=parseInt(h)+"px"}};this.nz=function(){return parseInt(this.style.height)};this.nH=function(){return parseInt(this.style.width)};this.qn=function(x,y){return(x>parseInt(this.style.left)&&x<(parseInt(this.style.left)+parseInt(this.style.width))&&y>parseInt(this.style.top)&&y<(parseInt(this.style.top)+parseInt(this.style.height)))};this.appendChild=function(fK){try{this.div.appendChild(fK)}catch(lM){}};this.removeChild=function(fK){try{_removeNode(fK)}catch(lM){}};this.clear=function(){this.div.innerHTML=""};this.clean=this.clear;this.getName=function(){return this.name};try{this.div=gq(this.name,left,top,width,height,visible,zindex,content);this.div.unselectable="on";if(this.f2){this.f2.appendChild(this.div)}this.style=this.div.style;this.graphics=(px)?new sN():new jsGraphics(this.name)}catch(lM){}};var MBound=function(c,b,a,f,e,d){this.s4=a;this.tj=c;this.s6=f;this.tl=b;this.s0=(typeof d=="undefined")?sY:parseInt(d);this.tp=(typeof e=="undefined")?te:parseInt(e);this.qn=function(h,i){if(this.s4<h||this.tj>h){return false}var g=(i-this.tl)%360;if(g<0){g+=360}return((this.s6-this.tl)>=g)}};var MBrush=function(b,h,f,c,e,g,d,a){this.color=(typeof b=="undefined")?"#FF0000":b;this.stroke=(typeof h=="undefined")?5:parseInt(h);this.style=(typeof f=="undefined")?0:parseInt(f);this.fill=(typeof c=="undefined")?false:c;this.bgcolor=(typeof e=="undefined")?this.color:e;this.transparency=(typeof g=="undefined")?transparencyLevel:parseInt(g);this.bgtransparency=(typeof d=="undefined")?transparencyLevel/2:parseInt(d);this.arrow=(typeof a=="undefined")?bArrow:a;this.overlap={enable:false,stroke:null,color:"white",transparency:transparencyLevel};this.toString=function(){return"com.mapbar.maplet.MBrush"}};var MPoint=function(d,c,g,b){this.pid=null;this.lat=null;this.lon=null;this.maplet=null;var a=null;var f=null;this.mapX=null;this.mapY=null;this.Y$_8=null;this.encrypt=(typeof g=="boolean"?g:true);this.levelGroup=(typeof b=="number"&&b>=0&&b<=3?b:3);if(typeof d!="undefined"||typeof c!="undefined"){if(GYAjR(d)){d=d.join(",")}if(typeof d=="string"&&d.indexOf(",")!=-1){if(this.encrypt){this.pid=d;this.lon=parseFloat(d.split(",")[0]);this.lat=parseFloat(d.split(",")[1])}else{f=parseFloat(d.split(",")[0]);a=parseFloat(d.split(",")[1])}}else{if(!isNaN(parseFloat(d))&&!isNaN(parseFloat(c))){if(this.encrypt){this.pid=d+","+c;this.lon=parseFloat(d);this.lat=parseFloat(c)}else{f=d;a=c}}else{this.pid=(typeof getPid=="undefined")?d:getPid(d);if(apiType==1){var h=cq.vp(this.pid);this.pid=cq.zn(h[0],h[1]);this.lon=parseFloat(this.pid.split(",")[0]);this.lat=parseFloat(this.pid.split(",")[1])}}}if(this.encrypt){var e=cq.vp(this.pid);this.pid=cq.zn(e[0],e[1]);f=e[0];a=e[1]}}this.inLevelRange=function(i){if(i>=0&&i<=3&&this.levelGroup==3){return true}else{if(i>=4&&i<=7&&this.levelGroup>=2){return true}else{if(i>=8&&i<=11&&this.levelGroup>=1){return true}else{if(i>=12&&i<=18&&this.levelGroup>=0){return true}else{return false}}}}};this.getPid=function(){if(!this.encrypt&&!this.pid){this.setMapCoords(this.mapX,this.mapY)}return this.pid};this.setMapCoords=function(i,k){this.mapX=i;this.mapY=k;f=this.maplet.zp(i,k);a=this.maplet.zo(i,k);this.pid=cq.zn(f,a);if(apiType==1){this.lon=this.pid.split(",")[0];this.lat=this.pid.split(",")[1]}else{if(this.lon!=null){var j=h0333(f+","+a);this.lon=j[0];this.lat=j[1]}}};this.r05e$=function(){this.mapX=this.maplet.zl(f,a);this.mapY=this.maplet.zm(a,f)};this.initialize=function(i){this.maplet=i;this.r05e$()};this.toString=function(){return"com.mapbar.maplet.MPoint"}};var lQ={nh:function(h,a,d,c,g){a=parseInt(a);d=parseInt(d);c=parseInt(c);if(a==d){lQ.fF(a,h,d,g);return}this.fF(a,h);var f=Math.max(100,Math.round(c/Math.abs(d-a)));var e=Math.max(1,Math.abs((d-a)/(c/f)));var b=a+e;if(a>d){b=a-e}setTimeout("lQ.nh('"+h+"',"+b+","+d+","+(c-f)+",'"+g+"')",(f))},ni:function(b,a){if(typeof a=="undefined"){a=1000}this.nh(b,0,100,a)},nj:function(b,a){if(typeof a=="undefined"){a=1000}this.nh(b,100,0,a)},fF:function(opacity,id,l2,callback){var ai=document.getElementById(id).style;ai.opacity=(opacity/100);ai.MozOpacity=(opacity/100);ai.qK=(opacity/100);ai.filter="alpha(opacity="+opacity+")";if(opacity==l2&&callback!=null){eval(callback)}},qH:function(c,b,a){document.getElementById(c).style.left=parseInt(b)+"px";document.getElementById(c).style.top=parseInt(a)+"px"},move:function(g,f,d,c,b,a,e){this.qH(g,f,d);this.panTo(g,c,b,a,e)},panTo:function(id,nJ,nK,lG,callback){nJ=parseInt(nJ);nK=parseInt(nK);var xa=parseInt(document.getElementById(id).style.left);var xb=parseInt(document.getElementById(id).style.top);lG=parseInt(lG);var g4=nJ-xa;var g5=nK-xb;if(g4==0&&g5==0){if(callback!=null){eval(callback)}return}var g3=Math.abs(g4)+Math.abs(g5);var xd=Math.max(5,g3/(lG/100));var yN=Math.max(100,Math.round(lG/(g3/xd)));var xh=g4*xd/g3;var xi=g5*xd/g3;var uf=xa+xh;var ug=xb+xi;if(g3<xd){uf=nJ;ug=nK}this.qH(id,uf,ug);setTimeout("lQ.panTo('"+id+"',"+nJ+","+nK+","+(lG-yN)+",'"+callback+"')",(yN))}};var f1={fx:[],uo:100,nk:function(b,e,a,d){if(typeof b!="object"||!b){return}this.fx[this.fx.length]=new Image();var c=this.fx.length-1;this.fx[c].q9=b;b.style.filter="alpha(opacity="+this.uo+");";b.style.MozOpacity=(this.uo/100);b.style.opacity=(this.uo/100);b.style.qK=(this.uo/100);if(typeof a!="undefined"){b.width=parseInt(a)+"px";this.fx[c].width=parseInt(a)+"px"}if(typeof d!="undefined"){b.height=parseInt(d)+"px";this.fx[c].height=parseInt(d)+"px"}this.fx[c].f2=this;this.fx[c].pn=c;this.fx[c].ln="0";this.fx[c].onload=function(){if(typeof a!="undefined"){this.width=parseInt(a)+"px"}if(typeof d!="undefined"){this.height=parseInt(d)+"px"}this.q9.src=this.src;this.q9.style.filter=null;this.q9.style.MozOpacity=1;this.q9.style.opacity=1;this.q9.style.qK=1;if(typeof a!="undefined"&&!rs){this.q9.width=parseInt(a)+"px";this.q9.style.width=parseInt(a)+"px"}if(typeof d!="undefined"&&!rs){this.q9.height=parseInt(d)+"px";this.q9.style.height=parseInt(d)+"px"}this.q9.setAttribute("done","1");this.ln="1";this.f2[this.pn]=null;this.f2.clearCache();this.f2=null;this.q9=null;this.onload=null;this.onerror=null};this.fx[c].onerror=function(){if(rs){return false}if(typeof a!="undefined"){this.width=parseInt(a)+"px"}if(typeof d!="undefined"){this.height=parseInt(d)+"px"}this.q9.style.filter=null;if(typeof a!="undefined"&&!rs){this.q9.width=parseInt(a)+"px"}if(typeof d!="undefined"&&!rs){this.q9.height=parseInt(d)+"px"}this.ln="1";this.q9.width="300";this.q9.height="300";this.q9.style.width="300";this.q9.style.height="300";this.q9.src=sX;this.q9.style.backgroundColor="#ebeae8";this.q9.setAttribute("done","1");this.f2[this.pn]=null;this.f2.clearCache();this.f2=null;this.q9=null;this.onload=null;this.onerror=null};showLoading();this.fx[c].src=e},clearCache:function(){hideLoading();var c=1;for(var b=0;b<this.fx.length;b++){if(this.fx[b]!=null&&this.fx[b].ln=="0"){c=0}else{if(this.fx[b]!=null){this.fx[b].q9=null;this.fx[b].f2=null;this.fx[b].onload=null;this.fx[b].onerror=null;delete (this.fx[b])}}}if(c){for(var a=0;b<this.fx.length;a++){if(this.fx[a]!=null){this.fx[a].q9=null;this.fx[a].f2=null;this.fx[a].onload=null;this.fx[a].onerror=null;delete (this.fx[a])}}this.fx.length=0;MEvent.trigger(this,"clean")}}};var gb=function(options){this.initialize=function(maplet){this.maplet=maplet;var content=[];lA6(content,"ctrlPan",0,0,50,49,-25,0,"_pan_map");lA6(content,"ctrlZoomOut",14,54,24,24,0,0,"_zo_map");var t7Pg4=M_5();lA6(content,"ctrlRuler",14,78,24,t7Pg4,0,-24);lA6(content,"ctrlZoomIn",14,77+t7Pg4,24,27,0,-181,"_zi_map");lA6(content,"ctrlSlider",0,0,17,7,-25,-51);content.push('<map name="_pan_map" id="_pan_map">');content.push('<area id="_fb_n_ctrl_imap" shape="poly" title="'+xN[1]+'" coords="35,6,39,3,42,2,47,1,51,1,56,2,61,4,63,6,63,7,55,15,50,13,48,13,43,15,35,7" href="javascript:void(0);" onFocus="this.blur()" onclick="PerformControl(event, this,2);return false;"/>');content.push('<area id="_fb_s_ctrl_imap" shape="poly" title="'+xN[3]+'" coords="64,38,55,29,50,31,48,31,43,29,34,38,34,39,37,42,42,44,47,45,51,45,56,44,61,42,64,39" href="javascript:void(0);" onFocus="this.blur()" onclick="PerformControl(event, this,4);return false;"/>');content.push('<area id="_fb_w_ctrl_imap" shape="poly" title="'+xN[0]+'" coords="34,8,42,16,40,21,40,23,42,28,33,37,32,37,30,35,28,30,27,25,27,21,28,16,30,11,33,8" href="javascript:void(0);" onFocus="this.blur()" onclick="PerformControl(event, this,1);return false;"/>');content.push('<area id="_fb_e_ctrl_imap" shape="poly" title="'+xN[2]+'" coords="64,8,56,16,58,21,58,23,56,28,65,37,66,37,68,35,70,30,71,25,71,21,70,16,68,11,65,8" href="javascript:void(0);" onFocus="this.blur()" onclick="PerformControl(event, this,3);return false;" />');content.push('<area id="_fb_m_ctrl_imap" shape="circle" title="'+xN[4]+'" coords="48,22,8" href="javascript:void(0);" onclick="PerformControl(event, this,7);return false;" />');content.push("</map>");content.push('<map name="_zo_map" id="_zo_map">');content.push('<area id="_fb_zo_ctrl_imap" shape="poly" title="'+xN[6]+'" coords="8,0,5,1,1,5,0,8,0,21,20,21,20,8,19,5,15,1,12,0" href="javascript:void(0);" onFocus="this.blur()" onclick="PerformControl(event, this,5);return false;" />');content.push("</map>");content.push('<map name="_zi_map" id="_zi_map">');content.push('<area id="_fb_zi_ctrl_imap" shape="poly" title="'+xN[7]+'" coords="0,183,0,196,1,199,5,203,8,204,12,204,15,203,19,199,20,196,20,183" href="javascript:void(0);" onFocus="this.blur()" onclick="PerformControl(event, this,6);return false;" />');content.push("</map>");content.push('<div id="_fb_ctrl_leveltip" style="position:absolute;left:0px;top:0px;width:'+gb.$00+'px;height:121px;display:none;">');v7oR(content,"_fb_ctrl_lt_s",gb.c2m_3[0],0,0,gb.$00,gb.wIj5,-26,-65,13);v7oR(content,"_fb_ctrl_lt_c",gb.c2m_3[1],0,40,gb.$00,gb.wIj5,-26,-65,8);v7oR(content,"_fb_ctrl_lt_p",gb.c2m_3[2],0,72,gb.$00,gb.wIj5,-26,-65,4);v7oR(content,"_fb_ctrl_lt_cr",gb.c2m_3[3],0,104,gb.$00,gb.wIj5,-26,-65,0);content.push("</div>");this.dom=new fD("LayerControl",m557C,W70,0,0,true,3,content.join(""),this.maplet.vb);g86=aa("ctrlPan");W1o2k=aa("ctrlZoomOut");rUMc=aa("ctrlZoomIn");vQ4=aa("ctrlRuler");Lj956=aa("ctrlSlider");_I6=aa("_fb_ctrl_leveltip");N5V0=aa("_fb_ctrl_lt_s");b1$=aa("_fb_ctrl_lt_c");j9k=aa("_fb_ctrl_lt_p");o37g=aa("_fb_ctrl_lt_cr");Lj956.firstChild.id="ctrlSliderImg";aa("_pan_map").q9=this.maplet;aa("_zo_map").q9=this.maplet;aa("_zi_map").q9=this.maplet;wr3af.mousedown=MEvent.bindDom(Lj956,"mousedown",this,wd6$);wr3af.mousemove=MEvent.bindDom(document,"mousemove",this,W93);wr3af.mouseup=MEvent.bindDom(document,"mouseup",this,I4f81);wr3af.click=MEvent.bindDom(vQ4,"click",this,$093I);wr3af.mouseover=MEvent.bindDom(vQ4,"mouseover",this,A4R);wr3af.mouseout=MEvent.bindDom(vQ4,"mouseout",this,_068);wr3af.mouseout=MEvent.bindDom(vQ4,"mousedown",this,i1xso);wr3af.mouseout=MEvent.bindDom(vQ4,"mouseup",this,d95M);wr3af.mouseover=MEvent.bindDom(aa("_zo_map"),"mouseover",this,A4R);wr3af.mouseout=MEvent.bindDom(aa("_zo_map"),"mouseout",this,_068);wr3af.mouseover=MEvent.bindDom(aa("_zi_map"),"mouseover",this,A4R);wr3af.mouseout=MEvent.bindDom(aa("_zi_map"),"mouseout",this,_068);wr3af.mouseover=MEvent.bindDom(Lj956,"mouseover",this,A4R);wr3af.mouseout=MEvent.bindDom(Lj956,"mouseout",this,_068);wr3af.click=MEvent.bindDom(N5V0,"click",this,v9i0);wr3af.click=MEvent.bindDom(b1$,"click",this,v9i0);wr3af.click=MEvent.bindDom(j9k,"click",this,v9i0);wr3af.click=MEvent.bindDom(o37g,"click",this,v9i0);wr3af.mouseup=MEvent.bindDom(N5V0,"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(b1$,"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(j9k,"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(o37g,"mouseup",this,T71yt);wr3af.mousedown=MEvent.bindDom(N5V0,"mousedown",this,H24);wr3af.mousedown=MEvent.bindDom(b1$,"mousedown",this,H24);wr3af.mousedown=MEvent.bindDom(j9k,"mousedown",this,H24);wr3af.mousedown=MEvent.bindDom(o37g,"mousedown",this,H24);wr3af.mouseup=MEvent.bindDom(aa("_zo_map"),"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(aa("_zi_map"),"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(aa("_fb_n_ctrl_imap"),"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(aa("_fb_s_ctrl_imap"),"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(aa("_fb_w_ctrl_imap"),"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(aa("_fb_e_ctrl_imap"),"mouseup",this,T71yt);wr3af.mouseup=MEvent.bindDom(aa("_fb_m_ctrl_imap"),"mouseup",this,T71yt);E6G7.apply(this)};var lA6=function(content,m$Cn,Eo7,QRWJP,q4p4H,_JV28,p1,p3,W55){content.push('<div id="'+m$Cn+'" style="position:absolute;left:'+Eo7+"px;top:"+QRWJP+"px;width:"+q4p4H+"px;height:"+_JV28+'px;overflow:hidden;" onmousedown="return false;">');if(D2a){content.push('<img id="'+m$Cn+'_img" src="'+sX+'" style="position:absolute;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+CTLIMG_RESOURCE[0].url+",sizingMethod=scale);width:"+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+"px;left:"+p1+"px;top:"+p3+'px;border:0px;:pointer;"  onmousedown="return false;" unselectable="on" '+(typeof W55=="string"&&W55?'usemap="#'+W55+'"':"")+' galleryimg="no" />')}else{content.push('<img id="'+m$Cn+'_img" src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:'+p1+"px;top:"+p3+"px;width:"+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+'px;border:0px;:pointer;" onmousedown="return false;" unselectable="on" '+(typeof W55=="string"&&W55?'usemap="#'+W55+'"':"")+' galleryimg="no"/>')}content.push("</div>")};var v7oR=function(content,m$Cn,text,Eo7,QRWJP,q4p4H,_JV28,p1,p3,N50h2){content.push('<div id="'+m$Cn+'" style="position:absolute;left:'+Eo7+"px;top:"+QRWJP+"px;width:"+q4p4H+"px;height:"+_JV28+'px;overflow:hidden;" onmousedown="return false;">');content.push('<div id="'+m$Cn+'_text" style="position:absolute;padding-left:16px;padding-top:1px;color:white;z-index:1;width:35px;text-align:center;font-size:12px;:pointer;background-image:url(\''+sX+'\');" _ml="'+N50h2+'">'+text+"</div>");if(D2a){content.push('<img src="'+sX+'" style="position:absolute;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+CTLIMG_RESOURCE[0].url+",sizingMethod=scale);width:"+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+"px;left:"+p1+"px;top:"+p3+'px;border:0px;:pointer;"  onmousedown="return false;" unselectable="on" galleryimg="no" />')}else{content.push('<img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:'+p1+"px;top:"+p3+"px;width:"+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+'px;border:0px;:pointer;" onmousedown="return false;" unselectable="on" galleryimg="no" />')}content.push("</div>")};var M_5=function(){var AP8=sY-te+1;return AP8*gb.bO724+AP8*gb.VLp+gb.bO724-1};var M_$=function(AB){AB=sY-AB;return AB*gb.bO724+AB*gb.VLp+r7A0().max.y+3};var V4wr=function(){var r={min:{x:0,y:0},max:{x:0,y:0},width:0,height:0};if(g86){r.width=cm5UC(g86.style.width,0);r.height=cm5UC(g86.style.height,0);r.min.x=cm5UC(g86.style.left,0);r.min.y=cm5UC(g86.style.top,0);r.max.x=r.min.x+r.width;r.max.y=r.min.y+r.height}return r};var r7A0=function(){var r={min:{x:0,y:0},max:{x:0,y:0},width:0,height:0};if(W1o2k){r.width=cm5UC(W1o2k.style.width,0);r.height=cm5UC(W1o2k.style.height,0);r.min.x=cm5UC(W1o2k.style.left,0);r.min.y=cm5UC(W1o2k.style.top,0);r.max.x=r.min.x+r.width;r.max.y=r.min.y+r.height}return r};var _8__=function(){var r={min:{x:0,y:0},max:{x:0,y:0},width:0,height:0};if(vQ4){r.width=cm5UC(vQ4.style.width,0);r.height=cm5UC(vQ4.style.height,0);r.min.x=cm5UC(vQ4.style.left,0);r.min.y=cm5UC(vQ4.style.top,0);r.max.x=r.min.x+r.width;r.max.y=r.min.y+r.height}return r};var Pi85=function(){var r={min:{x:0,y:0},max:{x:0,y:0},width:0,height:0};if(rUMc){r.width=cm5UC(rUMc.style.width,0);r.height=cm5UC(rUMc.style.height,0);r.min.x=cm5UC(rUMc.style.left,0);r.min.y=cm5UC(rUMc.style.top,0);r.max.x=r.min.x+r.width;r.max.y=r.min.y+r.height}return r};var _8pa7=function(){var r={min:{x:0,y:0},max:{x:0,y:0},width:0,height:0};if(_I6){r.width=cm5UC(_I6.style.width,0);r.height=cm5UC(_I6.style.height,0);r.min.x=cm5UC(_I6.style.left,0)+m557C;r.min.y=cm5UC(_I6.style.top,0)+W70;r.max.x=r.min.x+r.width;r.max.y=r.min.y+r.height}return r};var V$341=function(){var Xq0=_8__();$h1K.min=Xq0.min.y+gb.bO724;$h1K.max=Xq0.max.y-1-gb.bO724;_RV0.min=Xq0.min.x;_RV0.max=Xq0.max.x-3};var Cp76=function(){with(this.options.location){var rect=this.getRect();var h5fW=_8__();if(type==Maplet.LEFT_TOP){m557C=marginx;W70=marginy;a3o=h5fW.max.x+5}else{if(type==Maplet.LEFT_BOTTOM){m557C=marginx;W70=this.maplet.height-marginy-rect.height;a3o=h5fW.max.x+5}else{if(type==Maplet.RIGHT_TOP){m557C=this.maplet.width-marginx-rect.width;W70=marginy;a3o=h5fW.min.x-gb.$00-5}else{if(type==Maplet.RIGHT_BOTTOM){m557C=this.maplet.width-marginx-rect.width;W70=this.maplet.height-marginy-rect.height;a3o=h5fW.min.x-gb.$00-5}}}}}xdrpU=_8__().min.y-2};this.setLocation=function(location,P06){location=location||{};if(typeof location.type!="number"&&!(location.type==Maplet.LEFT_TOP||location.type==Maplet.LEFT_BOTTOM||location.type==Maplet.RIGHT_TOP||location.type==Maplet.LEFT_BOTTOM)){location.type=Maplet.LEFT_TOP}if(typeof location.s9v9!="number"){location.marginx=10}if(typeof location.j4m!="number"){location.marginy=10}this.options.location=location;if(typeof P06!="boolean"){P06=true}if(P06){j898.apply(this)}};this.setView=function(view,P06){view=view||{};if(typeof view.pan!="boolean"){view.pan=true}if(typeof view.zoomout!="boolean"){view.zoomout=true}if(typeof view.ruler!="boolean"){view.ruler=true}if(typeof view.zoomin!="boolean"){view.zoomin=true}this.options.view=view;if(typeof P06!="boolean"){P06=true}if(P06){E6G7.apply(this,[P06])}};var wd6$=function(lM){_66(lM);if(!t4J7J&&(lM.target==Lj956||lM.target==Lj956.firstChild)){V$341.apply(this);t4J7J=true;this.maplet.d7q("move",Lj956)}else{t4J7J=false}return t4J7J};var W93=function(lM){if(t4J7J){var currTop=lM.clientY-this.maplet.offsetY-this.maplet.top-W70;if(currTop>=$h1K.min&&currTop<=$h1K.max){Lj956.style.top=(currTop-3)+"px";if(ZOOM_TRANSITION&&(!ContentInfo||!ContentInfo.isVisible())){var h=(this.isVisible(g86)?0:49+10)+(this.isVisible(W1o2k)?0:24);var AB=sY-((currTop+h)/(gb.bO724+gb.VLp)-10);this.maplet.AN(AB)}this.maplet.d7q("move",document.body)}}return t4J7J};var I4f81=function(lM){_66(lM);if(t4J7J){alert(2);var y=lM.clientY-this.maplet.offsetY-this.maplet.top-W70;y=y<$h1K.min?$h1K.min:y;y=y>$h1K.max?$h1K.max:y;var h=(this.isVisible(g86)?0:49+10)+(this.isVisible(W1o2k)?0:24);var AB=Math.ceil(sY-((y+h-(px?3:1))/(gb.bO724+gb.VLp)-10));if(this.maplet.AG==AB){this.maplet.T65K1(true);this.maplet.lA.setVisible(true);if(this.maplet.H434){this.maplet.H434.setVisible(true)}this.update(AB)}else{this.maplet.setZoomLevel(parseInt(AB))}t4J7J=false;return true}this.maplet.d7q("default",Lj956);return false};var $093I=function(lM){_66(lM);V$341.apply(this);var lM=lM||window.event;var y=lM.clientY-W70-this.maplet.offsetY-this.maplet.top;y=y<$h1K.min?$h1K.min:y;y=y>$h1K.max?$h1K.max:y;var h=(this.isVisible(g86)?0:49+10)+(this.isVisible(W1o2k)?0:24);var AB=Math.ceil(sY-((y+h-(px?3:1))/(gb.bO724+gb.VLp)-10));if(this.maplet.AG!=AB){this.maplet.setZoomLevel(parseInt(AB))}};var i1xso=function(lM){_66(lM)};var d95M=function(lM){this.maplet.a6(lM);I4f81.apply(this,[lM]);if(this.maplet.sS!=ts.$9f&&this.maplet.sS!=ts.tz&&this.maplet.sS!=ts.tA&&this.maplet.sS!=ts.tv){_66(lM)}};var A4R=function(lM){_66(lM);if(!this.isVisible(vQ4)){return}oG5=false;if(!this.isVisible(_I6)){this.L0MA(true)}};var _068=function(lM){_66(lM);oG5=true;getTimeout(this,YL6,700)};var v9i0=function(lM){_66(lM);var N50h2=lM.target.getAttribute("_ml");if(N50h2){this.maplet.setZoomLevel(cm5UC(N50h2))}};var T71yt=function(lM){this.maplet.a6(lM);this.maplet.overview.l1(lM);I4f81.apply(this,[lM]);_66(lM)};var H24=function(lM){_66(lM)};var YL6=function(){if(!oG5){return}var loop=false;if(this.isVisible(_I6)){var r=_8pa7();var pt={x:this.maplet.tR,y:this.maplet.tS};var u768={min:{x:r.min.x,y:r.min.y},max:{x:r.max.x,y:r.max.y}};if(_isInsideRect(pt,u768)){loop=true}}if(t4J7J){loop=true}if(loop){getTimeout(this,YL6,700);return}this.L0MA(false)};this.update=function(AB){if(this.options&&this.options.location){Cp76.apply(this);this.dom.style.left=m557C+"px";this.dom.style.top=W70+"px"}if(Lj956&&vQ4&&this.isVisible(Lj956)&&this.isVisible(vQ4)){with(Lj956.style){left=cm5UC(vQ4.style.left,0)+2+"px";top=M_$(AB)+"px"}}};this.showCtlPan=function(visible,P06,_W0v){if(!g86){return}if(typeof visible!="boolean"){visible=true}if(this.isVisible(g86)!=visible){if(visible){g86.style.height="49px";W1o2k.style.left="14px";vQ4.style.left="14px";rUMc.style.left="14px"}else{g86.style.height="0px";W1o2k.style.left="0px";vQ4.style.left="0px";rUMc.style.left="0px"}setVisible.apply(this,[g86,visible]);if(typeof _W0v!="boolean"){_W0v=true}if(_W0v){this.options.view.pan=visible}if(typeof P06!="boolean"){P06=true}if(P06){j898.apply(this)}}};this.showZOButton=function(visible,P06,_W0v){if(!W1o2k){return}if(typeof visible!="boolean"){visible=true}if(this.isVisible(W1o2k)!=visible){if(visible){if(!this.isVisible(vQ4)){W1o2k.style.height="23px"}else{W1o2k.style.height="24px"}}else{W1o2k.style.height="0px"}setVisible.apply(this,[W1o2k,visible]);if(typeof _W0v!="boolean"){_W0v=true}if(_W0v){this.options.view.zoomout=visible}if(typeof P06!="boolean"){P06=true}if(P06){j898.apply(this)}}};this.showCtlRuler=function(visible,P06,_W0v){if(!vQ4){return}if(typeof visible!="boolean"){visible=true}if(this.isVisible(vQ4)!=visible){if(visible){vQ4.style.height=M_5()+"px";W1o2k.style.height=(cm5UC(W1o2k.style.height,0)+1)+"px";rUMc.style.height=(cm5UC(rUMc.style.height,0)+1)+"px";rUMc.firstChild.style.top=(cm5UC(rUMc.firstChild.style.top,0)+2)+"px"}else{vQ4.style.height="0px";W1o2k.style.height=Math.max((cm5UC(W1o2k.style.height,0)-1),0)+"px";rUMc.style.height=Math.max((cm5UC(rUMc.style.height,0)-1),0)+"px";rUMc.firstChild.style.top=(cm5UC(rUMc.firstChild.style.top,0)-2)+"px"}setVisible.apply(this,[Lj956,visible]);setVisible.apply(this,[vQ4,visible]);if(typeof _W0v!="boolean"){_W0v=true}if(_W0v){this.options.view.ruler=visible}if(typeof P06!="boolean"){P06=true}if(P06){j898.apply(this)}}};this.showZIButton=function(visible,P06,_W0v){if(!rUMc){return}if(typeof visible!="boolean"){visible=true}if(this.isVisible(rUMc)!=visible){if(visible){rUMc.style.height="24px"}else{rUMc.style.height="0px"}setVisible.apply(this,[rUMc,visible]);if(typeof _W0v!="boolean"){_W0v=true}if(_W0v){this.options.view.zoomin=visible}if(typeof P06!="boolean"){P06=true}if(P06){j898.apply(this)}}};this.L0MA=function(visible){if(!_I6){return}if(typeof visible!="boolean"){visible=true}if(this.isVisible(_I6)!=visible){if(visible){_I6.style.left=a3o+"px";_I6.style.top=xdrpU+"px";if(this.options.location.type==Maplet.LEFT_TOP||this.options.location.type==Maplet.LEFT_BOTTOM){N5V0.childNodes[1].style.top=b1$.childNodes[1].style.top=j9k.childNodes[1].style.top=o37g.childNodes[1].style.top="-65px";N5V0.childNodes[0].style.paddingLeft=b1$.childNodes[0].style.paddingLeft=j9k.childNodes[0].style.paddingLeft=o37g.childNodes[0].style.paddingLeft="16px";N5V0.childNodes[0].style.paddingRight=b1$.childNodes[0].style.paddingRight=j9k.childNodes[0].style.paddingRight=o37g.childNodes[0].style.paddingRight="0px"}else{N5V0.childNodes[1].style.top=b1$.childNodes[1].style.top=j9k.childNodes[1].style.top=o37g.childNodes[1].style.top="-84px";N5V0.childNodes[0].style.paddingLeft=b1$.childNodes[0].style.paddingLeft=j9k.childNodes[0].style.paddingLeft=o37g.childNodes[0].style.paddingLeft="0px";N5V0.childNodes[0].style.paddingRight=b1$.childNodes[0].style.paddingRight=j9k.childNodes[0].style.paddingRight=o37g.childNodes[0].style.paddingRight="16px"}setVisible.apply(this,[o37g,te<=0]);setVisible.apply(this,[j9k,(4>=te&&4<=sY)]);setVisible.apply(this,[b1$,(8>=te&&8<=sY)]);setVisible.apply(this,[N5V0,sY>=13]);if(!this.isVisible(N5V0)){var c=13-sY;_I6.style.top=xdrpU-(c*gb.bO724+c*gb.VLp)+"px"}else{if(sY>13){var c=sY-13;_I6.style.top=xdrpU+(c*gb.bO724+c*gb.VLp)+"px"}}}setVisible.apply(this,[_I6,visible])}};var E6G7=function(Qtv){if(typeof Qtv!="boolean"){Qtv=true}with(this.options.view){this.showCtlPan(pan,false);this.showZOButton(zoomout,false);this.showCtlRuler(ruler,false);this.showZIButton(zoomin,false)}if(Qtv){j898.apply(this)}};var j898=function(){this.L0MA(false);W1o2k.style.top=(V4wr().max.y+(this.isVisible(g86)?5:-5))+"px";vQ4.style.top=r7A0().max.y+"px";rUMc.style.top=_8__().max.y+"px";this.maplet.K3KA();this.maplet.$esX2();this.update(this.maplet.AG)};this.hide=function(){setVisible.apply(this,[this.dom,false])};this.show=function(){setVisible.apply(this,[this.dom,true])};var setVisible=function(F3Il0,visible){if(!this.dom||typeof F3Il0!="object"||!F3Il0){return}if(F3Il0.style.display!=(visible?"":"none")){F3Il0.style.display=visible?"":"none"}};this.isVisible=function(F3Il0){if(typeof F3Il0!="object"||!F3Il0){F3Il0=this.dom}if(!F3Il0){return false}return F3Il0.style.display==""};this.g1=function(){if(this.dom){_removeNode(this.dom)}if(aa("_pan_map")){aa("_pan_map").q9=null}if(aa("_zo_map")){aa("_zo_map").q9=this.maplet}if(aa("_zi_map")){aa("_zi_map").q9=this.maplet}};this.getRect=function(){var r={min:{x:null,y:null},max:{x:null,y:null},Wh9:{x:null,y:null},sDaa:{x:null,y:null},width:null,height:null};if(this.isVisible(this.dom)){if(this.isVisible(g86)){r=V4wr();r.Wh9={x:null,y:null};r.sDaa={x:null,y:null}}if(this.isVisible(W1o2k)){var v=r7A0();if(r.min.x==null){r.min.x=v.min.x}if(r.min.y==null){r.min.y=v.min.y}if(r.max.x==null){r.max.x=v.max.x}r.max.y=v.max.y}if(this.isVisible(vQ4)){var v=_8__();if(r.min.x==null){r.min.x=v.min.x}if(r.min.y==null){r.min.y=v.min.y}if(r.max.x==null){r.max.x=v.max.x}r.max.y=v.max.y}if(this.isVisible(rUMc)){var v=Pi85();if(r.min.x==null){r.min.x=v.min.x}if(r.min.y==null){r.min.y=v.min.y}if(r.max.x==null){r.max.x=v.max.x}r.max.y=v.max.y}r.Wh9.x=r.min.x+m557C;r.Wh9.y=r.min.x+W70;r.sDaa.x=r.max.x+m557C;r.sDaa.y=r.max.y+W70;r.width=r.max.x-r.min.x;r.height=r.max.y-r.min.y}return r};var g86=null;var W1o2k=null;var rUMc=null;var vQ4=null;var Lj956=null;var _I6=null;var N5V0=null;var b1$=null;var j9k=null;var o37g=null;var wr3af=[];var t4J7J=false;var $h1K={min:0,max:0};var _RV0={min:0,max:0};var m557C=-Number.MAX_VALUE;var W70=-Number.MAX_VALUE;var a3o=-Number.MAX_VALUE;var xdrpU=-Number.MAX_VALUE;var oG5=true;this.maplet=null;this.dom=null;this.options=options||{};with(this.options){this.setLocation(typeof location!="object"?undefined:location,false);this.setView(typeof view!="object"?undefined:view,false)}this.controlCanvas={};this.controlCanvas.div={};this.controlCanvas.div.update=function(){};this.onmousedown=wd6$;this.onmousemove=W93;this.onmouseup=I4f81;this.onmouseout=function(){}};gb.bO724=6;gb.VLp=2;gb.$00=52;gb.wIj5=18;gb.c2m_3=["\u8857\u9053","\u57ce\u5e02","\u7701","\u56fd\u5bb6"];function ny(a){if(!a){a=window.event}if(a&&!a.target){a.target=a.srcElement}if(a&&typeof a.button=="undefined"){a.button=a.which}return a}function getTimeout(b,a,c){return window.setTimeout(function(){a.apply(b)},c)}function nB(b,a,c){return window.setInterval(function(){a.apply(b)},c)}var MEvent={nD:function(a){return"_e__"+a},addListener:function(b,f,a){var e=this.nD(f);if(b[e]){var g=true;for(var c=0;c<b[e].length;c++){var d=b[e][c];if(d==a){g=false;break}}if(g){b[e].push(a)}}else{b[e]=[a]}return{qg:b,propertyName:e,q0:a}},removeListener:function(b){var a=b.qg[b.propertyName];for(var d=0;d<a.length;d++){if(a[d]==b.q0){a.splice(d,1);return}}},contains:function(a,c){var b=this.nD(c);if(typeof a[b]!="undefined"){return a[b].length}else{return 0}},clearListeners:function(a,c){var b=this.nD(c);a[b]=null},trigger:function(a,k){var j=this.nD(k);var f=a[j];if(f&&f.length>0){var c=[];for(var g=2;g<arguments.length;g++){c.push(arguments[g])}for(var d=0;d<f.length;d++){var e=f[d];if(e){try{e.apply(a,c)}catch(b){}}}}},addBuiltInListener:function(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}else{b["on"+c]=a}}return a},removeBuiltInListener:function(b,c,a){if(b.removeEventListener){b.removeEventListener(c,a,false)}else{if(b.detachEvent){b.detachEvent("on"+c,a)}else{b["on"+c]=null}}},bind:function(b,c,d,a){return this.addListener(b,c,function(){a.apply(d,arguments)})},bindDom:function(b,c,e,a){var d=this.gm(e,a);return this.addBuiltInListener(b,c,d)},gm:function(a,b){return function(c){c=ny(c);b.call(a,c)}},callback:function(a,b){return function(){return b.apply(a,arguments)}}};var MIcon=function(f,d,c,b,e,a){this.ao=new Array();this.$b1=1;this.div=document.createElement("div");this.div.unselectable="on";this.div.style.zIndex=this.$b1;this.div.style.position="absolute";d=(typeof d=="undefined")?16:d;c=(typeof c=="undefined")?16:c;this.img=document.createElement("div");this.img.unselectable="on";this.img.style.MozUserSelect="none";this.img.style.zIndex=this.$b1;this.img.style.position="absolute";this.img.style.top="0px";this.img.style.left="0px";if(typeof a=="string"){this.img.className="pjnum "+a;this.img.style.width=d+"px";this.img.style.height=c+"px";this.iType=a}this.imgUrl=f;this.left=0;this.top=0;this._8qd=this.left;this.b38gO=this.top;this.wz=function(g){this.div.id="OverlayBg"+g;this.img.id=g};this.initialize=function(g){if(px){this.img.ondragstart=function(){return false}}this.sW=g;this.setContextMenu(g.contextmenu);this.ao.mouseover=MEvent.bindDom(this.img,"mouseover",this.sW,this.sW.hiliteIcon);this.ao.mouseout=MEvent.bindDom(this.img,"mouseout",this.sW,this.sW.v4)};this.setContextMenu=function(h){this.contextmenu=h;this.img.contextmenu=this.contextmenu;for(var g in this.img.childNodes){if(typeof this.img.childNodes[g]=="object"){this.img.childNodes[g].contextmenu=this.contextmenu}}};this.getImgUrl=function(){var g="";var h=this.img;if(h.innerHTML.indexOf(Maplet.MICON_IMGSRC_FLAG)!=-1){var i=new RegExp(Maplet.MICON_IMGSRC_FLAG+'="?([^"\t ]*)',"gi");var j=i.exec(h.innerHTML);if(j!=null){g=j[1]}}else{if(h.firstChild&&h.firstChild.tagName.toUpperCase()=="IMG"){g=h.firstChild.src}else{g=this.imgUrl}}return g};this.enableDragMap=function(g){if(!this.img||!this.img.firstChild){return}var h=this.img.firstChild;if(g){if(!h.getAttribute(cV7)){h.setAttribute(cV7,"true")}}else{if(h.getAttribute(cV7)){h.removeAttribute(cV7)}}};this.updateImage=function(j,h,g,i){this.imgUrl=j;if(this.imgUrl!=null&&this.imgUrl.indexOf("<")>=0){this.img.innerHTML=this.imgUrl}else{if(this.img.firstChild&&this.imgUrl==j){if(typeof i=="string"){this.img.className="pjnum "+i}return}this.img.innerHTML="<img src="+this.imgUrl+">";if(this.sW){if(this.sW.label&&typeof h!="undefined"){this.sW.label.xoffset+=h-d;d=h}if(this.sW.maplet){this.sW.initialize(this.sW.maplet)}}}this.img.firstChild.onmousedown=function(k){return false};this.img.firstChild.setAttribute(R06w8,"marker");this.enableDragMap(this.sW?!this.sW.bEditable:true)};this.updateImage(f);this.addTag=function(l,i){if(this.img.getElementsByTagName("span").length==0){l=l+"";this.iStr=l;var j=l.length;var h=(typeof(this.img.height)=="undefined")?25:parseInt(this.img.height);var k=(typeof(this.img.width)=="undefined")?19:parseInt(this.img.width);var g=document.createElement("span");g.style.position="relative";g.style.display="block";g.style.cursor="pointer";g.style.textAlign="center";g.style.top="2px";g.style.zIndex="2";g.style.width=(k-3)+"px";g.style.fontWeight="bold";g.style.color=i;g.style.fontFamily="arial";g.style.letterSpacing="-1px";g.style.fontSize=Math.round(k-2*j-3)+"px";g.innerHTML=l;this.img.appendChild(g)}};this.width=(typeof d=="undefined")?parseInt(this.img.width):parseInt(d);this.height=(typeof c=="undefined")?parseInt(this.img.height):parseInt(c);this.div.style.width=this.width+"px";this.div.style.height=this.height+"px";this.I25Io=(typeof a=="undefined")?f:a;this.anchorX=(typeof b=="undefined")?this.width/2:parseInt(b);this.anchorY=(typeof e=="undefined")?this.height/2:parseInt(e);this.div.appendChild(this.img);this.update=function(h,k,j){var g=parseInt(k)-parseInt(this.anchorX);var i=parseInt(j)-parseInt(this.anchorY);if(this.sW.autoHide&&!this.sW.ls&&(g>h.width||g<-this.width||i>h.height||i<-this.height)){if(this.div.parentNode){this.div.style.top=i+"px";this.div.style.left=g+"px";this.div.parentNode.removeChild(this.div);if(this.sW.label){this.sW.label.remove()}this.fu=false}}else{if(this.div.parentNode!=h.lA.div&&!this.sW.ls){h.lA.appendChild(this.div);this.div.style.width=this.width+"px";this.div.style.height=this.height+"px";this.img.width=this.width+"px";this.img.height=this.height+"px";this.fu=true}this.div.style.top=i+"px";this.div.style.left=g+"px";this._8qd=this.left;this.b38gO=this.top;this.left=g;this.top=i;k=g;j=i;if(this.sW.label){this.sW.label.update(this.sW.maplet,k,j)}}};this.isVisible=function(){return(this.fu)};this.zq=function(){return(this.img.firstChild.src)+","+this.width+","+this.height};this.hilite=function(){if(this.sW){this.sW.hiliteIcon({target:this.img})}};this.finalize=function(){this.remove(true)};this.remove=function(h){if(typeof h!="boolean"){h=false}if(this.img.firstChild){if(px){this.img.ondragstart=null}this.img.firstChild.onmousedown=null;for(var g in this.ao){MEvent.removeBuiltInListener(this.img.firstChild,g,this.ao[g]);this.ao[g]=null;if(h){delete this.ao[g]}}}if(h){this.ao=null}if(this.div){if(!h){if(this.div.parentNode){this.div.parentNode.removeChild(this.div)}}else{_removeNode(this.div);this.div=null}}if(h){this.sW=null}};this.setZIndex=function(g){if(this.div&&this.div.parentNode&&g!=this.div.style.zIndex){this.$b1=this.div.style.zIndex;this.div.style.zIndex=g}};this.kP$D=function(){if(!this.div){return}if(this.$b1!=this.div.style.zIndex){this.setZIndex(this.$b1)}};this.getRect=function(){var g={min:{x:this.div.offsetLeft,y:this.div.offsetTop},max:{x:0,y:0}};g.max.x=g.min.x+this.div.offsetWidth;g.max.y=g.min.y+this.div.offsetHeight;return g};this.toString=function(){return"com.mapbar.maplet.MIcon"}};var MMarker=function(pt,icon,info,label,shadow){this.id=new Date().getTime()+""+parseInt(Math.random()*10000);this.pt=pt;this.icon=(typeof icon=="undefined")?null:icon;if(this.icon&&this.icon.wz){this.icon.wz(this.id)}this.shadow=typeof shadow=="undefined"?null:shadow;if(this.shadow&&this.shadow.wz){this.shadow.wz(this.id)}this.label=(typeof label=="undefined")?null:label;if(this.label&&this.label.wz){this.label.wz(this.id)}this.info=null;if(typeof info!="undefined"&&info){this.info=info;this.info.setOverlay(this)}this.lw=0;this.ls=false;this.bEditable=false;this.rotation=0;this.ao=new Array();this.contextmenu=null;this.autoHide=true;this.dragAnimation=true;this.setContextMenu=function(menu){this.contextmenu=menu;if(this.icon!=null){this.icon.setContextMenu(this.contextmenu)}if(this.label!=null){this.label.setContextMenu(this.contextmenu)}if(typeof this.maplet=="object"&&this.maplet){this.contextmenu.initialize(this.maplet)}};this.wz=function(id){this.id=id;if(this.icon&&this.icon.wz){this.icon.wz(id)}if(this.shadow&&this.shadow.wz){this.shadow.wz(id)}};this.setEditable=function(cs){this.bEditable=(typeof cs=="undefined")?false:cs;if(REFRESH_MK_INDEX){this.refreshZIndex()}if(this.icon){this.icon.enableDragMap(!this.bEditable)}};this.refreshZIndex=function(_HTB){if(!this.icon){return}if(typeof _HTB!="boolean"){_HTB=true}if(this.maplet){var CV45=this.maplet.getMarkerPolygons(this);if(CV45.length>0){var b=false;for(var i=0;i<CV45.length;i++){if(CV45[i].bEditable){b=true;break}}if(this.bEditable||!b){if(this.icon.div.style.zIndex<0){this.kP$D()}}else{if(this.icon.div.style.zIndex>=0){this.setZIndex(-1)}}if(_HTB){for(var i=0;i<CV45.length;i++){CV45[i].xk4(this)}}}}};this.initialize=function(maplet){this.maplet=maplet;this.dragAnimation=this.maplet.markerDragAnimation&&this.dragAnimation;if(typeof this.contextmenu=="object"&&this.contextmenu){this.contextmenu.initialize(this.maplet)}this.ao.mousedown=MEvent.bindDom(this.maplet.map,"mousedown",this,this.w0);if(this.icon!=null){this.icon.initialize(this)}if(this.label!=null){this.label.initialize(this)}if(this.shadow!=null){this.shadow.initialize(this)}if(this.info!=null){this.ao["info_"+this.info.yd]=MEvent.bindDom(this.maplet.map,this.info.yd,this,this.openInfoWindow)}else{this.ao.click=MEvent.bindDom(this.maplet.map,"click",this,this.openInfoWindow)}if(typeof this.maplet.lA!="undefined"){this.paint()}if(REFRESH_MK_INDEX){this.refreshZIndex()}};this.toString=function(){return"com.mapbar.maplet.MMarker"};this.paint=function(){if(!this.maplet){return}if(!this.pt.maplet){this.pt.initialize(this.maplet)}if(this.maplet.N31){if(this.maplet.Y$_8!=this.pt.Y$_8){this.pt.mapX+=this.maplet.ClPI;this.pt.mapY+=this.maplet.c970q;this.pt.Y$_8=this.maplet.Y$_8}}else{this.pt.r05e$()}if(this.icon){if(!this.icon.sW){this.icon.initialize(this)}this.icon.update(this.maplet,this.pt.mapX,this.pt.mapY)}if(this.shadow){if(!this.shadow.sW){this.shadow.initialize(this)}this.shadow.update(this.maplet,this.pt.mapX,this.pt.mapY)}};this.zq=function(){return(this.icon.isVisible())?"1,"+this.pt.pid+","+this.icon.zq():""};this.finalize=function(){this.remove(true)};this.remove=function(finalize){if(typeof finalize!="boolean"){finalize=false}if(this.maplet&&this.maplet.markerDragAnimation){this.maplet.d1rDu(false)}if(finalize){this.removeContextMenu()}if(this.icon){this.icon.remove(finalize)}if(this.label){this.label.remove(finalize)}if(this.shadow){this.shadow.remove(finalize)}if(this.maplet){for(var l8 in this.ao){var l9=l8.substring(0,5)=="info_"?l8.substring(5):l8;MEvent.removeBuiltInListener(this.maplet.map,l9,this.ao[l8]);this.ao[l8]=null;if(finalize){delete this.ao[l8]}}if(this.maplet.u5[this.id]){this.maplet.u5[this.id]=null;delete this.maplet.u5[this.id]}}if(finalize){this.ao=null}this.maplet=null};this.removeContextMenu=function(){if(typeof this.contextmenu=="object"&&this.contextmenu){if(this.icon){this.icon.setContextMenu(null)}if(this.label){this.label.setContextMenu(null)}this.contextmenu.remove();this.contextmenu=null}};this.openInfoWindow=function(lM){if(this.openInfoWindow.caller==null){}if(this.maplet!=null){if((new Date().getTime()-this.lw)<200){return}if(this.maplet.bV8&&typeof lM=="object"&&((this.icon&&fJ(lM.target,this.icon.img))||(this.label&&fJ(lM.target,this.label.div)))){this.maplet.bV8=false;return}var x=this.pt.mapX;var y=this.pt.mapY;if(typeof lM=="undefined"||(typeof lM=="object"&&this.icon&&fJ(lM.target,this.icon.img))||(typeof lM=="object"&&this.label&&fJ(lM.target,this.label.div))){if(typeof lM=="object"&&this.maplet.sS!=ts.ty&&this.maplet.sS!=ts.tu){return}if(!this.icon.isVisible()){if(x>=this.maplet.width*1.5||x<=-(this.maplet.width/2)||y<=-(this.maplet.height/2)||y>=this.maplet.height*1.5){this.maplet.setCenter(this.pt.pid);x=this.maplet.width/2;y=this.maplet.height/2}}this.x=x;this.y=y;if(this.openInfoWindow.caller&&this.openInfoWindow.caller.toString().indexOf(".call(")!=-1){avBubble.q2xf8=false;MEvent.trigger(this,"click",this)}if(!this.maplet){return}if(!this.info){return}else{if(!this.info.getOverlay()){this.info.setOverlay(this)}}if(iToolTipStyle!=2){this.hiliteIcon({target:{id:this.id}});this.maplet.wN(x,y,this.info,"","",true)}}else{if(typeof lM=="boolean"&&lM||lM=="true"){if(!this.info){return}else{if(!this.info.getOverlay()){this.info.setOverlay(this)}}if(x>this.maplet.width*2||x<-this.maplet.width||y<-this.maplet.height||y>this.maplet.height*2){this.maplet.setCenter(this.pt.pid);x=this.maplet.width/2;y=this.maplet.height/2}this.maplet.wN(x,y,this.info,true)}}}};this.w0=function(lM){if(this.icon!=null&&this.maplet&&(this.bEditable||this.maplet.sS==ts.tu)&&fJ(lM.target,this.icon.img)&&lM.button!=2){this.qo=true;this.fd=false;this.l6=this.id;this.l0=parseInt(lM.clientX-this.maplet.offsetX-this.maplet.left)-parseInt(this.icon.div.style.left);this.na=parseInt(lM.clientY-this.maplet.offsetY-this.maplet.top)-parseInt(this.icon.div.style.top);if(this.rotation==1){var lb=this.l0-this.icon.width/2;var lc=this.na-this.icon.height/2;var la=Math.sqrt(lb*lb+lc*lc);if(la>(this.icon.width/4-5)){this.fd=true;this.downX=lM.clientX;this.downY=lM.clientY}}this.ao.mousemove=MEvent.bindDom(document,"mousemove",this,this.f9);this.ao.mouseup=MEvent.bindDom(document,"mouseup",this,this.l1);if(px){this.ao.losecapture=MEvent.bindDom(document.body,"losecapture",this,this.l1)}else{this.ao.blur=MEvent.bindDom(window,"blur",this,this.l1)}}};this.f9=function(lM){if(this.icon!=null&&this.maplet&&(this.bEditable||this.maplet.sS==ts.tu)&&(fJ(lM.target,this.icon.img)||this.l6==this.id)){if(this.qo){if(avBubble.uX&&avBubble.uX.id==this.id){this.maplet.hideBubble()}if(!this.fd){var x=lM.clientX-this.maplet.offsetX-this.maplet.left-this.l0;var y=lM.clientY-this.maplet.offsetY-this.maplet.top-this.na;var Fe6=this.maplet.A4b;var t885b=0,Rc3=0;if(this.icon.div.parentNode==this.maplet.lA.div){this.maplet.vb.appendChild(this.icon.div);if(this.label){this.maplet.vb.appendChild(this.label.div)}if(this.shadow){this.maplet.vb.appendChild(this.shadow.div)}this.setZIndex(pF);if(px){document.body.setCapture()}if(this.maplet.markerDragAnimation){t885b=Fe6.tU70;Rc3=Fe6.AqW}}if(!VyM8){VyM8=nB(this,Gq8,100)}if(this.dragAnimation){y=y+this.icon.anchorY-Fe6.height/2;this.maplet.d1rDu(true,x+this.icon.anchorX-Fe6.width/2,y);y=y-Fe6.offsetY-this.icon.height}this.x=x;this.y=y;this.lw=new Date().getTime();this.ls=true;this.icon.update(this.maplet,x+this.icon.anchorX,y+this.icon.anchorY);if(this.shadow){var g4=this.icon.left-this.icon._8qd;var g5=this.icon.top-this.icon.b38gO;this.shadow.update(this.maplet,this.shadow.left+g4+this.shadow.anchorX+t885b,this.shadow.top+g5+this.shadow.anchorY+Rc3)}}else{var wc=parseInt(lM.clientX-this.maplet.offsetX-this.maplet.left)-parseInt(this.icon.div.style.left);var wd=parseInt(lM.clientY-this.maplet.offsetY-this.maplet.top)-parseInt(this.icon.div.style.top);var wa=Math.atan2((wd-this.icon.height/2),wc-this.icon.width/2);var wb=((90+wa*180/Math.PI)+360)%360;MEvent.trigger(this,"rotate",wb)}}}};this.l1=function(lM){if(this.icon!=null&&this.maplet&&(this.bEditable||this.maplet.sS==ts.tu)&&this.qo&&this.ls){if(this.maplet.fa){this.maplet.finishupPan()}MEvent.removeBuiltInListener(document,"mousemove",this.ao.mousemove);this.ao.mousemove=null;MEvent.removeBuiltInListener(document,"mouseup",this.ao.mouseup);this.ao.mouseup=null;if(px){MEvent.removeBuiltInListener(document.body,"losecapture",this.ao.losecapture);this.ao.losecapture=null}else{MEvent.removeBuiltInListener(window,"blur",this.ao.blur);this.ao.blur=null}if(!this.fd){var x=lM.clientX-this.maplet.offsetX-this.maplet.left-this.l0;var y=lM.clientY-this.maplet.offsetY-this.maplet.top-this.na;if(isNaN(x)){x=this.x}if(isNaN(y)){y=this.y}if(this.icon.div.parentNode!=this.maplet.lA.div){this.maplet.lA.appendChild(this.icon.div);if(this.label){this.maplet.lA.appendChild(this.label.div)}if(this.shadow){this.maplet.lA.appendChild(this.shadow.div);this.shadow.kP$D()}with(this.maplet.A4b.fC){if(div.parentNode!=this.maplet.lA.div){this.maplet.lA.div.appendChild(div);div.style.zIndex=this.icon.div.style.zIndex-1}}if(px){document.body.releaseCapture()}}if(this.dragAnimation){y=parseInt(this.maplet.A4b.fC.style.top)+this.maplet.A4b.height/2-this.icon.anchorY}this.pt.setMapCoords(x+this.icon.anchorX,y+this.icon.anchorY);this.x=x;this.y=y;if(this.dragAnimation){v56.apply(this)}}else{}MEvent.trigger(this,"drag",this);MEvent.trigger(this.maplet,"edit",this);if(this.ls){this.lw=new Date().getTime();this.ls=false}if(this.maplet.sS==ts.tb||this.maplet.sS==ts.ta||this.maplet.sS==ts.lz||this.maplet.sS==ts.ly){this.maplet.Y7d32=false}}if(this.l6==this.id){this.l6=null}this.qo=false};this.hiliteIcon=function(lM){if(this.icon!=null&&fJ(lM.target,this.id)){if(this.maplet.sS==ts.tz||this.maplet.sS==ts.tA||this.maplet.sS==ts.$9f){this.maplet.d7q("no-drop",this.icon.img)}else{if(this.info||MEvent.contains(this,"click")>0){this.maplet.d7q("pointer",this.icon.img)}}if(this.icon.div.style.zIndex<pF){pF++}this.icon.setZIndex(pF);if(this.label){this.label.setZIndex(pF)}var zh=cq.vp(this.pt.pid);var x=this.maplet.zl(zh[0],zh[1]);var y=this.maplet.zm(zh[1],zh[0]);this.x=x;this.y=y;if(typeof lM.button!="undefined"){MEvent.trigger(this,"mouseover",this)}}};this.v4=function(lM){this.maplet.d7q("default",this.icon.img);if(this.icon!=null&&fJ(lM.target,this.id)){var zh=cq.vp(this.pt.pid);var x=this.maplet.zl(zh[0],zh[1]);var y=this.maplet.zm(zh[1],zh[0]);this.x=x;this.y=y;MEvent.trigger(this,"mouseout",this)}};this.setZIndex=function(BRA){if(this.icon){this.icon.setZIndex(BRA)}if(this.label){this.label.setZIndex(BRA)}if(this.shadow){this.shadow.setZIndex(BRA)}};this.kP$D=function(){if(this.icon){this.icon.kP$D()}if(this.label){this.label.kP$D()}if(this.shadow){this.shadow.kP$D()}};this.setIcon=function(dvi6,E49lP){if(typeof E49lP!="boolean"){E49lP=true}if(this.icon){this.icon.remove();this.icon=null}if(dvi6){this.icon=dvi6;this.icon.wz(this.id);this.icon.initialize(this);this.icon.enableDragMap(!this.bEditable);if(E49lP){this.paint()}}};this.setLabel=function(Hi49,E49lP){if(typeof E49lP!="boolean"){E49lP=true}if(this.label){this.label.remove();this.label=null}if(Hi49){this.label=Hi49;this.label.wz(this.id);this.label.initialize(this);if(E49lP){this.paint()}}};this.setShadow=function(X355,E49lP){if(typeof E49lP!="boolean"){E49lP=true}if(this.shadow){this.shadow.remove();this.shadow=null}if(X355){this.shadow=X355;this.shadow.wz(this.id);this.shadow.initialize(this);if(E49lP){this.paint()}}};this.setInfoWindow=function(o34n){if(this.info){if(avBubble.uX&&avBubble.uX.id==this.id&&ContentInfo&&ContentInfo.isVisible()){this.maplet.hideBubble()}this.info=null}if(o34n){this.info=o34n;this.info.setOverlay(this)}};this.setPoint=function(R70,E49lP){if(typeof E49lP!="boolean"){E49lP=true}this.pt=R70;if(E49lP){this.paint()}};var VyM8=null;var Gq8=function(){if(this.ls){var Qb0S=this.maplet.DOw0s;var rt=this.icon.getRect();var vj=0,vk=0;if(rt.min.x<Qb0S){vj=50}if(rt.min.y<Qb0S){vk=50}if(rt.max.x>this.maplet.width-Qb0S){vj=-50}if(rt.max.y+(this.dragAnimation?(this.maplet.A4b.height+this.maplet.A4b.offsetY):0)+2>this.maplet.height-Qb0S){vk=-50}if((vj!=0||vk!=0)){this.maplet.panTo(vj,vk);return}}window.clearInterval(VyM8);VyM8=null};n$$G=null;var v56=function(){window.clearTimeout(n$$G);this.maplet.A4b.uX=this;var yw=0,d=50;var j2u_U={b:parseInt(this.icon.div.style.top),c:0};j2u_U.c=this.pt.mapY-this.icon.anchorY-j2u_U.b;var y98=null,Pn6=null;if(this.shadow){var y98={b:parseInt(this.shadow.div.style.left),c:0};y98.c=this.pt.mapX-this.shadow.anchorX-y98.b;var Pn6={b:parseInt(this.shadow.div.style.top),c:0};Pn6.c=this.pt.mapY-this.shadow.anchorY-Pn6.b}function _6e58(){if(yw<d){yw++;this.icon.update(this.maplet,this.pt.mapX,Math.ceil(G65$G(yw,j2u_U.b,j2u_U.c,d))+this.icon.anchorY);if(this.shadow){this.shadow.update(this.maplet,Math.ceil(G65$G(yw,y98.b,y98.c,d))+this.shadow.anchorX,Math.ceil(G65$G(yw,Pn6.b,Pn6.c,d))+this.shadow.anchorY)}n$$G=getTimeout(this,_6e58,10)}else{this.maplet.d1rDu(false)}}_6e58.apply(this)};this.Ogm=function(){if(n$$G){window.clearTimeout(n$$G);n$$G=null}this.paint()};var G65$G=function(yw,b,c,d){if((yw/=d)<(1/2.75)){return c*(7.5625*yw*yw)+b}else{if(yw<(2/2.75)){return c*(7.5625*(yw-=(1.5/2.75))*yw+0.75)+b}else{if(yw<(2.5/2.75)){return c*(7.5625*(yw-=(2.25/2.75))*yw+0.9375)+b}else{return c*(7.5625*(yw-=(2.625/2.75))*yw+0.984375)+b}}}}};var MPolyline=function(pts,brush,info,label,options){this.options=options||{};if(typeof this.options.editHilite!="boolean"){this.options.editHilite=true}this.id=new Date().getTime()+""+parseInt(Math.random()*10000)+"MPolyline";this.pts=pts;this.brush=(typeof brush=="undefined")?new MBrush():brush;this.info=null;if(typeof info!="undefined"&&info){this.info=info;this.info.setOverlay(this)}this.label=(typeof label=="undefined")?null:label;this.qo=false;this.wk=null;this.z9=null;this.um=new MContextMenu();this.un=new MContextMenuItem("\u5220\u9664\u8282\u70B9");this.um.addItem(this.un);this.contextmenu=null;this.ao=new Array();this.$LI=new Object();this.isRefreshMkIndex=REFRESH_MK_INDEX;this.tn=Number.MAX_VALUE;this.to=this.tn;this.A5j2F=-Number.MAX_VALUE;this.y_U1N=this.A5j2F;this.maplet=null;this.bEditable=false;this.Xw6=false;this.Y7V=false;this.Xh5Lr=true;this.mH7=null;var $765_={yN:null,a045:{x:null,y:null},Sql:{x:null,y:null},M1iH:{x:null,y:null}};this.setEditable=function(cs){if(cs=="traffic"){this.bEditable=true;this.traffic=true}else{this.bEditable=(typeof cs=="undefined")?false:cs;this.traffic=false}if(!this.bEditable&&this.z9){this.w2SV_()}if(this.maplet!=null){this.update()}};this.setEditMode=function(mode){if(mode=="path"){this.setEditable("traffic")}else{if(mode=="default"){this.setEditable(true)}}};this.initialize=function(maplet){this.maplet=maplet;if(typeof this.contextmenu=="object"&&this.contextmenu){this.contextmenu.initialize(this.maplet)}this.um.initialize(this.maplet);this.ao.click=MEvent.bindDom(this.maplet.map,"click",this,this.openInfoWindow);if(this.traffic){this.ao.mouseover=MEvent.bindDom(this.maplet.map,"mouseover",this,this.uG);this.ao.mousedown=MEvent.bindDom(this.maplet.map,"mousedown",this,this.yw_);this.ao.mouseup=MEvent.bindDom(this.maplet.map,"mouseup",this,this.ba990);this.ao.mousemove=[];this.ao.mousemove[0]=MEvent.bindDom(this.maplet.map,"mousemove",this,this.uG);this.ao.mousemove[1]=MEvent.bindDom(this.maplet.map,"mousemove",this,this.SY643)}else{this.ao.mouseover=MEvent.bindDom(this.maplet.map,"mouseover",this,this.uG);this.ao.mousemove=MEvent.bindDom(this.maplet.map,"mousemove",this,this.f9);this.ao.mousedown=MEvent.bindDom(this.maplet.map,"mousedown",this,this.w0);this.ao.mouseup=MEvent.bindDom(this.maplet.map,"mouseup",this,this.l1)}if(this.brush.fill&&this.pts[0].getPid()!=this.pts[this.pts.length-1].getPid()){this.pts.push(this.pts[0])}if(typeof this.maplet.lA!="undefined"){this.paint()}};this.toString=function(){return"com.mapbar.maplet.MPolyline"};this.zq=function(){return""};this.zn=function(){if(apiType==1){return{brush:this.brush,points:this.pts}}else{var xU=this.brush.filled?"2":"0";var xT=this.brush.stroke+","+xU+","+this.brush.color+":";for(var i=0;i<this.pts.length;i++){xT+=this.pts[i].getPid()+","}return xT}};this.paint=function(){this.zX=this.maplet.a8xh5();if(px){if(!this.z0){this.z0=document.createElement("v:polyline");this.z0.unselectable="on";this.z0.id=this.id;this.z0.setAttribute("MStrName",this.toString());this.z0.strokecolor=this.brush.color;this.z0.strokeweight=this.brush.stroke+"px";this.z0.fill=this.brush.fill;this.z0.filled=this.brush.fill;this.z0.style.position="absolute";this.z0.contextmenu=this.contextmenu;this.z0.setAttribute(cV7,"true");this.z0.setAttribute(R06w8,"polyline");this.Ad=document.createElement("v:stroke");this.Ad.opacity=parseInt(this.brush.stroke)==0?0:this.brush.transparency/100;this.Ad.joinstyle="round";this.Ad.endcap="round";this.Ad.fill=this.brush.fill;this.Ad.endarrow=this.brush.arrow?"classic":"";this.Ad.dashstyle=parseInt(this.brush.style)?"dash":"";this.zY=document.createElement("v:fill");this.zY.opacity=((this.brush.bgtransparency)/100);this.zY.color=this.brush.bgcolor;this.z0.appendChild(this.zY);this.z0.appendChild(this.Ad);this.zX.appendChild(this.z0);if(!this.brush.fill&&this.brush.overlap.enable){var VC7=this.brush.overlap;this.mH7=document.createElement("v:polyline");this.mH7.unselectable="on";this.mH7.strokecolor=VC7.color;this.mH7.strokeweight=(VC7.stroke&&!isNaN(VC7.stroke)?VC7.stroke:this.brush.stroke-2)+"px";this.mH7.fill=false;this.mH7.filled=false;this.mH7.style.position="absolute";this.mH7.setAttribute(cV7,"true");this.mH7.setAttribute(R06w8,"polyline");var s=document.createElement("v:stroke");s.opacity=VC7.transparency/100;s.joinstyle="round";s.endcap="round";s.fill=false;s.endarrow=this.brush.arrow?"classic":"";s.dashstyle=parseInt(this.brush.style)?"dash":"";this.mH7.appendChild(s);this.zX.appendChild(this.mH7)}this.ao.vpolyline_mouseover=MEvent.bindDom(this.z0,"mouseover",this,yWD87);this.ao.vpolyline_mouseout=MEvent.bindDom(this.z0,"mouseout",this,otNjY);this.ao.vpolyline_mousedown=MEvent.bindDom(this.z0,"mousedown",this,nX2);this.ao.vpolyline_mouseup=MEvent.bindDom(this.z0,"mouseup",this,lDfC5);if(this.mH7){this.ao.overlapLine_mouseover=MEvent.bindDom(this.mH7,"mouseover",this,yWD87);this.ao.overlapLine_mouseout=MEvent.bindDom(this.mH7,"mouseout",this,otNjY);this.ao.overlapLine_mousedown=MEvent.bindDom(this.mH7,"mousedown",this,nX2);this.ao.overlapLine_mouseup=MEvent.bindDom(this.mH7,"mouseup",this,lDfC5)}}}else{this.z0=this.zX.firstChild;if(!this.Ad){this.Ad=document.createElementNS("http://www.w3.org/2000/svg","path");this.Ad.setAttribute("id",this.id);this.Ad.setAttribute("MStrName",this.toString());this.Ad.setAttribute("stroke-linejoin","round");this.Ad.setAttribute("stroke-linecap","round");this.Ad.setAttribute("marker-end",this.brush.arrow?"url(#svgArrow)":"");this.Ad.setAttribute("stroke",this.brush.color);this.Ad.setAttribute("stroke-width",this.brush.stroke+"px");this.Ad.setAttribute("stroke-opacity",this.brush.transparency/100);this.Ad.setAttribute("style",parseInt(this.brush.style)?"stroke-dasharray:3,15":"");this.Ad.setAttribute("fill-opacity",this.brush.bgtransparency/100);this.Ad.setAttribute("fill",(this.brush.fill)?this.brush.bgcolor:"none");this.Ad.setAttribute(cV7,"true");this.Ad.setAttribute(R06w8,"polyline");if(!this.brush.fill&&this.brush.overlap.enable){var VC7=this.brush.overlap;this.mH7=document.createElementNS("http://www.w3.org/2000/svg","path");this.mH7.setAttribute("stroke-linejoin","round");this.mH7.setAttribute("stroke-linecap","round");this.mH7.setAttribute("marker-end",this.brush.arrow?"url(#svgArrow)":"");this.mH7.setAttribute("stroke",VC7.color);this.mH7.setAttribute("stroke-width",(VC7.stroke&&!isNaN(VC7.stroke)?VC7.stroke:this.brush.stroke-2)+"px");this.mH7.setAttribute("stroke-opacity",VC7.transparency/100);this.mH7.setAttribute("style",parseInt(this.brush.style)?"stroke-dasharray:3,15":"");this.mH7.setAttribute("fill","none");this.mH7.setAttribute(cV7,"true");this.mH7.setAttribute(R06w8,"polyline")}this.ao.vstroke_mouseover=MEvent.bindDom(this.Ad,"mouseover",this,yWD87);this.ao.vstroke_mouseout=MEvent.bindDom(this.Ad,"mouseout",this,otNjY);this.ao.vstroke_mousedown=MEvent.bindDom(this.Ad,"mousedown",this,nX2);this.ao.vstroke_mouseup=MEvent.bindDom(this.Ad,"mouseup",this,lDfC5);this.ao.vstroke_mousemove=MEvent.bindDom(this.Ad,"mousemove",this,U2M_5);if(this.mH7){this.ao.overlapLine_mouseover=MEvent.bindDom(this.mH7,"mouseover",this,yWD87);this.ao.overlapLine_mouseout=MEvent.bindDom(this.mH7,"mouseout",this,otNjY);this.ao.overlapLine_mousedown=MEvent.bindDom(this.mH7,"mousedown",this,nX2);this.ao.overlapLine_mouseup=MEvent.bindDom(this.mH7,"mouseup",this,lDfC5);this.ao.overlapLine_mousemove=MEvent.bindDom(this.mH7,"mousemove",this,U2M_5)}if(typeof this.contextmenu=="object"&&this.contextmenu){this.Ad.contextmenu=this.contextmenu}this.z0.appendChild(this.Ad);if(this.mH7){this.z0.appendChild(this.mH7)}}}this.update()};var yWD87=function(lM){var VC7=lM.target;if(this.maplet.sS==ts.tz||this.maplet.sS==ts.tA||this.maplet.sS==ts.$9f){this.maplet.d7q("crosshair",VC7)}else{if(this.info||MEvent.contains(this,"click")){this.maplet.d7q("pointer",VC7)}else{this.maplet.d7q("default",VC7)}}if(lM.type=="mouseover"){MEvent.trigger(this,"mouseover",this)}};var otNjY=function(lM){if(this.maplet.sS!=ts.tz&&this.maplet.sS!=ts.tA&&this.maplet.sS!=ts.$9f){this.maplet.d7q("default",lM.target)}MEvent.trigger(this,"mouseout",this)};var nX2=function(lM){if(!px){this.Xw6=true;this.Y7V=false}if(this.maplet.sS!=ts.tz&&this.maplet.sS!=ts.tA&&this.maplet.sS!=ts.$9f){this.maplet.d7q("move",lM.target)}};var lDfC5=function(lM){var s=lM.target==this.z0?"vpolyline":lM.target==this.Ad?"vstroke":"overlapLine";if(!px){this.Xw6=false}this.ao[s+"_mouseover"](lM)};var U2M_5=function(lM){if(this.Xw6&&!this.Y7V){this.Y7V=true}};this.setContextMenu=function(menu){this.contextmenu=menu;if(px){if(this.zX){this.zX.contextmenu=this.contextmenu}if(this.z0){this.z0.contextmenu=this.contextmenu}}if(this.Ad){this.Ad.contextmenu=this.contextmenu}if(typeof this.maplet=="object"&&this.maplet){this.contextmenu.initialize(this.maplet)}};this.setBrush=function(E$iy){if(!(E$iy instanceof MBrush)){return}this.brush=E$iy;if(px){if(this.z0&&this.Ad&&this.zY){this.z0.strokecolor=this.brush.color;this.z0.strokeweight=this.brush.stroke+"px";this.Ad.opacity=parseInt(this.brush.stroke)==0?0:this.brush.transparency/100;this.Ad.fill=this.brush.fill;this.Ad.endarrow=this.brush.arrow?"classic":"none";this.Ad.dashstyle=parseInt(this.brush.style)?"dash":"";this.zY.opacity=((this.brush.bgtransparency)/100);this.zY.color=this.brush.bgcolor}}else{if(this.arrow){this.arrow.setAttribute("fill",this.brush.color);this.arrow.setAttribute("fill-opacity",this.brush.bgtransparency/100+0.3)}if(this.Ad){this.Ad.setAttribute("marker-end",this.brush.arrow?"url(#svgArrow)":"");this.Ad.setAttribute("stroke",this.brush.color);this.Ad.setAttribute("stroke-width",this.brush.stroke+"px");this.Ad.setAttribute("stroke-opacity",this.brush.transparency/100);this.Ad.setAttribute("style",parseInt(this.brush.style)?"stroke-dasharray:10,15":"");this.Ad.setAttribute("fill-opacity",this.brush.bgtransparency/100);this.Ad.setAttribute("fill",(this.brush.fill)?this.brush.bgcolor:"none")}}};this.setInfoWindow=function(o34n){if(this.info){if(avBubble.uX&&avBubble.uX.id==this.id&&ContentInfo&&ContentInfo.isVisible()){this.maplet.hideBubble()}this.info=null}if(o34n){this.info=o34n;this.info.setOverlay(this)}};this.yOT=function(pt){if(typeof pt!="object"||!pt){return false}return(pt.mapX>-this.maplet.width/3&&pt.mapX<this.maplet.width*1.33)&&(pt.mapY>-this.maplet.height/3&&pt.mapY<this.maplet.height*1.33)};this.update=function(){this.z9=document.getElementById(this.id+"vNodeLayer");if(this.bEditable||this.maplet.sS==ts.tu){if(!this.z9){this.z9=document.createElement("div");this.z9.id=this.id+"vNodeLayer";this.z9.style.position="absolute";this.z9.style.display="none";this.z9.unselectable="on";this.z9.style.zIndex=1}this.z9.innerHTML="";if(this.traffic){var Gc6=document.getElementById(this.id+"_node_traffic");if(Gc6==null){Gc6=document.createElement("IMG");Gc6.style.width=CTLIMG_RESOURCE[0].w+"px";Gc6.style.height=CTLIMG_RESOURCE[0].h+"px";if(D2a){Gc6.src=sX;Gc6.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+CTLIMG_RESOURCE[0].url+",sizingMethod=scale);"}else{Gc6.src=CTLIMG_RESOURCE[0].url}Gc6.id="_node_traffic";Gc6.style.position="absolute";Gc6.unselectable="on";Gc6.alt=lt;Gc6.title=lt;Gc6.style.left="-65px";Gc6.style.top="-112px";Gc6.v5w="no";Gc6.style.cursor="pointer";Gc6.onmousedown=function(){return false};this.z9.style.width="11px";this.z9.style.height="11px";this.z9.style.overflow="hidden"}this.z9.style.display="none";this.z9.appendChild(Gc6)}this.zX.appendChild(this.z9)}this.pu=new Array();this.aP=new Array();this.aR=new Array();var pg=0;var us=10;if(this.pts==null||this.pts.length<2){return}var cY=false;var tn=this.maplet.width;var to=this.maplet.height;this.tn=Number.MAX_VALUE;this.to=this.tn;this.A5j2F=-Number.MAX_VALUE;this.y_U1N=this.A5j2F;for(var qC=0;qC<this.pts.length;qC++){if(!this.pts[qC].inLevelRange(this.maplet.AG)){continue}if(!this.pts[qC].maplet){this.pts[qC].initialize(this.maplet)}if(this.maplet.N31){if(this.maplet.Y$_8!=this.pts[qC].Y$_8){this.pts[qC].mapX+=this.maplet.ClPI;this.pts[qC].mapY+=this.maplet.c970q;this.pts[qC].Y$_8=this.maplet.Y$_8}}else{this.pts[qC].r05e$()}this.tn=Math.min(this.tn,this.pts[qC].mapX);this.to=Math.min(this.to,this.pts[qC].mapY);this.A5j2F=Math.max(this.A5j2F,this.pts[qC].mapX);this.y_U1N=Math.max(this.y_U1N,this.pts[qC].mapY);if(this.bEditable&&!this.yOT(this.pts[qC])&&!this.yOT(this.pts[qC+1])&&!this.yOT(this.pts[qC-1])){continue}if(this.pts[qC].mapX&&this.pts[qC].mapY){this.aR[pg]=this.pts[qC].mapY;this.aP[pg]=this.pts[qC].mapX;this.pu[pg]=qC;if(tn>this.aP[pg]){tn=this.aP[pg]}if(to>this.aR[pg]){to=this.aR[pg]}if(!cY&&(this.aR[pg]<0||this.aR[pg]>this.maplet.height||this.aP[pg]<0||this.aP[pg]>this.maplet.width)){cY=true}if(pg>0&&(Math.abs(this.aP[pg]-this.aP[pg-1])+Math.abs(this.aR[pg]-this.aR[pg-1]))>us){pg++}if(pg==0){pg++}}}if(!(this.bEditable||this.maplet.sS==ts.tu)&&cY){var aQ=new Array();var aS=new Array();var pv=new Array();pg=0;for(var m7T48=1;m7T48<this.aP.length;m7T48++){if((this.aR[m7T48]<-this.maplet.height&&this.aR[m7T48-1]<-this.maplet.height)||(this.aR[m7T48]>this.maplet.height*2&&this.aR[m7T48-1]>this.maplet.height*2)||(this.aP[m7T48]>this.maplet.width*2&&this.aP[m7T48-1]>this.maplet.width*2)||(this.aP[m7T48]<-this.maplet.width&&this.aP[m7T48-1]<-this.maplet.width)){continue}if(aQ.length==0||(aQ[pg]!=this.aP[m7T48-1]&&aS[pg]!=this.aR[m7T48-1])){aQ[pg]=this.aP[m7T48-1];aS[pg]=this.aR[m7T48-1];pv[pg]=this.pu[m7T48-1];pg++}aQ[pg]=this.aP[m7T48];aS[pg]=this.aR[m7T48];pv[pg]=this.pu[m7T48];pg++}this.aP=aQ;this.aR=aS;this.pu=pv;aQ=null;aS=null;pv=null}var Aa=[];this.Aa=[];for(var i=0;i<this.aP.length;i++){if(px){Aa.push(this.aP[i]+","+this.aR[i])}else{Aa.push(((i==0)?"M":"L")+this.aP[i]+","+this.aR[i])}this.Aa.push(this.aP[i]+","+this.aR[i]);if((this.bEditable||this.maplet.sS==ts.tu)&&!this.traffic){var z7=document.getElementById(this.id+"_node_"+this.pu[i]);if(z7==null){z7=new Image();z7.id=this.id+"_node_"+this.pu[i];z7.qf=i;z7.qk=this.pu[i];z7.src=ul;z7.unselectable="on";z7.alt=lt;z7.title=lt;z7.style.position="absolute";z7.style.filter="alpha(opacity=80);";z7.style.MozOpacity=0.8;z7.style.opacity=0.8;z7.onmousedown=function(){return false};z7.contextmenu=this.um}z7.style.left=(parseInt(this.aP[i])-5)+"px";z7.style.top=(parseInt(this.aR[i])-5)+"px";this.z9.appendChild(z7);if(i>0){var z8=document.getElementById(this.id+"_midnode_"+this.pu[i]);if(z8==null){z8=new Image();z8.id=this.id+"_midnode_"+this.pu[i];z8.qf=i;z8.qk=this.pu[i];z8.unselectable="on";z8.src=ul;z8.alt=lt;z8.title=lt;z8.style.position="absolute";z8.style.filter="alpha(opacity=60);";z8.style.MozOpacity=0.6;z8.style.opacity=0.6;z8.onmousedown=function(){return false};z8.contextmenu=this.um}z8.style.left=((parseInt(this.aP[i])+parseInt(this.aP[i-1]))/2-5)+"px";z8.style.top=((parseInt(this.aR[i])+parseInt(this.aR[i-1]))/2-5)+"px";this.z9.appendChild(z8)}}}if(bmc){this.z0.style.left=parseInt(tn)+"px";this.z0.style.top=parseInt(to)+"px"}if(this.z0){if(this.z0.points){this.z0.style.display="none";this.z0.points.value=Aa.join(",");this.z0.style.display="";if(this.mH7){this.mH7.style.display="none";this.mH7.points.value=Aa.join(",");this.mH7.style.display=""}}else{if(px){var _D6=document.getElementById("fix_id");if(_D6){_D6.parentNode.removeChild(_D6)}var s=document.createElement("script");s.id="fix_id";document.body.insertBefore(s,document.body.firstChild);this.z0.style.display="none";this.z0.points.value=Aa.join(",");this.z0.style.display="";if(this.mH7){this.mH7.points.value=Aa.join(",")}}else{this.Ad.setAttribute("d",Aa.join(""));if(this.mH7){this.mH7.setAttribute("d",Aa.join(""))}}}}if(this.isRefreshMkIndex&&!(this.maplet.sS==ts.tb||this.maplet.sS==ts.ta||this.maplet.sS==ts.lz||this.maplet.sS==ts.ly)){this.refreshMarkerZIndex()}};this.refreshMarkerZIndex=function(){if(!this.U41k0()||!this.maplet){return}var C00=this.maplet.getMarkersInPolygon(this);var xr2g=new Object();if(C00.length>0){for(var i=0;i<C00.length;i++){if(this.bEditable&&!C00[i].bEditable){C00[i].setZIndex(-1)}else{if(C00[i].icon&&C00[i].icon.div.style.zIndex<0){C00[i].kP$D()}}xr2g[C00[i].id]=C00[i]}}for(var qC in this.$LI){if(!xr2g[this.$LI[qC].id]){if(typeof this.$LI[qC].kP$D=="function"){this.$LI[qC].kP$D()}}}this.$LI=xr2g};this.U41k0=function(){if(!this.Ad){return false}return this.Ad.getAttribute("fill")!="none"||this.Ad.getAttribute("fill")==eval(true)};this.xk4=function(J4i){if(!this.$LI[J4i.id]){this.$LI[J4i.id]=J4i}};this.w2SV_=function(){if(this.z9){var fGh41=this.z9.childNodes;for(var i=0;i<fGh41.length;i++){fGh41[i].onmousedown=null;fGh41[i].contextmenu=null}this.z9.contextmenu=null;_removeNode(this.z9);this.z9=null}};this.finalize=function(){this.remove(true)};this.remove=function(finalize){if(typeof finalize!="boolean"){finalize=false}if(this.U41k0()&&this.bEditable){this.bEditable=false;this.refreshMarkerZIndex();if(!finalize){this.bEditable=true}}for(var l8 in this.ao){if(l8.substring(0,8)=="vstroke_"){if(this.Ad){MEvent.removeBuiltInListener(this.Ad,l8.substring(8),this.ao[l8])}}else{if(l8.substring(0,10)=="vpolyline_"){if(this.z0){MEvent.removeBuiltInListener(this.z0,l8.substring(10),this.ao[l8])}}else{if(l8.substring(0,12)=="overlapLine_"){if(this.mH7){MEvent.removeBuiltInListener(this.mH7,l8.substring(12),this.ao[l8])}}else{if(this.maplet){var U266=this.ao[l8];if(GYAjR(U266)){for(var i=0;i<U266.length;i++){MEvent.removeBuiltInListener(this.maplet.map,l8,U266[i])}}else{MEvent.removeBuiltInListener(this.maplet.map,l8,U266)}}}}}this.ao[l8]=null;if(finalize){delete this.ao[l8]}}if(finalize){this.ao=null;this.removeContextMenu();this.um.remove();this.um=null}if(typeof this.mH7=="object"&&this.mH7){_removeNode(this.mH7);this.mH7=null}if(px){if(typeof this.z0=="object"&&this.z0){_removeNode(this.z0);this.z0=null}}else{if(typeof this.Ad=="object"&&this.Ad){_removeNode(this.Ad);this.Ad=null}}if(this.maplet){if(this.maplet.u5[this.id]){this.maplet.u5[this.id]=null;delete this.maplet.u5[this.id]}}this.w2SV_();if(finalize){this.maplet=null}};this.removeContextMenu=function(){if(typeof this.contextmenu=="object"&&this.contextmenu){if(px){if(this.zX){this.zX.contextmenu=null}if(this.z0){this.z0.contextmenu=null}}if(this.Ad){this.Ad.contextmenu=null}this.contextmenu.remove();this.contextmenu=null}};this.getCenterXY=function(){var H29=0;var jS7=0;if(this.brush.fill){H29=this.tn+(this.A5j2F-this.tn)/2;jS7=this.to+(this.y_U1N-this.to)/2}else{var pn=Math.ceil(this.pts.length/2)-(this.pts.length%2);if(pn<this.pts.length){H29=this.pts[pn].mapX;jS7=this.pts[pn].mapY}}return{x:H29,y:jS7}};this.getCenterPt=function(){if(this.tn!=Number.MAX_VALUE&&this.maplet){var y60F=this.getCenterXY();var pt=new MPoint(this.maplet.toMapCoordinate(y60F.x,y60F.y));pt.initialize(this.maplet);return pt}else{return null}};this.openInfoWindow=function(lM){if(this.maplet){if(typeof lM!="undefined"&&(lM.target.id==this.id||lM.target==this.mH7)&&this.maplet.edj5){this.maplet.edj5=false;return}if(this.maplet.sS!=ts.ty&&this.maplet.sS!=ts.tu){return}if(this.info&&!this.info.getOverlay()){this.info.setOverlay(this)}if(typeof lM=="undefined"){if(this.info!=null&&this.pts.length>=2){var A04=this.getCenterXY();var H29=A04.x;var jS7=A04.y;if(H29>=this.maplet.width*1.5||H29<=-(this.maplet.width/2)||jS7<=-(this.maplet.height/2)||jS7>=this.maplet.height*1.5){this.maplet.setCenter(new MPoint(this.maplet.toMapCoordinate(H29,jS7)));H29=this.maplet.width/2;jS7=this.maplet.height/2}if(iToolTipStyle==2){this.x=H29;this.y=jS7;MEvent.trigger(this,"click",this)}else{this.maplet.wN(H29,jS7,this.info,"","",true)}}}else{if((lM.target.id==this.id||lM.target==this.mH7)&&!this.maplet.edj5){var x=lM.clientX-this.maplet.offsetX-this.maplet.left-(px?3:1);var y=lM.clientY-this.maplet.offsetY-this.maplet.top-(px?3:1);if(iToolTipStyle==2){this.x=x;this.y=y;MEvent.trigger(this,"click",this)}else{MEvent.trigger(this,"click",this);if(this.info){if(!this.info.getOverlay()){this.info.setOverlay(this)}this.maplet.wN(x,y,this.info,false);avBubble.yas1D=true}}}}}};this.wQ=function(fg){if(this.z9!=null){if(fg){this.z9.style.display="block";this.z9.style.zIndex=10}else{this.z9.style.display="none";this.z9.style.zIndex=0}}};this.uG=function(lM){if(!this.maplet){return}if(this.maplet.sS==ts.tb||this.maplet.sS==ts.ta||this.maplet.sS==ts.lz||this.maplet.sS==ts.ly){return}if(this.traffic){if((this.bEditable||this.maplet.sS==ts.tu)&&!this.qo){if(this.ls){return}var $PM5=this.V93([lM.clientX-this.maplet.offsetX,lM.clientY-this.maplet.offsetY],this.Aa);if(this.zX!=null&&this.maplet&&$PM5!=null||fJ(lM.target,this.z9)){this.wQ(true);var A3u79=[-10,-10];if($PM5!=null&&this.maplet){A3u79=this.M7035($PM5[0],$PM5[1],[lM.clientX-this.maplet.offsetX,lM.clientY-this.maplet.offsetY]);this.$PM5=$PM5;this.z0.style.cursor="pointer"}else{this.z0.style.cursor="default"}this.$S3o=true;clearTimeout(this.fv1);this.fv1=null;var j57=[0,0];switch(this.CA9g){case 1:j57=[0,1];break;case 2:j57=[1,0];break;case 3:j57=[1,1];break;case 4:j57=[0,0];break;default:j57=[0,0];break}this.z9.style.left=(parseInt(A3u79[0])-(px?(5+j57[0]):5))+"px";this.z9.style.top=(parseInt(A3u79[1])-(px?(5+j57[1]):5))+"px"}else{this.z0.style.cursor="default";if(this.z9!=null&&this.z9.style.display=="none"){return}if(this.fv1!=null){return}this.$S3o=false;this.fv1=getTimeout(this,function(){if(this.$S3o){return}if(this.z9!=null&&this.z9.style.display=="none"){return}this.wQ(false);clearTimeout(this.fv1);this.fv1=null},500)}}else{if(this.qo){this.SY643(lM)}}}else{if(this.bEditable||this.maplet.sS==ts.tu){if(this.ls||this.zX!=null&&this.maplet&&fJ(lM.target,px?this.z0:this.Ad)||fJ(lM.target,this.z9)||fJ(lM.target,this.mH7)){if(this.options.editHilite){if(px){this.Ad.opacity=parseInt(this.brush.stroke)==0?0:1}else{this.Ad.setAttribute("stroke-opacity",1)}}this.wQ(true)}else{if(this.options.editHilite){if(px){this.Ad.opacity=parseInt(this.brush.stroke)==0?0:this.brush.transparency/100}else{this.Ad.setAttribute("stroke-opacity",this.brush.transparency/100)}}this.wQ(false)}}}};this.w0=function(lM){if(this.zX!=null&&this.maplet&&(px&&lM.button==1||!px&&lM.button==0)&&(this.bEditable||this.maplet.sS==ts.tu)&&(fJ(lM.target,px?this.z9:this.Ad)||!px&&fJ(lM.target,this.z9))&&lM.target.id.indexOf("node")!=-1){this.qo=true;this.maplet.l6=lM.target.id;this.l0=px?lM.offsetX:lM.layerX;this.na=px?lM.offsetY:lM.layerY;l6M=lM.target;if(this.wk==null){if(px){this.wk=document.createElement("v:polyline");this.wk.unselectable="on";this.wk.id=this.id;this.wk.strokecolor=this.brush.color;this.wk.strokeweight=this.brush.stroke+"px";this.wk.fill=this.brush.fill;this.wk.filled=this.brush.fill;this.wk.style.position="absolute";this.Ac=document.createElement("v:stroke");this.Ac.opacity=parseInt(this.brush.stroke)==0?0:1;this.Ac.joinstyle="round";this.Ac.endcap="round";this.Ac.fill=this.brush.fill;this.Ac.dashstyle="dash";var Ab=document.createElement("v:fill");Ab.opacity=((this.brush.bgtransparency)/100);Ab.color=this.brush.bgcolor;this.wk.appendChild(Ab)}else{this.wk=document.createElementNS("http://www.w3.org/2000/svg","svg");this.wk.setAttribute("version","1.1");this.wk.setAttribute("overflow","visible");this.wk.setAttribute("viewBox","0 0 "+this.maplet.width+" "+this.maplet.height);this.wk.setAttribute("height",this.maplet.height+"px");this.wk.setAttribute("width",this.maplet.width+"px");this.wk.setAttribute("unselectable","on");this.Ac=document.createElementNS("http://www.w3.org/2000/svg","path");this.Ac.setAttribute("MStrName",this.toString());this.Ac.setAttribute("stroke-linejoin","round");this.Ac.setAttribute("stroke-linecap","round");this.Ac.setAttribute("stroke",this.brush.color);this.Ac.setAttribute("stroke-width",this.brush.stroke+"px");this.Ac.setAttribute("stroke-opacity",1);this.Ac.setAttribute("style","stroke-dasharray:10,15");this.Ac.setAttribute("fill-opacity",this.brush.bgtransparency/100);this.Ac.setAttribute("fill",(this.brush.fill)?this.brush.bgcolor:"none");if(this.brush.arrow){this.arrow=document.createElementNS("http://www.w3.org/2000/svg","path");this.arrow.setAttribute("d","M 0 0 L 10 5 L 0 10 L 4 5 z");this.arrow.setAttribute("fill",this.brush.color);this.arrow.setAttribute("fill-opacity",this.brush.bgtransparency/100+0.3);this.zY=document.createElementNS("http://www.w3.org/2000/svg","marker");this.zY.setAttribute("id","arrow"+this.id);this.zY.setAttribute("viewBox","0 0 10 10");this.zY.setAttribute("refX","6");this.zY.setAttribute("refY","5");this.zY.setAttribute("markerUnits","strokeWidth");this.zY.setAttribute("orient","auto");this.zY.appendChild(this.arrow);this.zY.appendChild(this.arrow);this.wk.appendChild(this.zY)}}}this.wk.appendChild(this.Ac);this.zX.appendChild(this.wk)}};this.f9=function(lM){if(l6M!=null&&(this.bEditable||this.maplet.sS==ts.tu)&&l6M.id.indexOf("node")>0&&this.qo){if(l6M!=null){if(avBubble.uX&&avBubble.uX.id==this.id){this.maplet.hideBubble()}var x=lM.clientX-this.maplet.offsetX-this.maplet.left-this.l0;var y=lM.clientY-this.maplet.offsetY-this.maplet.top-this.na;l6M.style.left=(parseInt(x))+"px";l6M.style.top=(parseInt(y))+"px";this.lw=new Date().getTime();this.ls=true;var ps=parseInt(l6M.qf);var Aa=new String(px?"":"M");if(l6M.id.indexOf("_midnode_")>0){Aa+=this.aP[ps-1]+","+this.aR[ps-1];Aa+=(px?",":"L")+(x+5)+","+(y+5);Aa+=(px?",":"L")+this.aP[ps]+","+this.aR[ps]}else{if(ps>0){Aa+=this.aP[ps-1]+","+this.aR[ps-1]+(px?",":"")}Aa+=((ps>0&&!px)?"L":"")+(x+5)+","+(y+5);if(ps<this.aP.length-1){Aa+=(px?",":"L")+this.aP[ps+1]+","+this.aR[ps+1]}}if(this.wk!=null){if(this.wk.points){this.wk.points.value=Aa}else{if(px){this.wk.value=Aa}else{this.Ac.setAttribute("d",Aa)}}}}}};this.l1=function(lM){if(this.zX!=null&&this.maplet&&(this.bEditable||this.maplet.sS==ts.tu)&&this.qo){if(l6M!=null&&this.ls){var x=parseInt(lM.clientX)-parseInt(this.maplet.offsetX)-parseInt(this.maplet.left)-this.l0;var y=parseInt(lM.clientY)-parseInt(this.maplet.offsetY)-parseInt(this.maplet.top)-this.na;var ps=parseInt(l6M.qk);var ud=this.maplet.toMapCoordinate(x+5,y+5);if(l6M.id.indexOf("_midnode_")>0){this.pts.splice(ps,0,new MPoint(ud))}else{this.pts.splice(ps,1,new MPoint(ud))}this.lw=new Date().getTime();this.ls=false;l6M=null;this.update();MEvent.trigger(this,"drag",this);MEvent.trigger(this.maplet,"edit",this)}this.qo=false;if(this.wk.parentNode!=null){_removeNode(this.wk);this.wk=null}}if(this.maplet&&this.maplet.l6==this.id){this.maplet.l6=null}};this.removeNode=function(qf){if(typeof qf!="undefined"){if(qf.toString().indexOf(this.id)>=0&&qf.toString().lastIndexOf("_")>=0){qf=qf.toString().substring(qf.toString().lastIndexOf("_")+1)}qf=parseInt(qf);if(!isNaN(qf)&&qf<this.pts.length){this.pts.splice(qf,1);MEvent.trigger(this,"edit",this);MEvent.trigger(this.maplet,"edit",this);if(this.wk!=null&&this.wk.parentNode!=null){_removeNode(this.wk);this.wk=null}this.update()}}};MEvent.bind(this.un,"select",this,this.removeNode);this._s980=function(j8iH_,EAc,nc,T35){this.J79N$=function($7t2){var c0g=Math.atan2(EAc-$7t2.hN9Y9,j8iH_-$7t2.f0i)-$7t2.M0U;var d279=Math.atan2(T35-$7t2.hN9Y9,nc-$7t2.f0i)-$7t2.M0U;while(c0g<0){c0g+=2*Math.PI}while(d279<0){d279+=2*Math.PI}while(c0g>2*Math.PI){c0g-=2*Math.PI}while(d279>2*Math.PI){d279-=2*Math.PI}return(c0g-Math.PI)*(d279-Math.PI)<0&&(c0g>Math.PI?2*Math.PI-c0g:c0g)+(d279>Math.PI?2*Math.PI-d279:d279)<Math.PI}};this.b03=function(f0i,hN9Y9,M0U){this.f0i=f0i;this.hN9Y9=hN9Y9;this.M0U=M0U};this.Wd9q8=function(Vpf){var v6=null;Vpf=Vpf.toString().split(",");var _7977=parseInt(Vpf[0]);var i1uxG=parseInt(Vpf[1]);var P2Vf=parseInt(Vpf[2]);var dnsx6=parseInt(Vpf[3]);var t5a=Math.abs(_7977-P2Vf);var k_6Wj=Math.abs(i1uxG-dnsx6);var xn210=parseInt(this.brush.stroke);var g4=xn210*k_6Wj/Math.sqrt(Math.pow(t5a,2)+Math.pow(k_6Wj,2));var g5=g4*t5a/k_6Wj;var w71=4;this.CA9g=0;if(_7977==P2Vf){this.CA9g=1;v6=[[_7977-xn210-w71,i1uxG],[_7977+xn210+w71,i1uxG],[P2Vf+xn210+w71,dnsx6],[P2Vf-xn210-w71,dnsx6]]}else{if(i1uxG==dnsx6){this.CA9g=2;v6=[[_7977,i1uxG+xn210+w71],[P2Vf,dnsx6+xn210+w71],[P2Vf,dnsx6-xn210-w71],[_7977,i1uxG-xn210-w71]]}else{if(i1uxG<dnsx6&&_7977<P2Vf){this.CA9g=3;v6=[[parseInt(_7977-g4-w71),parseInt(i1uxG+g5+w71)],[parseInt(P2Vf-g4-w71),parseInt(dnsx6+g5+w71)],[parseInt(P2Vf+g4+w71),parseInt(dnsx6-g5-w71)],[parseInt(_7977+g4+w71),parseInt(i1uxG-g5-w71)]]}else{if(i1uxG>dnsx6&&_7977<P2Vf){this.CA9g=4;v6=[[parseInt(_7977-g4-w71),parseInt(i1uxG-g5-w71)],[parseInt(P2Vf-g4-w71),parseInt(dnsx6-g5-w71)],[parseInt(P2Vf+g4+w71),parseInt(dnsx6+g5+w71)],[parseInt(_7977+g4+w71),parseInt(i1uxG+g5+w71)]]}else{if(i1uxG>dnsx6&&_7977>P2Vf){this.CA9g=3;v6=[[parseInt(_7977-g4-w71),parseInt(i1uxG+g5+w71)],[parseInt(_7977+g4+w71),parseInt(i1uxG-g5-w71)],[parseInt(P2Vf+g4+w71),parseInt(dnsx6-g5-w71)],[parseInt(P2Vf-g4-w71),parseInt(dnsx6+g5+w71)]]}else{if(i1uxG<dnsx6&&_7977>P2Vf){this.CA9g=4;v6=[[parseInt(_7977-g4-w71),parseInt(i1uxG-g5-w71)],[parseInt(_7977+g4+w71),parseInt(i1uxG+g5+w71)],[parseInt(P2Vf+g4+w71),parseInt(dnsx6+g5+w71)],[parseInt(P2Vf-g4-w71),parseInt(dnsx6-g5-w71)]]}}}}}}return v6};this.G$48H=[];this.SSa9w=function(l22,Vpf){var ub=this.Wd9q8(Vpf);for(var i=0;i<ub.length;i++){this.G$48H.push(new this._s980(ub[i][0],ub[i][1],ub[(i+1)%ub.length][0],ub[(i+1)%ub.length][1]))}var w0xy$=new this.b03(l22[0],l22[1],parseFloat("0.523112313123"));var $92o=0;for(var qC=0;qC<this.G$48H.length;qC++){if(this.G$48H[qC].J79N$(w0xy$)){$92o++}}this.G$48H=[];return $92o%2!=0};this.V93=function(coords,qy645){for(var i=0;i<qy645.length-1;i++){if(this.SSa9w(coords,[qy645[i],[qy645[i+1]]])){return[qy645[i],[qy645[i+1]]]}}return null};this.M7035=function(xy1,D0$,GAw0){xy1=xy1.toString().split(",");D0$=D0$.toString().split(",");var GJ4t=[parseInt(D0$[0])-parseInt(xy1[0]),parseInt(D0$[1])-parseInt(xy1[1])];var y0N=[parseInt(GAw0[0])-parseInt(xy1[0]),parseInt(GAw0[1])-parseInt(xy1[1])];var b7y_7=y0N[0]*GJ4t[0]+y0N[1]*GJ4t[1];if(b7y_7<=0){return xy1}var L6g=GJ4t[0]*GJ4t[0]+GJ4t[1]*GJ4t[1];if(L6g<=b7y_7){return D0$}return[parseInt(xy1[0])+GJ4t[0]*b7y_7/L6g,parseInt(xy1[1])+GJ4t[1]*b7y_7/L6g]};this.yw_=function(lM){if(this.zX!=null&&this.maplet&&(px&&lM.button==1||!px&&lM.button==0)&&(this.bEditable||this.maplet.sS==ts.tu)&&fJ(lM.target,this.z9)){this.qo=true;this.maplet.l6=lM.target.id;var uk50h=parseInt(lM.target.style.left)+(px?1:0);var Ol3=parseInt(lM.target.style.top)+(px?1:0);this.l0=(px?lM.offsetX:lM.layerX)+uk50h;this.na=(px?lM.offsetY:lM.layerY)+Ol3;l6M=lM.target}else{this.ls=true}};this.ba990=function(lM){if(this.zX!=null&&this.maplet&&(this.bEditable||this.maplet.sS==ts.tu)&&this.qo){this.qo=false;var x=parseInt(lM.clientX)-parseInt(this.maplet.offsetX)-parseInt(this.maplet.left)-this.l0;var y=parseInt(lM.clientY)-parseInt(this.maplet.offsetY)-parseInt(this.maplet.top)-this.na;if(x>0&&y>0){MEvent.trigger(this,"nodedrag",this,new MMarker(new MPoint(this.maplet.toMapCoordinate(x+5,y+5))),(this.H6n9(this,this.$PM5)).slice(0,2))}this.wQ(false);this.$S3o=false;clearTimeout(this.fv1);this.fv1=null}this.ls=false;if(this.maplet&&this.maplet.l6==this.id){this.maplet.l6=null}};this.H6n9=function(hf7,_79){var v6=[];var pts=hf7.pts;for(var i=0;i<pts.length;i++){if(pts[i].mapX+","+pts[i].mapY==_79[0].toString()||pts[i].mapX+","+pts[i].mapY==_79[1].toString()){v6.push(i)}}return v6};this.SY643=function(lM){if(l6M!=null&&(this.bEditable||this.maplet.sS==ts.tu)&&this.qo){if(l6M!=null){var x=lM.clientX-this.maplet.offsetX-this.maplet.left-this.l0;var y=lM.clientY-this.maplet.offsetY-this.maplet.top-this.na;this.z9.style.left=(parseInt(x))+"px";this.z9.style.top=(parseInt(y))+"px";MEvent.trigger(this,"nodedrag_move",this,new MMarker(new MPoint(this.maplet.toMapCoordinate(x+5,y+5))),(this.H6n9(this,this.$PM5)).slice(0,2));this.lw=new Date().getTime();this.ls=true;with($765_){Sql.x=x;Sql.y=y;if(!yN){a045.x=x;a045.y=y;M1iH.x=x;M1iH.y=y;yN=nB(this,D402V,LPN_HOVERING_TIME)}}}}};var D402V=function(){with($765_){if(!this.qo&&yN){clearInterval(yN);yN=null;return}if(a045.x==Sql.x&&a045.y==Sql.y&&(Sql.x!=M1iH.x||Sql.y!=M1iH.y)){M1iH.x=Sql.x;M1iH.y=Sql.y;MEvent.trigger(this,"drag_hovering",this,new MMarker(new MPoint(this.maplet.toMapCoordinate(Sql.x+5,Sql.y+5))),(this.H6n9(this,this.$PM5)).slice(0,2))}else{a045.x=Sql.x;a045.y=Sql.y}}};this.appendPoint=function(R70,E49lP){if(typeof R70!="object"||!(R70 instanceof MPoint)||!R70){throw new Error("para new_pt is not a valid MPoint object.")}this.pts.push(R70);if(!this.pts[this.pts.length-1].maplet){this.pts[this.pts.length-1].initialize(this.maplet)}if(typeof E49lP!="boolean"){E49lP=true}if(E49lP){this.update()}}};var MEllipse=function(b,d,e,a,c){this.id=new Date().getTime()+""+parseInt(Math.random()*10000)+"Ellipse";this.gC=b;this.L34=typeof d!="undefined"&&!isNaN(d)?parseInt(d):300;this.OO3=typeof e!="undefined"&&!isNaN(e)?parseInt(e):null;this.brush=(typeof a=="undefined")?new MBrush():a;this.info=(typeof c=="undefined")?null:c;this.ao=new Array();this.zX=null;this.d6PN7=null;this.Xh5Lr=true;this.data={qx:0,qz:0,y144d:0,SE6KN:0,L34:0,OO3:0};this.Xw6=false;this.Y7V=false;this.initialize=function(f){this.maplet=f;if(this.info){this.ao.click=MEvent.bindDom(this.maplet.map,"click",this,this.openInfoWindow)}this.paint()};this.toString=function(){return"com.mapbar.maplet.MEllipse"};this.paint=function(){if(!this.d6PN7){this.zX=this.maplet.a8xh5();if(px){this.d6PN7=document.createElement("v:oval");this.d6PN7.strokecolor=this.brush.color;this.d6PN7.strokeweight=this.brush.stroke+"px";this.d6PN7.filled=this.brush.fill;var g=document.createElement("v:stroke");g.opacity=(this.brush.transparency/100);var f=document.createElement("v:fill");f.opacity=((this.brush.bgtransparency)/100);f.color=this.brush.bgcolor;this.d6PN7.appendChild(g);this.d6PN7.appendChild(f);this.zX.appendChild(this.d6PN7)}else{this.d6PN7=document.createElementNS("http://www.w3.org/2000/svg","ellipse");this.d6PN7.setAttribute("stroke",this.brush.color);this.d6PN7.setAttribute("fill",this.brush.bgcolor);this.d6PN7.setAttribute("stroke-width",this.brush.stroke);this.d6PN7.setAttribute("stroke-opacity",this.brush.transparency/100);this.d6PN7.setAttribute("fill-opacity",this.brush.bgtransparency/100);this.zX.firstChild.appendChild(this.d6PN7)}this.d6PN7.id=this.id;this.d6PN7.style.position="absolute";this.d6PN7.unselectable="on";this.d6PN7.setAttribute(cV7,"true");this.d6PN7.setAttribute(R06w8,"true");this.ao.ellipse_mouseover=MEvent.bindDom(this.d6PN7,"mouseover",this,function(){if(this.maplet.sS==ts.tz||this.maplet.sS==ts.tA||this.maplet.sS==ts.$9f){this.maplet.d7q("crosshair",this.d6PN7)}else{if(this.info||MEvent.contains(this,"click")){this.maplet.d7q("pointer",this.d6PN7)}else{this.maplet.d7q("default",this.d6PN7)}}});this.ao.ellipse_mouseout=MEvent.bindDom(this.d6PN7,"mouseout",this,function(){if(this.maplet.sS!=ts.tz&&this.maplet.sS!=ts.tA&&this.maplet.sS!=ts.$9f){this.maplet.d7q("default",this.d6PN7)}});this.ao.ellipse_mousedown=MEvent.bindDom(this.d6PN7,"mousedown",this,function(){this.Xw6=true;this.Y7V=false;if(this.maplet.sS!=ts.tz&&this.maplet.sS!=ts.tA&&this.maplet.sS!=ts.$9f){this.maplet.d7q("move",this.d6PN7)}});this.ao.ellipse_mouseup=MEvent.bindDom(this.d6PN7,"mouseup",this,function(h){this.Xw6=false;this.ao.ellipse_mouseover(h)});this.ao.ellipse_mousemove=MEvent.bindDom(this.d6PN7,"mousemove",this,function(){if(this.Xw6&&!this.Y7V){this.Y7V=true}})}this.update()};this.update=function(){if(this.d6PN7){if(!this.gC.maplet){this.gC.initialize(this.maplet)}if(this.maplet.N31){if(this.maplet.Y$_8!=this.gC.Y$_8){this.gC.mapX+=this.maplet.ClPI;this.gC.mapY+=this.maplet.c970q;this.gC.Y$_8=this.maplet.Y$_8}}else{this.gC.r05e$()}var i=this.gC.mapX;var g=this.gC.mapY;var h=parseInt(this.L34/111111/this.maplet.xg*this.maplet.imgWidth/0.8);var f=h;if(this.OO3){f=parseInt(this.OO3/111111/this.maplet.xf*this.maplet.imgHeight)}this.data.qx=i-h;this.data.qz=g-f;this.data.y144d=i+h;this.data.SE6KN=g+f;this.data.L34=h;this.data.OO3=f;if(px){this.d6PN7.style.left=this.data.qx+"px";this.d6PN7.style.top=this.data.qz+"px";this.d6PN7.style.width=h*2+"px";this.d6PN7.style.height=f*2+"px"}else{this.d6PN7.setAttribute("cx",i+"px");this.d6PN7.setAttribute("cy",g+"px");this.d6PN7.setAttribute("rx",h+"px");this.d6PN7.setAttribute("ry",f+"px")}}};this.finalize=function(){this.remove(true)};this.remove=function(g){for(var f in this.ao){if(f.substring(0,8)=="ellipse_"){if(this.d6PN7){MEvent.removeBuiltInListener(this.d6PN7,f.substring(8),this.ao[f])}}else{if(this.maplet){MEvent.removeBuiltInListener(this.maplet.map,f,this.ao[f])}}this.ao[f]=null;delete this.ao[f]}if(typeof this.d6PN7=="object"&&this.d6PN7&&this.d6PN7.parentNode){_removeNode(this.d6PN7);this.d6PN7=null}this.zX=null;if(this.maplet){if(this.maplet.u5[this.id]){this.maplet.u5[this.id]=null;delete this.maplet.u5[this.id]}}if(g){this.ao=null;this.maplet=null}};this.openInfoWindow=function(h){if(this.maplet!=null){if(this.Y7V){if(h.target.id==this.id&&this.maplet.edj5){this.maplet.edj5=false}return}if(!this.info||(this.maplet.sS!=ts.ty&&this.maplet.sS!=ts.tu)){return}var f=this.gC.mapX;var i=this.gC.mapY;if(!this.info.getOverlay()){this.info.setOverlay(this)}var g=true;if(typeof h=="undefined"){}else{if(h.target.id==this.id&&!this.maplet.edj5){MEvent.trigger(this,"click",this);f=h.clientX-this.maplet.offsetX-this.maplet.left-(px?3:1);i=h.clientY-this.maplet.offsetY-this.maplet.top-(px?3:1)}else{if(h.target.id==this.id&&this.maplet.edj5){this.maplet.edj5=false;g=false}else{g=false}}}if(g){this.maplet.wN(f,i,this.info)}}}};var MRoundRect=function(e,c,a,b,d){this.id=new Date().getTime()+""+parseInt(Math.random()*10000)+"RRect";this.Mrq52=e;this.APVp0=c;this.arcsize=typeof a=="number"?a:0.1;this.width=0;this.height=0;this.brush=(typeof b=="undefined")?new MBrush():b;this.info=(typeof d=="undefined")?null:d;this.ao=new Array();this.zX=null;this.rect=null;this.Xh5Lr=true;this.Xw6=false;this.Y7V=false;this.initialize=function(f){this.maplet=f;if(this.info){this.ao.click=MEvent.bindDom(this.maplet.map,"click",this,this.openInfoWindow)}this.paint()};this.toString=function(){return"com.mapbar.maplet.MRoundRect"};this.paint=function(){if(!this.rect){this.zX=this.maplet.a8xh5();if(px){this.rect=document.createElement("v:roundrect");this.rect.strokecolor=this.brush.color;this.rect.strokeweight=this.brush.stroke+"px";this.rect.filled=this.brush.fill;this.rect.arcsize=this.arcsize;var g=document.createElement("v:stroke");g.opacity=(this.brush.transparency/100);var f=document.createElement("v:fill");f.opacity=((this.brush.bgtransparency)/100);f.color=this.brush.bgcolor;this.rect.appendChild(g);this.rect.appendChild(f);this.zX.appendChild(this.rect)}else{this.rect=document.createElementNS("http://www.w3.org/2000/svg","rect");this.rect.setAttribute("stroke",this.brush.color);this.rect.setAttribute("fill",this.brush.bgcolor);this.rect.setAttribute("stroke-width",this.brush.stroke);this.rect.setAttribute("stroke-opacity",this.brush.transparency/100);this.rect.setAttribute("fill-opacity",this.brush.bgtransparency/100);this.zX.firstChild.appendChild(this.rect)}this.rect.id=this.id;this.rect.style.position="absolute";this.rect.unselectable="on";this.rect.setAttribute(cV7,"true");this.ao.rect_mouseover=MEvent.bindDom(this.rect,"mouseover",this,function(){if(this.maplet.sS==ts.tz||this.maplet.sS==ts.tA||this.maplet.sS==ts.$9f){this.maplet.d7q("crosshair",this.rect)}else{if(this.info||MEvent.contains(this,"click")){this.maplet.d7q("pointer",this.rect)}else{this.maplet.d7q("default",this.rect)}}});this.ao.rect_mouseout=MEvent.bindDom(this.rect,"mouseout",this,function(){if(this.maplet.sS!=ts.tz&&this.maplet.sS!=ts.tA&&this.maplet.sS!=ts.$9f){this.maplet.d7q("default",this.rect)}});this.ao.rect_mousedown=MEvent.bindDom(this.rect,"mousedown",this,function(){this.Xw6=true;this.Y7V=false;if(this.maplet.sS!=ts.tz&&this.maplet.sS!=ts.tA&&this.maplet.sS!=ts.$9f){this.maplet.d7q("move",this.rect)}});this.ao.rect_mouseup=MEvent.bindDom(this.rect,"mouseup",this,function(h){this.Xw6=false;this.ao.rect_mouseover(h)});this.ao.rect_mousemove=MEvent.bindDom(this.rect,"mousemove",this,function(){if(this.Xw6&&!this.Y7V){this.Y7V=true}})}this.update()};this.update=function(){if(this.rect){if(!this.Mrq52.maplet){this.Mrq52.initialize(this.maplet)}if(!this.APVp0.maplet){this.APVp0.initialize(this.maplet)}if(this.maplet.N31){if(this.maplet.Y$_8!=this.Mrq52.Y$_8){this.Mrq52.mapX+=this.maplet.ClPI;this.Mrq52.mapY+=this.maplet.c970q;this.Mrq52.Y$_8=this.maplet.Y$_8}if(this.maplet.Y$_8!=this.APVp0.Y$_8){this.APVp0.mapX+=this.maplet.ClPI;this.APVp0.mapY+=this.maplet.c970q;this.APVp0.Y$_8=this.maplet.Y$_8}}else{this.Mrq52.r05e$();this.APVp0.r05e$()}var f=this.Mrq52.mapX;var g=this.Mrq52.mapY;this.width=Math.abs(this.APVp0.mapX-f);this.height=Math.abs(this.APVp0.mapY-g);if(px){this.rect.style.left=f+"px";this.rect.style.top=g+"px";this.rect.style.width=this.width+"px";this.rect.style.height=this.height+"px"}else{this.rect.setAttribute("x",f+"px");this.rect.setAttribute("y",g+"px");this.rect.setAttribute("width",this.width+"px");this.rect.setAttribute("height",this.height+"px");this.rect.setAttribute("rx",this.width*this.arcsize);this.rect.setAttribute("ry",this.height*this.arcsize)}}};this.finalize=function(){this.remove(true)};this.remove=function(g){for(var f in this.ao){if(f.substring(0,5)=="rect_"){if(this.rect){MEvent.removeBuiltInListener(this.rect,f.substring(5),this.ao[f])}}else{if(this.maplet){MEvent.removeBuiltInListener(this.maplet.map,f,this.ao[f])}}this.ao[f]=null;delete this.ao[f]}if(typeof this.rect=="object"&&this.rect&&this.rect.parentNode){_removeNode(this.rect);this.rect=null}this.zX=null;if(this.maplet){if(this.maplet.u5[this.id]){this.maplet.u5[this.id]=null;delete this.maplet.u5[this.id]}}if(g){this.ao=null;this.maplet=null}};this.openInfoWindow=function(h){if(this.maplet!=null){if(this.Y7V){if(h.target.id==this.id&&this.maplet.edj5){this.maplet.edj5=false}return}if(!this.info||(this.maplet.sS!=ts.ty&&this.maplet.sS!=ts.tu)){return}var f=0;var i=0;if(!this.info.getOverlay()){this.info.setOverlay(this)}var g=true;if(typeof h=="undefined"){f=this.Mrq52.mapX+this.width/2;i=this.Mrq52.mapY+this.height/2}else{if(h.target.id==this.id&&!this.maplet.edj5){MEvent.trigger(this,"click",this);f=h.clientX-this.maplet.offsetX-this.maplet.left-(px?3:1);i=h.clientY-this.maplet.offsetY-this.maplet.top-(px?3:1)}else{if(h.target.id==this.id&&this.maplet.edj5){this.maplet.edj5=false;g=false}else{g=false}}}if(g){this.maplet.wN(f,i,this.info)}}};this.getCenterXY=function(){var g=this.Mrq52.mapX+this.width/2;var f=this.Mrq52.mapY+this.height/2;return{x:g,y:f}}};var MLabel=function(c,e,f,b,a){this.label=c;if(typeof e=="object"&&e){a=e}if(typeof a!="object"||!a){a={}}if(typeof e=="object"&&e){if("number,string".indexOf(typeof a.xoffset)==-1){a.xoffset=undefined}if("number,string".indexOf(typeof a.yoffset)==-1){a.yoffset=undefined}if("number,string".indexOf(typeof a.opacity)==-1){a.opacity=undefined}}else{a.xoffset=e;a.yoffset=f;a.opacity=b}if(typeof a.enableStyle!="boolean"){a.enableStyle=true}if(typeof a.visible!="boolean"){a.visible=true}var d=false;this.visible=a.visible;this.xoffset=(typeof a.xoffset=="undefined")?null:parseInt(a.xoffset);this.yoffset=(typeof a.yoffset=="undefined")?null:parseInt(a.yoffset);this.opacity=typeof a.opacity!="undefined";this.div=document.createElement("div");if(a.enableStyle){this.div.className="tiplabel"}this.div.style.left="-1000px";this.div.style.top="-1000px";this.div.unselectable="on";this.div.style.zIndex=10;this.div.style.position="absolute";if(px&&typeof a.opacity!="undefined"){this.div.style.filter="alpha( opacity = "+parseInt(a.opacity)+" )"}else{if(!px&&typeof a.opacity!="undefined"){this.div.style.MozOpacity=parseInt(a.opacity)/100}}this.sW=null;this.wz=function(g){this.div.id="mk_label_"+g};this.setContextMenu=function(g){this.contextmenu=g;if(this.div){this.div.contextmenu=g}};this.initialize=function(g){this.sW=g;this.setContextMenu(g.contextmenu)};this.update=function(g,i,h){if(this.div.parentNode!=g.lA.div&&!this.sW.ls){this.div.innerHTML=this.label;g.lA.appendChild(this.div)}if(this.xoffset==null){this.xoffset=this.sW.icon.width}if(this.yoffset==null){this.yoffset=this.sW.icon.height/2-this.div.offsetHeight/2}if(!d){this.div.style.display=this.visible?"":"none";d=true}this.div.style.left=(parseInt(i)+this.xoffset)+"px";this.div.style.top=(parseInt(h)+this.yoffset)+"px"};this.finalize=function(){this.remove(true)};this.remove=function(g){if(typeof g!="boolean"){g=false}if(this.div){if(!g){if(this.div.parentNode){this.div.parentNode.removeChild(this.div)}}else{_removeNode(this.div);this.div=null}}if(g){this.sW=null}};this.toString=function(){return"com.mapbar.maplet.MLabel"};this.$b1=this.div.style.zIndex;this.setZIndex=function(g){if(this.div&&this.div.parentNode&&g!=this.div.style.zIndex){this.$b1=this.div.style.zIndex;this.div.style.zIndex=g}};this.kP$D=function(){if(!this.div){return}if(this.$b1!=this.div.style.zIndex){this.setZIndex(this.$b1)}};this.setVisible=function(g){if(g!=(this.div.style.display=="none"?false:true)){this.div.style.display=g?"":"none";this.visible=g}};this.resetLabel=function(g){if(typeof g!="object"||!g){return}var i=parseInt(this.div.style.left);var h=parseInt(this.div.style.top);if(typeof g.content=="string"){this.label=g.content;this.div.innerHTML=this.label}if(typeof g.enableStyle=="boolean"){this.div.className=g.enableStyle?"tiplabel":""}if("number,string".indexOf(typeof g.xoffset)!=-1){this.xoffset=parseInt(g.xoffset)}else{if(typeof g.xoffset=="object"&&g.xoffset==null){this.xoffset=null}}if("number,string".indexOf(typeof g.yoffset)!=-1){this.yoffset=parseInt(g.yoffset)}else{if(typeof g.yoffset=="object"&&g.yoffset==null){this.yoffset=null}}if("number,string".indexOf(typeof g.opacity)!=-1){if(px&&typeof g.opacity!="undefined"){this.div.style.filter="alpha( opacity = "+parseInt(g.opacity)+" )"}else{if(!px&&typeof g.opacity!="undefined"){this.div.style.MozOpacity=parseInt(g.opacity)/100}}}this.update(this.sW.maplet,this.sW.icon.left,this.sW.icon.top)};this.getText=function(){var g="";if(this.label.indexOf(Maplet.MLABEL_TEXT_FLAG)!=-1){var h=new RegExp(Maplet.MLABEL_TEXT_FLAG+'="?([^"\t ]*)',"gi");var i=h.exec(this.label);if(i!=null){g=i[1]}}else{if(this.label!=""){g=rtg5S(this.label)}else{g=this.label}}return g}};var MInfoWindow=function(b,a,g,f,d){this.title=b;this.wyq=d;this.content=Ge412(a,true);this.yd=(typeof g!="undefined"&&"mouseover"==g.toLowerCase())?"mouseover":"click";this.S06i={v3y:false,width:0,height:0};this.doWhenClosed=null;this.SetOnClosed=function(h){this.doWhenClosed=h};this.gv=function(i,j){MEvent.trigger(this.getOverlay(),"iw_beforeopen",this.getOverlay(),i,j);if(this.getOverlay().maplet.customInfoWindow){return null}avBubble.uX=this.getOverlay();var h=gp(this.title,i,j,this.content,this.doWhenClosed);this.setTabs(e);return h};var c=null;this.setOverlay=function(h){c=h};this.getOverlay=function(){return c};this.toString=function(){return"com.mapbar.maplet.MInfoWindow"};this.setTitle=function(h,j,i){this.title=h;if(ContentInfo){ContentInfo.setTitle(h);this.S06i.v3y=false;if(typeof j!="boolean"){j=true}if(typeof i!="boolean"){i=false}if(j){L92(i)}}};this.setContent=function(j,i,h){this.content=Ge412(j,true);if(ContentInfo){ContentInfo.setContent(j);this.S06i.v3y=false;if(typeof i!="boolean"){i=true}if(typeof h!="boolean"){h=true}if(i){L92(h)}}};this.zoomTo=function(k,i,j){if(k=="zoomin"){this.zoomIn(i,j)}else{if(k=="zoomout"){this.zoomOut(i,j)}}};this.zoomOut=function(i,j){if(ContentInfo&&typeof ContentInfo.onZoomOut=="function"){ContentInfo.onZoomOut(i,j)}};this.zoomIn=function(i,j){if(ContentInfo&&typeof ContentInfo.onZoomIn=="function"){ContentInfo.onZoomIn(i,j)}};this.getBodySize=function(){var h={width:0,height:0};if(ContentInfo){return ContentInfo.A656G()}return h};this.setZMBtnVisible=function(h){if(ContentInfo){ContentInfo.setZMBtnVisible(h)}else{avBubble.a0DRT=h}};this.getZMBtnVisible=function(){return ContentInfo&&ContentInfo._1E()};var e=[];this.setTabs=function(h){if(GYAjR(h)){e=h}if(ContentInfo&&ContentInfo.isVisible()&&(c&&avBubble.uX.id==c.id)&&e.length>0){for(var j=0;j<h.length;j++){ContentInfo.e070(h[j].Su5())}this.S06i.v3y=false;L92()}};this.getTabs=function(){return e};this.clearTabs=function(){e=[];if(ContentInfo&&ContentInfo.isVisible()){ContentInfo._65B9();if(c&&avBubble.uX.id==c.id){this.S06i.v3y=false;L92()}}};this.setCurrentTab=function(h){if(ContentInfo){ContentInfo.setCurrentTab(h)}};this.getCurrentTab=function(){if(ContentInfo&&ContentInfo.tabIndex!=-1){return ContentInfo.W8l8[ContentInfo.tabIndex]}else{return null}}};var ContentInfo=null;var gp=function(title,left,top,f5,closeFn){hideBubble(maplet);avBubble.calcLatLon();if(ContentInfo==null){ContentInfo=new b5l(maplet);ContentInfo.initialize();ContentInfo.closeFn=closeFn?closeFn:null;ContentInfo.onClosed=function(){avBubble.UY2i=false;avBubble.K3S0=false;avBubble.gYy2S=false;maplet.viewOverlay(avBubble.uX,50,50)};ContentInfo.onZoomOut=function(w,h){MEvent.trigger(avBubble.uX,"bubble_zoomout",avBubble.uX);var size={width:avBubble.width,height:avBubble.height};if(avBubble.uX.info&&avBubble.uX.info.S06i.width>0){size=avBubble.uX.info.S06i}if(w){if(w<avBubble.minWidth){w=avBubble.minWidth}size.width=w}if(h){if(h<avBubble.minHeight){h=avBubble.minHeight}size.height=h}ContentInfo.width=size.width;ContentInfo.height=size.height;ContentInfo.Vfi_U("zoomin");avBubble.$$P=true;var B5$=maplet.viewOverlay(avBubble.uX,50,50);if(B5$.cy813==0&&B5$.cx0==0){maplet.refresh()}avBubble.gYy2S=false;avBubble.oCR_2="out"};ContentInfo.onZoomIn=function(w,h){var uX=avBubble.uX;MEvent.trigger(uX,"bubble_zoomin",avBubble.uX);w=cm5UC(w,null);h=cm5UC(h,null);var c7=maplet._70();if(w&&w<c7.width){c7.width=w}if(h&&h<c7.height){c7.height=h}var i49n=0;var qk7=0;if(typeof uX=="object"&&uX){if(uX.toString().indexOf("MMarker")!=-1){if(uX.icon){i49n=uX.icon.height;qk7=uX.icon.width;c7.height-=i49n;c7.width-=qk7}}else{i49n=50;c7.height-=i49n}}var y60F=maplet.toScreenCoordinate(avBubble.ax729);var y97=ContentInfo.Sv32(y60F[0],y60F[1],c7.width,c7.height,"top",true,true,uX);avBubble.aw4=y97.RWw6;avBubble.left=y97.P68cW;avBubble.top=y97.$4fJu;avBubble.$$P=true;ContentInfo.show(y97,null);ContentInfo.Vfi_U("zoomout");var qx=y97.P68cW;var qz=y97.$4fJu;var y144d=qx+y97.width;var SE6KN=qz+y97.height;with(y97.arrow){if(dir=="left"){qx=qx-qk7-y97.arrow.width}else{if(dir=="right"){y144d=y144d+qk7+y97.arrow.width}else{if(dir=="top"){qz=qz-i49n-y97.arrow.height}else{if(dir=="bottom"){SE6KN=SE6KN+i49n+y97.arrow.height}}}}}maplet.H324({qUr:qx,m42:qz,s08:y144d,K80K:SE6KN,c99:10,wQ613:10},{a0_54:true,s208:true,$24B4:false});avBubble.gYy2S=true;avBubble.oCR_2="in"}}else{}avBubble.UY2i=false;avBubble.K3S0=false;ContentInfo._65B9();var size={width:0,height:0};if(avBubble.uX.info.S06i.v3y){size.width=avBubble.uX.info.S06i.width;size.height=avBubble.uX.info.S06i.height;ContentInfo.setTitle(title);ContentInfo.setContent(f5)}else{size=ContentInfo.Yp$4(title,f5);if(size.width==0){size={width:avBubble.width,height:avBubble.height}}else{if(size.width<avBubble.minWidth){size.width=avBubble.minWidth}if(size.height<avBubble.minHeight){size.height=avBubble.minHeight}var T2364=maplet._70();if(size.width>T2364.width){size.width=T2364.width}if(size.height>T2364.height){size.height=T2364.height}}avBubble.uX.info.S06i.width=size.width;avBubble.uX.info.S06i.height=size.height;avBubble.uX.info.S06i.v3y=true}var y97=ContentInfo.Sv32(left,top,size.width,size.height,avBubble.tipInitPlace,avBubble.UY2i,avBubble.K3S0,avBubble.uX);avBubble.aw4=y97.RWw6;avBubble.left=y97.P68cW;avBubble.top=y97.$4fJu;avBubble.head=title;avBubble.body=f5;ContentInfo.show(y97,avBubble.a0DRT,true);if(maplet.fa){ContentInfo.setVisible(false);avBubble.I8n6=true}var qk7=0;var i49n=0;if(y97.K88){avBubble.ax729=avBubble.uX.pt.pid;if(avBubble.uX.icon){qk7=avBubble.uX.icon.width;i49n=avBubble.uX.icon.height}}else{avBubble.ax729=maplet.toMapCoordinate(left,top)}if(avBubble.a0DRT!=null){avBubble.a0DRT=null}var qx=y97.P68cW;var qz=y97.$4fJu;var y144d=qx+y97.width;var SE6KN=qz+y97.height;with(y97.arrow){if(dir=="left"){qx=qx-qk7-y97.arrow.width}else{if(dir=="right"){y144d=y144d+qk7+y97.arrow.width}else{if(dir=="top"){qz=qz-i49n-y97.arrow.height}else{if(dir=="bottom"){SE6KN=SE6KN+i49n+y97.arrow.height}}}}}maplet.H324({qUr:qx,m42:qz,s08:y144d,K80K:SE6KN,c99:10,wQ613:10});MEvent.trigger(avBubble.uX,"iw_afteropen",avBubble.uX);return ContentInfo.dom};function L92(W65){if(!ContentInfo||!ContentInfo.isVisible()){return}if(typeof W65!="boolean"){W65=false}var y60F=maplet.toScreenCoordinate(avBubble.ax729);var r=ContentInfo.getRect(false,false);if(W65){var size=ContentInfo.Yp$4(avBubble.uX.info.title,avBubble.uX.info.content);if(size.width==0){size={width:r.width,height:r.height}}else{if(size.width<avBubble.minWidth){size.width=avBubble.minWidth}if(size.height<avBubble.minHeight){size.height=avBubble.minHeight}var T2364=maplet._70();if(size.width>T2364.width){size.width=T2364.width}if(size.height>T2364.height){size.height=T2364.height}}avBubble.uX.info.S06i.width=size.width;avBubble.uX.info.S06i.height=size.height;r.width=size.width;r.height=size.height}var y97=ContentInfo.Sv32(y60F[0],y60F[1],r.width,r.height,avBubble.aw4,avBubble.UY2i,avBubble.K3S0,avBubble.uX);ContentInfo.show(y97,avBubble.a0DRT,true);r=ContentInfo.getRect();if(!avBubble.gYy2S){avBubble.uX.info.S06i.width=r.width;avBubble.uX.info.S06i.height=r.height}var qk7=0;var i49n=0;if(y97.K88&&avBubble.uX.icon){qk7=avBubble.uX.icon.width;i49n=avBubble.uX.icon.height}var qx=r.min.x;var qz=r.min.y;var y144d=r.max.x;var SE6KN=r.max.y;with(y97.arrow){if(dir=="left"){qx=qx-qk7}else{if(dir=="right"){y144d=y144d+qk7}else{if(dir=="top"){qz=qz-i49n}else{if(dir=="bottom"){SE6KN=SE6KN+i49n}}}}}maplet.fa=false;maplet.H324({qUr:qx,m42:qz,s08:y144d,K80K:SE6KN,c99:10,wQ613:10})}function hideBubble(a){if(!ContentInfo){return}if(ContentInfo.isVisible()){ContentInfo.setVisible(false);MEvent.trigger(a,"iw_hide")}if(typeof a!="undefined"&&a.fp!=null){a.fp=null;a.refresh()}else{if(document["mapbar-maplet"]!="undefined"&&document["mapbar-maplet"].fp!=null){document["mapbar-maplet"].fp=null;document["mapbar-maplet"].refresh()}}ContentInfo.Vfi_U("zoomin")}var L8b$=function(){this.xR="";this.a0DRT=false;this.left=0;this.top=0;this.head=new String();this.body=new String();this.width=260;this.height=240;this.uX=null;this.arrow_tip_xoffset=27;this.arrow_tip_yoffset=3;this.xoffset=0;this.ax729="";this.tipInitPlace="top";this.aw4="auto";this.UY2i=false;this.K3S0=false;this.v77=true;this.I8n6=false;this.rE75="";this.SMbF="";this.$$P=false;this.oCR_2="";this.minWidth=100;this.minHeight=60;this.f2343=true;this.gYy2S=false;this.oP026=function(a){this.head=a};this.vK91=function(a){this.body=a};this.gl=function(){};this.calcLatLon=function(){this.xR=maplet.toMapCoordinate(this.left,this.top)};this.syncContentInfoPosition=function(){if(ContentInfo){this.left=ContentInfo.q3;this.top=ContentInfo.zt}};this.yhb59=function(){if(ContentInfo){if(!px){ContentInfo.LG8O9(false)}if(this.ax729&&(this.I8n6||ContentInfo.isVisible())){if(this.I8n6){this.I8n6=false}if(this.v77){var b=maplet.toScreenCoordinate(this.ax729);avBubble.UY2i=true;var a=ContentInfo.Sv32(b[0],b[1],ContentInfo.width,ContentInfo.height,avBubble.aw4,avBubble.UY2i,this.K3S0,avBubble.uX,false,false);this.aw4=a.RWw6;ContentInfo.show(a,null,this.$$P);if(this.$$P){this.$$P=false}if(this.oCR_2!=""&&this.uX){MEvent.trigger(this.uX,"bubble_zoomend",this.oCR_2=="in"?"out":"in");if(this.uX.info){MEvent.trigger(maplet,"iw_zoomend",this.uX.info,this.oCR_2=="in"?"zoomin":"zoomout")}if(this.oCR_2=="in"){this.UY2i=true;this.K3S0=true}else{this.UY2i=false;this.K3S0=false}this.oCR_2=""}}else{this.v77=true}}}}};var avBubble=new L8b$();var MInfoWindowTab=function(b,f,a){var e=b;var d=f;var c=null;var h=0;var g=true;this.KGY=typeof a!="boolean"?false:a;this.$I51=-1;this.qKB0=[];this.setVisible=function(i){g=i};this.$h9l=function(){return g};this.$Y1R0=function(i){h=i};this.getIndex=function(){return h};this.setLabel=function(i){e=i};this.getLabel=function(){return e};this.setContent=function(i){d=i};this.getContent=function(){return d};this.toString=function(){return"com.mapbar.maplet.MInfoWindowTab"};this.LBct=function(i){c=i};this.$5$E=function(){return c};this.Su5=function(){return new MInfoWindowTab(this.getLabel(),this.getContent(),this.KGY)};this.G4787=function(){c=null;g=false;$I51=-1}};MInfoWindowTab.j52K5=function(a){return typeof a=="object"&&a&&typeof a.toString=="function"&&a.toString().indexOf("MInfoWindowTab")!=-1};var b5l=function(b){var a=b;this.x=0;this.y=0;this.closeFn=null;this.width=0;this.height=0;this.content="";this.dom=null;this.RT1=null;this.J_G=null;this.QY085=null;this.WXm=null;this.n73=null;this.xswo=null;this.H831f=null;this.uW4LQ=null;this.c173S=null;this.xud=[];this.d9O7b=null;this.IPm75=null;this.jt54t="";this.W8l8=[];this.tabIndex=-1;this.G65G7=0;this.s7U_=0;this.ONG8H=0;this.iUe=0;this.ghJ=0;this.v3RL=null;this.onZoomOut=null;this.onZoomIn=null;this.onClosed=null;this.A$Ol=null;this._f3Ik=null;this.Th48=null;this.H53={type:"zoomin",q9:null};this.initialize=function(){this.dom=document.createElement("TABLE");this.dom.cellSpacing=0;this.dom.cellPadding=0;this.dom.border=0;this.dom.style.cssText=this.y26("TIP_TABLE");this.dom.setAttribute(j25$O,true);var f=this.dom.insertRow(-1);var e=f.insertCell(-1);e.vAlign="top";e.style.cssText=this.y26("TITLE_CONTAINER_TD");this.RT1=this._U0();e.appendChild(this.RT1);e=this.dom.insertRow(-1).insertCell(-1);e.style.cssText=this.y26("TAB_TD");this.n73=this.V87();this.n73.style.cssText=this.y26("TAB_CONTAINER");e.appendChild(this.n73);this.n73.style.display="none";f=this.dom.insertRow(-1);e=f.insertCell(-1);e.vAlign="top";e.style.cssText=this.y26("CONTENT_TD");this.c173S=this._7_$5();e.appendChild(this.c173S);this.J269();var c=a?a.sF:document.body;c.appendChild(this.dom);c.appendChild(this.M88o());for(var d=0;d<this.xud.length;d++){c.appendChild(this.xud[d])}c.appendChild(this.T032())};this.T032=function(){this.IPm75=document.createElement("DIV");this.IPm75.style.cssText=this.y26("TIP_BORDER");return this.IPm75};this.M88o=function(){this.d9O7b=document.createElement("DIV");this.d9O7b.style.cssText=this.y26("ARROW_DIV");return this.d9O7b};this._7_$5=function(){var c=document.createElement("DIV");c.style.cssText=this.y26("CONTENT_DIV");return c};this.J269=function(){if(this.dom){var d=this.y26("SHADOW_AMOUNT");for(var c=0;c<d;c++){var e=document.createElement("DIV");e.id="_iw_shadow_"+c;e.style.cssText=this.y26("SHADOW_DIV");e.setAttribute(cV7,"true");if(window.attachEvent){e.style.filter="alpha(opacity="+(this.y26("SHADOW_OPACITY")[c]*100)+");"}else{e.style.opacity=this.y26("SHADOW_OPACITY")[c]}e.style.zIndex=this.y26("TIP_DEFAULT_INFO").zIndex-(c+1);e.onmousedown=function(){return false};this.xud.push(e)}}};this.V87=function(){var c=document.createElement("UL");this.H831f=document.createElement("LI");this.H831f.style.cssText=this.y26("TAB_NAV_L");this.xswo=document.createElement("LI");this.xswo.style.cssText=this.y26("TAB_SPACER");this.uW4LQ=document.createElement("LI");this.uW4LQ.style.cssText=this.y26("TAB_NAV_R");c.appendChild(this.H831f);c.appendChild(this.xswo);c.appendChild(this.uW4LQ);return c};this._U0=function(){var c=this.y26("TITLE_INFO");var e=document.createElement("TABLE");e.width="100%";e.cellSpacing=0;e.cellPadding=0;e.border=0;e.style.cssText=this.y26("TITLE_TABLE");var f=e.insertRow(-1);this.J_G=f.insertCell(-1);this.J_G.vAlign="top";this.J_G.style.cssText=this.y26("TITLE_TD");var d=f.insertCell(-1);d.style.cssText=this.y26("TITLE_SPACER");d.innerHTML="&nbsp;";this.QY085=f.insertCell(-1);this.QY085.vAlign="top";this.QY085.style.cssText=this.y26("RT_BTN_TD");this.QY085.innerHTML=this.y26("ZOOMIN_IMG");this.QY085.style.width="0px";this.VGVE();this.WXm=f.insertCell(-1);this.WXm.vAlign="top";this.WXm.style.cssText=this.y26("RT_BTN_TD");this.WXm.innerHTML=this.y26("CLOSE_IMG");this.A$Ol=MEvent.bindDom(this.WXm,"click",this,this.B6$7N);return e};this.A656G=function(){return{width:this.IPm75.offsetWidth,height:this.IPm75.offsetHeight}};this.getRect=function(d,g){if(typeof d!="boolean"){d=true}if(typeof g!="boolean"){g=true}var i=d?this.IPm75:this.dom;var h=cm5UC(this.dom.style.left);var f=cm5UC(this.dom.style.top);var c=h+this.dom.offsetWidth;var e=f+this.dom.offsetHeight;if(g){if(this.jt54t=="LEFT"){h=cm5UC(this.d9O7b.style.left)}else{if(this.jt54t=="RIGHT"){c+=this.d9O7b.offsetWidth}else{if(this.jt54t=="TOP"){f=cm5UC(this.d9O7b.style.top)}else{if(this.jt54t=="BOTTOM"){e+=this.d9O7b.offsetHeight}}}}}return{min:{x:h,y:f},max:{x:c,y:e},width:c-h,height:e-f}};this.Yp$4=function(j,g){if(!this.dom){this.initialize()}var i=-100000;var e={P68cW:i,$4fJu:i,c1FVh:i,FN6aS:i,width:avBubble.minWidth,height:avBubble.minHeight,arrow:{dir:"left"}};this.show(e,null,false);this.setTitle(j);this.setContent(g);var f=0;var d=0;var k=this.c173S.firstChild;if(k&&k.offsetWidth&&this.c173S.childNodes.length==1&&(_getStyle(k,"width")!="auto"||k.tagName=="IMG")){this.c173S.style.width=k.offsetWidth+cm5UC(_getStyle(k,"marginLeft","margin-left"))+"px";this.c173S.style.height=k.offsetHeight+cm5UC(_getStyle(k,"marginTop","margin-top"))+"px";this.dom.style.width=this.c173S.offsetWidth+"px";this.c173S.style.overflow="hidden";f=this.dom.offsetHeight;d=this.dom.offsetWidth}this.setVisible(false);return{width:d,height:f}};this.Sv32=function(O,M,c,e,m,T,u,U,l,t){if(typeof c!="number"){c=this.y26("TIP_DEFAULT_INFO").width}if(typeof e!="number"){e=this.y26("TIP_DEFAULT_INFO").height}if(typeof m!="string"){m="auto"}if(typeof T!="boolean"){T=false}if(typeof u!="boolean"){u=false}if(typeof l!="boolean"){l=true}if(typeof t!="boolean"){t=true}var E=0;var r=0;var Q=0;var g=0;var o="right";var F=0;var d=0;var A=false;var J=false;if(a){var H=a.width;var V=a.height;var I=this.y26("ARROW_INFO");var L=c+I._t54;var z=e+I.e8x0S;var v=c/2;var W=e/2;var P=0;var N=0;if(typeof U=="object"&&U){var S=U.toString();A=S.indexOf("MMarker")!=-1;J=S.indexOf("MPolyline")!=-1}if(A&&U.icon){P=U.icon.width/2;N=U.icon.height/2;O=O-U.icon.anchorX+P;M=M-U.icon.anchorY+N}if(u){r=M-W;E=O-v}else{if(M-W<=0){r=5}else{if(M+W>V){r=V-e-5}else{r=M-W}}if(O-v<=0){E=5}else{if(O+v>H){E=H-c-5}else{E=O-v}}}var h=false;var p=false;var i=false;var q=false;var n={min:{x:0,y:0},max:{x:0,y:0}};var K=a.R5_();var j=a.yh_1H();var R=O>=L&&M>=I.b558&&M+I.b558<=V;if(R){var X=O-P-I._t54;var B=X-c;if(!isNaN(parseInt(this.dom.style.borderRightWidth))){B+=parseInt(this.dom.style.borderRightWidth)}n={min:{x:B,y:r},max:{x:B+L,y:r+z}};if(l){R=!_isRectint(n,K)}if(t&&R){R=!_isRectint(n,j)}}var G=M>=z&&O>=I.o9$&&O<=H-I.o9$;if(G){var f=M-N-I.e8x0S;var w=f-e;if(!isNaN(parseInt(this.dom.style.borderBottomWidth))){w+=parseInt(this.dom.style.borderBottomWidth)}n={min:{x:E,y:w},max:{x:E+L,y:w+z}};if(l){G=!_isRectint(n,K)}if(t&&G){G=!_isRectint(n,j)}}var D=H-O>=L&&M>=I.b558&&M+I.b558<=V;if(D){var X=O+P;var B=X+I._t54;if(!isNaN(parseInt(this.dom.style.borderLeftWidth))){B-=parseInt(this.dom.style.borderLeftWidth)}n={min:{x:B,y:r},max:{x:B+L,y:r+z}};if(l){D=!_isRectint(n,K)}if(t&&D){D=!_isRectint(n,j)}}var k=V-M>=z&&O>=I.o9$&&O<=H-I.o9$;if(k){var f=M+N;var w=f+I.e8x0S;if(!isNaN(parseInt(this.dom.style.borderTopWidth))){w-=parseInt(this.dom.style.borderTopWidth)}n={min:{x:E,y:w},max:{x:E+L,y:w+z}};if(l){k=!_isRectint(n,K)}if(t&&k){k=!_isRectint(n,j)}}if(m!="auto"){if(T){if(m=="left"){h=true}else{if(m=="top"){p=true}else{if(m=="right"){i=true}else{if(m=="bottom"){q=true}}}}}else{if(m=="left"&&R){h=true}else{if(m=="top"&&G){p=true}else{if(m=="right"&&D){i=true}else{if(m=="bottom"&&k){q=true}else{m="auto"}}}}}}if(m=="auto"){h=R;p=G;i=D;q=k}var C="";if(h){C="left";Q=O-P-I._t54;g=M-I.b558/2;E=Q-c;if(!isNaN(parseInt(this.dom.style.borderRightWidth))){E+=parseInt(this.dom.style.borderRightWidth)}if(g<r+5){r=g-5}else{if(g+I.b558>=r+e-5){r=g-e+I.b558+5}}}else{if(i){C="right";o="left";Q=O+P;g=M-I.b558/2;E=Q+I._t54;if(!isNaN(parseInt(this.dom.style.borderLeftWidth))){E-=parseInt(this.dom.style.borderLeftWidth)}if(g<r+5){r=g-5}else{if(g+I.b558>=r+e-5){r=g-e+I.b558+5}}}else{if(p||(!i&&!p&&!h&&!q)){C="top";o="bottom";Q=O-I.o9$/2;g=M-N-I.e8x0S;r=g-e;if((!i&&!p&&!h&&!q)){if(E==5||(E==H-c-5)){E=O-v}}if(!isNaN(parseInt(this.dom.style.borderBottomWidth))){r+=parseInt(this.dom.style.borderBottomWidth)}if(Q<E+5){E=Q-5}else{if(Q+I.o9$>=E+c-5){E=Q-c+I.o9$+5}}}else{if(q){C="bottom";o="top";Q=O-I.o9$/2;g=M+N;r=g+I.e8x0S;if(!isNaN(parseInt(this.dom.style.borderTopWidth))){r-=parseInt(this.dom.style.borderTopWidth)}if(Q<E+5){E=Q-5}else{if(Q+I.o9$>=E+c-5){E=Q-c+I.o9$+5}}}}}}if(C=="left"||C=="right"){F=I._t54;d=I.b558}else{F=I.o9$;d=I.e8x0S}}return{P68cW:E,$4fJu:r,c1FVh:Q,FN6aS:g,width:c,height:e,RWw6:C,arrow:{dir:o,width:F,height:d},K88:A,g1ig3:J}};this.show=function(d,e,c){this.x=d.P68cW;this.y=d.$4fJu;this.width=d.width;this.height=d.height;if(!this.dom){this.initialize()}this.dom.style.left=this.x+"px";this.dom.style.top=this.y+"px";this.dom.style.width=this.width+"px";this.dom.style.height=this.height+"px";this.c173S.style.width="0px";this.c173S.style.height="0px";this.setVisible(true);if(typeof e=="boolean"){this.setZMBtnVisible(e)}this.Q8p(d.c1FVh,d.FN6aS,d.arrow.dir);this.j898(c)};this.Q8p=function(d,i,g){g=g.toUpperCase();this.jt54t=g;var h="";var f=this.y26("ARROW_INFO");h=this.y26("ARROW_"+g+"_CHILD");var e=f._t54;var c=f.b558;if(g=="TOP"||g=="BOTTOM"){e=f.o9$;c=f.e8x0S}this.d9O7b.innerHTML=h;this.d9O7b.style.left=d+"px";this.d9O7b.style.top=i+"px";this.d9O7b.style.width=e+"px";this.d9O7b.style.height=c+"px";this.d9O7b.style.display=""};this.CWQ=function(){this.d9O7b.style.display="none"};this.j898=function(d){if(!this.isVisible()){return}var j=this.RT1.offsetHeight;if(!isNaN(parseInt(this.RT1.style.marginTop))){j+=parseInt(this.RT1.style.marginTop)}if(!isNaN(parseInt(this.RT1.style.marginBottom))){j+=parseInt(this.RT1.style.marginBottom)}var g=this.dom.offsetHeight-j-this.G65G7;if(!isNaN(parseInt(this.c173S.style.paddingTop))){g-=parseInt(this.c173S.style.paddingTop)}if(!isNaN(parseInt(this.c173S.style.paddingBottom))){g-=parseInt(this.c173S.style.paddingBottom)}if(!isNaN(parseInt(this.dom.style.borderTopWidth))){g-=parseInt(this.dom.style.borderTopWidth)}if(!isNaN(parseInt(this.dom.style.borderBottomWidth))){g-=parseInt(this.dom.style.borderBottomWidth)}var c=this.dom.offsetWidth;if(!isNaN(parseInt(this.c173S.style.paddingLeft))){c-=parseInt(this.c173S.style.paddingLeft)}if(!isNaN(parseInt(this.c173S.style.paddingRight))){c-=parseInt(this.c173S.style.paddingRight)}this.c173S.style.height=g+"px";this.c173S.style.width=c+"px";if(this.c173S.scrollWidth>this.c173S.offsetWidth){if(!isNaN(parseInt(this.dom.style.borderLeftWidth))){c-=parseInt(this.dom.style.borderLeftWidth)}if(!isNaN(parseInt(this.dom.style.borderRightWidth))){c-=parseInt(this.dom.style.borderRightWidth)}this.c173S.style.width=c+"px"}if(px&&this.dom.rows[1].offsetHeight>0&&this.G65G7==0){g-=this.dom.rows[1].offsetHeight;if(g>=0){this.c173S.style.height=g+"px"}}if(typeof d!="boolean"){d=true}if(this.W8l8.length>0&&d){this.c003();this.v075();var f=this.tabIndex;this.tabIndex=-1;if(f!=-1){if(!this.W8l8[f].$h9l()){this.setCurrentTab(0)}else{this.setCurrentTab(f)}}}for(var e=0;e<this.xud.length;e++){var k=this.xud[e];k.style.left=(this.x+3+((e)*3))+"px";k.style.top=(this.y+3+((e)*3))+"px";k.style.width=this.width+"px";k.style.height=this.height+"px";k.style.display=""}this.IPm75.style.width=this.width+2+"px";this.IPm75.style.height=this.height+2+"px";this.IPm75.style.left=this.x-1+"px";this.IPm75.style.top=this.y-1+"px"};this.s17=function(){return this.dom};this.e070=function(d){if(!this.s17()){return}if(this.W8l8.length>=this.y26("TAB_AMOUNT")){return false}if(MInfoWindowTab.j52K5(d)){if(this.W8l8.length==0){var c=[];if(this.content!=""){c.push(new MInfoWindowTab(this.y26("TAB_DEFAULT_LABEL"),this.content,!d.KGY));this.c173S.innerHTML=""}if(c.length==0&&!d.KGY){d.KGY=true}c.push(d);this.yw8r(c)}else{this.T_4d3(d,-1)}}};this._65B9=function(){if(!this.s17()){return}if(this.W8l8.length>0){var c=this.W8l8;for(var d=c.length-1;d>=0;d--){this.kHY(d,false)}this.W8l8=[]}};this.rv0PG=function(){this.tabIndex=-1;this.ghJ=0;this.v3RL=null};this.kHY=function(m,l){if(!this.s17()){return}if(this.n73&&this.W8l8.length>m){if(typeof l!="boolean"){l=true}var d=[];var g=null;var j=this.tabIndex;this.tabIndex=-1;var e=0;for(var k=0;k<this.W8l8.length;k++){if(k!=m){var f=this.W8l8[k];var c=f.getIndex();d.push(f);f.$Y1R0(d.length-1);var h=f.$5$E();if(h){h.setAttribute("tabIndex",f.getIndex())}if(c==j){e=f.getIndex()}}else{g=this.W8l8[k]}}if(g){this.W8l8=d;var n=g.$5$E();if(g.qKB0.length>0){for(var k=0;k<g.qKB0.length;k++){var o=g.qKB0[k];MEvent.removeBuiltInListener(n,o.event,o.q9)}}if(n){this.n73.removeChild(n)}}this.c003();this.v075();if(this.W8l8.length>e&&!this.W8l8[e].$h9l()){e=0}if(l){this.setCurrentTab(e)}if(this.W8l8.length==0){this._083X()}}};this._083X=function(){this.G65G7=0;this.dom.rows[1].style.display="none";this.rv0PG();if(this.content){this.setContent(this.content)}this.j898()};this.T_4d3=function(e,g){if(!MInfoWindowTab.j52K5(e)){return false}var j=this.W8l8.length;var h=this.xswo;if(!MInfoWindowTab.j52K5(g)||!g.$5$E()){g=null}if(g){h=g.$5$E();var k=this.tabIndex==g.getIndex();var c=[];for(var d=0;d<this.W8l8.length;d++){var l=this.W8l8[d];if(l==g){c.push(e);e.$Y1R0(c.length-1)}c.push(l);l.$Y1R0(c.length-1);var f=l.$5$E();if(f){f.setAttribute("tabIndex",l.getIndex())}}if(k){this.tabIndex=g.getIndex()}this.W8l8=c}else{this.W8l8.push(e);e.$Y1R0(this.W8l8.length-1)}var f=this.f12(e,h);if(isNaN(parseInt(this.n73.style.height))){this.n73.style.height=parseInt(this.n73.parentNode.clientHeight)+"px"}if(e.KGY){this.setCurrentTab(e.getIndex())}this.v075()};this.f12=function(e,d){var c=document.createElement("LI");c.innerHTML=e.getLabel();c.style.cssText=this.y26("TAB_TEXT_BLUR");c.setAttribute("tabIndex",e.getIndex());e.LBct(c);this.n73.insertBefore(c,d);e.qKB0.push({event:"click",q9:MEvent.bindDom(c,"click",this,this.oHo)});if(this.W8l8.length==1){if(this.s7U_==0){this.s7U_=c.clientHeight;if(parseInt(c.style.paddingTop)){this.s7U_-=parseInt(c.style.paddingTop)}if(parseInt(c.style.paddingBottom)){this.s7U_-=parseInt(c.style.paddingBottom)}}if(this.ONG8H==0){this.ONG8H=c.clientHeight}}return c};this.v075=function(){var g=this.W8l8;this.t8_n(true);this.Hh1(true);var n=this.H831f.firstChild.offsetWidth;var k=this.uW4LQ.firstChild.offsetWidth;var c=null;var e=null;for(var j=g.length-1;j>=0;j--){e=g[j];if(e.$h9l()){var m=e.$5$E();if(m){var l=m.clientWidth;if(m.offsetTop>=m.offsetHeight*2-5){f=0}else{var f=this.T008(true);if(m.offsetTop==0){f+=l}else{if(m.offsetLeft!=0){f=0}}}if(l>=f){if(f<=20){this.N120f(e,false);f=0}else{f=f-parseInt(m.style.paddingLeft)-parseInt(m.style.paddingRight);m.style.width=f+"px";c=e}}else{c=e}if(f!=0){break}}}}this.t8_n(false);this.Hh1(false);if(g.length>0){this.t8_n(!g[0].$h9l());this.Hh1(!g[g.length-1].$h9l())}if(c&&c.$5$E()){this.v3RL=c;var h=c.$5$E();var d=h.clientWidth;if(!isNaN(parseInt(h.style.paddingLeft))){d-=parseInt(h.style.paddingLeft)}if(!isNaN(parseInt(h.style.paddingRight))){d-=parseInt(h.style.paddingRight)}if(!this.q_wV3()){d+=n}if(!this.CN3P9()){d+=k}if(this.tabIndex==c.getIndex()){d-=2}h.style.width=d+"px"}for(var j=0;j<g.length;j++){e=g[j];if(e.$h9l()){e.$I51=this.ghJ;if(e.$5$E()){e.$5$E().style.height=this.s7U_+"px"}}}this.avr5p()};this.N120f=function(d,e){var c=d.$5$E();if(c){if(e){c.style.cssText=this.y26("TAB_TEXT_BLUR")}else{c.style.width="0px";c.style.padding="0px"}d.setVisible(e)}};this.c003=function(){var c=this.W8l8;for(var d=0;d<c.length;d++){this.N120f(c[d],true)}};this.Hh1=function(c){if(!this.Th48){this.Th48=MEvent.bindDom(this.uW4LQ,"click",this,this.m3350)}if(c){this.uW4LQ.innerHTML=this.y26("TAB_NAV_R_CHILD");this.uW4LQ.style.cursor="pointer";this.uW4LQ.style.width=this.y26("TAB_NAV_INFO").width+"px"}else{this.uW4LQ.innerHTML="";this.uW4LQ.style.cursor="";this.uW4LQ.style.width="0px"}};this.t8_n=function(c){if(!this._f3Ik){this._f3Ik=MEvent.bindDom(this.H831f,"click",this,this.D857G)}if(c){this.H831f.innerHTML=this.y26("TAB_NAV_L_CHILD");this.H831f.style.cursor="pointer";this.H831f.style.width=this.y26("TAB_NAV_INFO").width+"px"}else{this.H831f.innerHTML="";this.H831f.style.cursor=""}};this.avr5p=function(){var c=this.T008(false);if(c<0){c=0}this.xswo.style.width=c+"px";this.xswo.style.height=this.ONG8H+"px"};this.q_wV3=function(){if(this.H831f.firstChild){return this.H831f.firstChild.offsetWidth>0}else{return false}};this.CN3P9=function(){if(this.uW4LQ.firstChild){return this.uW4LQ.firstChild.offsetWidth>0}else{return false}};this.T008=function(){var g=0;if(this.n73){if(this.W8l8.length>0){var d=this.W8l8;var f=null;var c=null;for(var e=d.length-1;e>=0;e--){f=d[e];c=f.$5$E();if(c&&c.offsetTop==this.H831f.offsetTop){break}}if(c){if(f.getIndex()==0&&c.offsetTop!=this.H831f.offsetTop){c=this.H831f}g=this.n73.parentNode.offsetWidth-c.offsetLeft-c.offsetWidth-this.uW4LQ.offsetWidth}}}return g};this.yw8r=function(d){if(this.n73&&d.length>0){if(this.dom.rows[1].style.display=="none"){this.dom.rows[1].style.display=""}if(this.n73.style.display=="none"){this.n73.style.display=""}for(var e=0;e<d.length;e++){this.T_4d3(d[e])}var c=this.dom.rows[1].clientHeight;if(!isNaN(parseInt(this.dom.rows[1].style.paddingTop))){c-=parseInt(this.dom.rows[1].style.paddingTop)}if(!isNaN(parseInt(this.dom.rows[1].style.paddingBottom))){c-=parseInt(this.dom.rows[1].style.paddingBottom)}this.dom.rows[1].style.height=c+"px";this.G65G7=c;this.j898()}};this.n8A07=function(d){if(!d.$h9l()){return}var e=d.$5$E();if(e){var c={width:e.style.width,height:e.style.height};e.style.cssText=this.y26("TAB_TEXT_BLUR");e.style.width=c.width;this.tabIndex=-1}};this.$81=function(d){var f=d.$5$E();if(f){var c={width:f.style.width,height:f.style.height};f.style.cssText=this.y26("TAB_TEXT_FOCUS");f.style.width=c.width;this.tabIndex=d.getIndex();var e=d.getContent();if(typeof e=="string"){this.c173S.innerHTML=e}else{if(typeof e=="object"&&typeof e.tagName!="undefined"){this.c173S.innerHTML="";this.c173S.appendChild(e)}}}};this.setCurrentTab=function(e){var d=this.W8l8;if(this.tabIndex==e||d.length<=0||e<0||e>=d.length){return}if(this.tabIndex!=-1){this.n8A07(this.W8l8[this.tabIndex])}var c=d[e];if(!c.$h9l()){if(c.$I51!=-1){this.ghJ=c.$I51;for(var f=0;f<d.length;f++){var g=d[f];if(g.$I51==c.$I51){this.N120f(g,true)}else{this.N120f(g,false)}}this.v075()}else{while(!c.$h9l()){this.m3350(null)}}}if(c.$h9l()){this.$81(c)}};this.D857G=function(g){if(!this.q_wV3()){return}this.ghJ--;var d=this.W8l8;var c=null;if(this.tabIndex!=-1){this.n8A07(this.W8l8[this.tabIndex])}for(var e=d.length-1;e>=0;e--){var f=d[e];if(f.$I51==this.ghJ){this.N120f(f,true);c=f}else{this.N120f(f,false)}}this.v075();this.setCurrentTab(c.getIndex())};this.m3350=function(g){if(!this.CN3P9()){return}this.ghJ++;var d=this.W8l8;var c=null;if(this.tabIndex!=-1){this.n8A07(this.W8l8[this.tabIndex])}for(var e=0;e<d.length;e++){var f=d[e];if(f.getIndex()<=this.v3RL.getIndex()){if(f.$h9l()){this.N120f(f,false)}}else{if(!f.$h9l()){if(!c){c=f}this.N120f(f,true)}}}this.v075();if(c){this.setCurrentTab(c.getIndex())}};this.B6$7N=function(c){c=ny(c);if(c.target.tagName=="IMG"){this.setVisible(false);if(this.onClosed){this.onClosed()}if(this.closeFn){this.closeFn()}}};this.setVisible=function(d){if(!this.dom){return}if(this.isVisible()==d){return}this.dom.style.display=d?"":"none";for(var c=0;c<this.xud.length;c++){this.xud[c].style.display=d?"":"none"}if(!d){this.CWQ()}this.IPm75.style.display=d?"":"none"};this.isVisible=function(){return this.dom&&this.dom.style.display!="none"};this.setZMBtnVisible=function(c){if(this._1E()==c){return}if(c){this.QY085.style.width=this.y26("RT_BTN_TD_INFO").width+"px"}else{this.QY085.style.width="0px"}};this._1E=function(){return this.QY085&&parseInt(this.QY085.style.width)!=0};this.oHo=function(d){var c=d.target.getAttribute("tabIndex");if(c!=null){this.setCurrentTab(parseInt(c))}};this.Vfi_U=function(c){if(this.QY085&&this.H53.type!=c){this.H53.type=c;if(this.H53.type=="zoomin"){this.QY085.innerHTML=this.y26("ZOOMIN_IMG")}else{this.QY085.innerHTML=this.y26("ZOOMOUT_IMG")}this.VGVE()}};this.VGVE=function(){if(this.H53.q9){MEvent.removeBuiltInListener(this.QY085,"click",this.H53.q9)}if(this.H53.type=="zoomin"){this.H53.q9=MEvent.bindDom(this.QY085,"click",this,this.Qr2L8)}else{if(this.H53.type=="zoomout"){this.H53.q9=MEvent.bindDom(this.QY085,"click",this,this.LCl2)}}};this.Qr2L8=function(c){c=ny(c);if(c.target.tagName=="IMG"){if(this.onZoomIn){this.onZoomIn()}}};this.LCl2=function(c){c=ny(c);if(c.target.tagName=="IMG"){if(this.onZoomOut){this.onZoomOut()}}};this.setTitle=function(c){if(this.J_G){this.J_G.innerHTML=c}};this.setContent=function(c){this.content=c;if(this.c173S){if(typeof c=="string"){this.c173S.innerHTML=c}else{if(typeof c=="object"&&typeof c.tagName!="undefined"){this.c173S.innerHTML="";this.c173S.appendChild(c)}}if(this.W8l8.length>0){this.W8l8[0].setContent(c)}}};this.PQ23y=function(c,d){if(!this.s17()){return}this.width=c;this.height=d;if(this.dom){this.dom.style.width=c+"px";this.dom.style.height=d+"px";this.j898()}};this.moveTo=function(c,f){if(!this.s17()){return}this.x=c;this.y=f;this.dom.style.left=c+"px";this.dom.style.top=f+"px";for(var d=0;d<this.xud.length;d++){var e=this.xud[d];e.style.left=(this.x+3+((d)*3))+"px";e.style.top=(this.y+3+((d)*3))+"px"}};this.LG8O9=function(c){if(this.isVisible()){if((this.c173S.style.overflow=="hidden"?true:false)!=c){this.c173S.style.overflow="hidden"}}};this.y26=function(c){return b5l.Fay._3C1(c)};this.S10=function(c,d){b5l.Fay.jn$(c,d)};this.finalize=function(){if(this._f3Ik){MEvent.removeBuiltInListener(this.H831f,"click",this._f3Ik)}if(this.Th48){MEvent.removeBuiltInListener(this.uW4LQ,"click",this.Th48)}if(this.A$Ol){MEvent.removeBuiltInListener(this.WXm,"click",this.A$Ol)}}};b5l.Fay=new function(){var c=[];var b=navigator.userAgent.split("(").toString().split(";")[1].indexOf("6")>0;c.TIP_DEFAULT_INFO={width:300,height:300,P02_:false,zIndex:100};c.COLOR="#81807f";c.TAB_COLOR="#D6D7DB";c.TIP_TABLE_BORDER_COLOR="#f58725";c.IMAGE_RESOURCE=CTLIMG_RESOURCE[0].url;c.IMAGE_RESOURCE_INFO={width:CTLIMG_RESOURCE[0].w,height:CTLIMG_RESOURCE[0].h};c.BLANK_IMG_SRC=strImgsvrUrl+"images/newbubbleimg/mbblank.gif";c.TIP_TABLE="cursor:default;position:absolute;border:2px solid "+c.TIP_TABLE_BORDER_COLOR+";background-color:#FFFFFF;display:none;spacing:10px;table-layout:fixed;overflow:hidden;z-index:"+c.TIP_DEFAULT_INFO.zIndex+";";c.TIP_BORDER="position:absolute;background:white;z-index:99;";c.TITLE_CONTAINER_TD="";c.TITLE_TABLE="table-layout:fixed;margin-bottom:5px;margin-top:4px;/*background-color:green;*/";c.TITLE_TD="white-space:nowrap;overflow:hidden;padding-left:4px;padding-top:2px;font-weight:bold;font-size:14px;";c.TITLE_SPACER="width:10px;-moz-user-select:none;-moz-user-focus:none;";var a=function(e,g,d,j,i){if(typeof i!="string"){i=""}var f='<div style="position:absolute;width:'+e+"px;height:"+g+"px;overflow:hidden;-moz-user-select:none;-moz-user-focus:none;"+i+'">';if(b){f+='<img src="'+c.BLANK_IMG_SRC+'" style="position:absolute;left:'+d+"px;top:"+j+"px;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+c.IMAGE_RESOURCE+",sizingMethod=scale);width:"+c.IMAGE_RESOURCE_INFO.width+"px;height:"+c.IMAGE_RESOURCE_INFO.height+'px;">'}else{f+='<img src="'+c.IMAGE_RESOURCE+'" style="position:absolute;left:'+d+"px;top:"+j+'px;">'}f+="</div>";return f};c.RT_BTN_TD_INFO={width:18};c.RT_BTN_TD="width:"+c.RT_BTN_TD_INFO.width+"px";c.RT_BTN_IMG_INFO={width:12,height:12};c.CLOSE_IMG=a(c.RT_BTN_IMG_INFO.width,c.RT_BTN_IMG_INFO.height,-64,-51,"cursor:pointer;");c.ZOOMIN_IMG=a(c.RT_BTN_IMG_INFO.width,c.RT_BTN_IMG_INFO.height,-42,-51,"cursor:pointer;");c.ZOOMOUT_IMG=a(c.RT_BTN_IMG_INFO.width,c.RT_BTN_IMG_INFO.height,-53,-51,"cursor:pointer;");c.SHADOW_COLOR=c.COLOR;c.SHADOW_AMOUNT=2;c.SHADOW_OPACITY=[0.5,0.3];c.SHADOW_DIV="position:absolute;background-color:"+c.SHADOW_COLOR+";display:none;";c.TAB_AMOUNT=5;c.TAB_DEFAULT_LABEL="\u4e3b\u8981";c.TAB_TD="-moz-user-select:none;-moz-user-focus:none;";c.TAB_CONTAINER="list-style-type:none;margin:0px;padding:0px;overflow:hidden;background:transparent url(images/lnbg.gif) repeat-x 0 -265px;height:25px;";c.TAB_LINE="1px solid "+c.TAB_COLOR+";";c.TAB_TEXT_COMMON="float:left;cursor:pointer;white-space:nowrap;overflow:hidden;outline:none;font-size:12px;margin:0 3px;width:75px;text-align:center;line-height:23px;";c.TAB_TEXT_FOCUS=c.TAB_TEXT_COMMON+"border-top:"+c.TAB_LINE+";border-left:"+c.TAB_LINE+";border-right:"+c.TAB_LINE+";font-weight:bold;background-color:#fff;height:24px;";c.TAB_TEXT_BLUR=c.TAB_TEXT_COMMON+"border:"+c.TAB_LINE+"background-color:#FAFAFA;height:23px;";c.TAB_SPACER="float:left;";c.TAB_NAV_INFO={width:10,height:10};c.TAB_NAV_LR_COMMON="float:left;height:23px;";c.TAB_NAV_L=c.TAB_NAV_LR_COMMON+"width:20px;";c.TAB_NAV_R=c.TAB_NAV_LR_COMMON+"float:right;";c.TAB_NAV_L_CHILD=a(c.TAB_NAV_INFO.width,c.TAB_NAV_INFO.height,-66,-160);c.TAB_NAV_R_CHILD=a(c.TAB_NAV_INFO.width,c.TAB_NAV_INFO.height,-66,-148);c.CONTENT_TD="";c.CONTENT_DIV="padding:5px;width:100%;height:100%;overflow:auto;/*background-color:yellow;*/";c.ARROW_INFO={_t54:15,b558:23,o9$:23,e8x0S:15,zIndex:c.TIP_DEFAULT_INFO.zIndex+1};c.ARROW_DIV="position:absolute;top:0px;left:0px;width:"+c.ARROW_INFO.width+"px;height:"+c.ARROW_INFO.height+"px;display:none;z-index:"+c.ARROW_INFO.zIndex+";-moz-user-select:none;-moz-user-focus:none;";c.ARROW_TOP_CHILD=a(c.ARROW_INFO.o9$,c.ARROW_INFO.e8x0S,-43,-177);c.ARROW_BOTTOM_CHILD=a(c.ARROW_INFO.o9$,c.ARROW_INFO.e8x0S,-43,-192);c.ARROW_LEFT_CHILD=a(c.ARROW_INFO._t54,c.ARROW_INFO.b558,-61,-124);c.ARROW_RIGHT_CHILD=a(c.ARROW_INFO._t54,c.ARROW_INFO.b558,-25,-178);this.jn$=function(d,e){if(typeof c[d]!="undefined"){c[d]=e}};this._3C1=function(d){return c[d]}};var MPanel=function(options){this.initialize=function(maplet){this.maplet=maplet;this.paint()};this.setLocation=function(options,paint){if(typeof paint!="boolean"){paint=true}this.location=options||{};with(this.location){if(typeof pt!="object"||!(pt instanceof MPoint)||!pt){this.location.pt=null}if(typeof type!="string"||!type||(type=="latlon"&&!pt)){this.location.type="xy"}if(typeof x!="number"){this.location.x=0}if(typeof y!="number"){this.location.y=0}if(type=="latlon"&&pt&&!pt.maplet&&this.maplet){pt.initialize(this.maplet)}}this.options.location=this.location;if(paint){this.paint()}};this.setContent=function(c){if(typeof c!="undefined"&&c){if(typeof c=="string"){this.dom.innerHTML=c}else{if(typeof c=="object"){this.dom.appendChild(c)}}}else{c=null;this.dom.innerHTML=""}this.options.content=c};this.setMouseWheel=function(enable){if(typeof enable!="boolean"){enable=true}if(this.dom){this.dom.setAttribute(j25$O,!enable)}this.options.mousewheel=enable};this.setZoomHide=function(hide){if(typeof hide!="boolean"){hide=false}this.options.zoomhide=hide};this.setPin=function(p,paint){if(typeof p!="boolean"){p=false}if(typeof paint!="boolean"){paint=true}this.options.pin=p;if(!p&&typeof this.location!="undefined"&&this.location.pt){this.location.type="xy";this.location.pt=null}if(paint){this.paint()}};this.setZIndex=function(i){if(typeof i!="number"){i=this.options.pin?200:2}this.dom.style.zIndex=i;this.options.zindex=i};this.paint=function(){if(!this.dom||!this.maplet){return}if(this.options.pin){if(this.dom.parentNode!=this.maplet.sF){this.maplet.sF.appendChild(this.dom)}}else{if(this.dom.parentNode!=this.maplet.vb){this.maplet.vb.appendChild(this.dom)}}with(this.location){if(this.options.pin||type=="latlon"){if(typeof pt=="undefined"||!pt){pt=new MPoint(this.maplet.toMapCoordinate(x,y))}if(!pt.maplet){pt.initialize(this.maplet)}if(this.options.pin){if(this.maplet.N31){if(this.maplet.Y$_8!=pt.Y$_8){pt.mapX+=this.maplet.ClPI;pt.mapY+=this.maplet.c970q;pt.Y$_8=this.maplet.Y$_8}}else{pt.r05e$()}}x=pt.mapX;y=pt.mapY}this.dom.style.left=x+"px";this.dom.style.top=y+"px"}};this.show=function(){this.setVisible(true);this.j81wW.K3$=false};this.hide=function(){this.setVisible(false);this.j81wW.K3$=true};this.setVisible=function(visible){if(!this.dom){return}if(this.dom.style.display!=(visible?"":"none")){this.dom.style.display=visible?"":"none"}};this.isVisible=function(){return this.dom.style.display==""};this.finalize=function(){this.remove(true)};this.remove=function(finalize){if(typeof finalize!="boolean"){finalize=false}if(this.dom){if(!finalize){if(this.dom.parentNode){this.dom.parentNode.removeChild(this.dom)}}else{_removeNode(this.dom);this.dom=null}}this.maplet=null};this.toString=function(){return"com.mapbar.maplet.MPanel"};this.id=new Date().getTime()+"_panel";this.maplet=null;this.dom=document.createElement("DIV");this.dom.style.position="absolute";this.j81wW={K3$:false};this.options=options||{};with(this.options){this.setPin(typeof pin!="undefined"?pin:undefined,false);this.setZIndex(typeof zindex!="undefined"?zindex:undefined);this.setContent(typeof content!="undefined"?content:undefined);this.setLocation(typeof location!="undefined"?location:undefined,false);this.setMouseWheel(typeof mousewheel!="undefined"?mousewheel:undefined);this.setZoomHide(typeof zoomhide!="undefined"?zoomhide:undefined)}};MPanel.enableDragMap=function(f,d,c){var a=function(h,g){if(g&&typeof h.setAttribute!="undefined"){h.setAttribute(cV7,"true")}else{if(typeof h.removeAttribute!="undefined"){h.removeAttribute(cV7)}}};var b=function(k,j,m){if(typeof k=="object"&&k&&typeof k.childNodes!="undefined"){var h=k.childNodes;for(var g=0;g<h.length;g++){var l=h[g];if(l.childNodes.length>0){b(l,j,m)}else{if(typeof l.tagName=="string"&&!m[l.tagName.toLowerCase()]){a(l,j)}}}a(k,j)}};if(GYAjR(c)){for(var e=0;e<c.length;e++){c[c[e].toLowerCase()]=1}}else{c=[]}b(f,d,c)};var MLayer=function(options){this.initialize=function(maplet){this.maplet=maplet;this.paint()};this.setServerPath=function(_1978){if(typeof _1978!="string"||!_1978){_1978=""}this.options.serverPath=_1978};this.setZIndex=function(i){if(typeof i!="number"){i=0}this.dom.style.zIndex=i;this.options.zindex=i};this.setImgType=function(type){if(typeof type!="string"||!type){type="png"}this.options.imgType=type.toLowerCase()};this.setDataType=function(type){if(typeof type!="string"||!type){type="js"}this.options.dataType=type};this.setDataPattern=function(gd5){if(typeof gd5!="string"||!gd5){gd5="data"+MLayer.DPLACEHOLDER}this.options.dataPattern=gd5};this.setImgWidth=function(w){if(typeof w!="number"||w<=0){w=5}this.options.imgWidth=w;this._a3=Math.ceil(w/2)};this.setImgHeight=function(h){if(typeof h!="number"||h<=0){h=5}this.options.imgHeight=h;this.O6$bv=Math.ceil(h/2)};this.setLevelRange=function(min,max){if(typeof min!="number"||min<te||min>sY){min=te}if(typeof max!="number"||max<te||max>sY){max=sY}this.options.minLevel=min;this.options.maxLevel=max};this.setNeedData=function(asqg6){if(typeof asqg6!="boolean"){asqg6=false}this.options.needData=asqg6};this.setNeedData=function(asqg6){if(typeof asqg6!="boolean"){asqg6=false}this.options.needData=asqg6};this.setCreator=function(v14u){if(typeof v14u!="number"||(v14u!=MLayer.USER&&v14u!=MLayer.SYSTEM)){v14u=MLayer.USER}this.options.creator=v14u};this.setImgUrlPreprocessor=function(b9941){if(typeof b9941!="function"){b9941=null}this.options.imgUrlPreprocessor=b9941};this.setDataUrlPreprocessor=function(b9941){if(typeof b9941!="function"){b9941=null}this.options.dataUrlPreprocessor=b9941};this.setPreprocessorThisObj=function(i7D0){if(typeof i7D0!="object"||!i7D0){i7D0=null}this.options.processorThisObj=i7D0};this.setFireEvent=function(Pg0$){if(typeof Pg0$!="number"){Pg0$=MLayer.ALL}this.options.events=Pg0$};this.setNeedImg=function(asqg6){if(typeof asqg6!="boolean"){asqg6=true}this.options.needImg=asqg6};this.inZoomRange=function(AB){if(AB>=this.options.minLevel&&AB<=this.options.maxLevel){return true}else{return false}};this.paint=function(){if(!this.dom||!this.maplet){return}if(!this.maplet.H434){this.maplet.C3N()}if(this.dom.parentNode!=this.maplet.H434){this.resize(this.maplet.width,this.maplet.height);this.maplet.H434.appendChild(this.dom)}};var iCN=function(data,a$X53){if(typeof data.Gh48=="undefined"){data.Gh48=a$X53}else{data.Gh48=a$X53}};var _52=function(data){return typeof data.Gh48=="undefined"||data.Gh48};var xV4=function(){for(var i in this.data){iCN.apply(this,[this.data[i],false])}};var NoH8=function(){for(var i in this.data){if(!_52.apply(this,[this.data[i]])){p86o3.apply(this,[i])}}};var J75v=function(img,t2F8){img.setAttribute(g7Y,t2F8?"yes":"no")};var dF13U=function(){for(var i in this.D91){J75v.apply(this,[this.D91[i],false])}};var PY34=function(img){return img.getAttribute(g7Y)=="yes"};var S47=function(){for(var i in this.D91){if(!PY34.apply(this,[this.D91[i]])){LCG.apply(this,[i])}}};var LCG=function(id){if(typeof this.D91[id]=="object"){var img=this.D91[id];img.onload=null;img.onerror=null;_removeNode(img);img=null;delete this.D91[id]}};var p86o3=function(id){if(typeof this.data[id]=="object"){this.data[id]=null;delete this.data[id]}};this.update=function(){if(!this.dom||!this.maplet){return}if(!this.inZoomRange(this.maplet.AG)){this.clear();return}Ryh.apply(this)};var Ryh=function(){xV4.apply(this);dF13U.apply(this);for(var i in this.maplet.layerData){var item=this.maplet.layerData[i];if(this.options.needImg){var img=this.D91[i];if(typeof img!="object"||!img){if(D2a&&this.options.imgType=="png"){img=document.createElement("DIV");img.style.position="absolute";img.style.width="300px";img.style.height="300px"}else{img=document.createElement("IMG");img.style.position="absolute";img.setAttribute("unselectable","on");img.style.MozUserSelect="none";img.onerror=function(i7D0,id){return function(){_X82O.apply(i7D0,[id])}}(this,i);img.onload=function(i7D0,id){return function(){XnHV.apply(i7D0,[id])}}(this,i)}this.dom.appendChild(img);this.D91[i]=img}J75v.apply(this,[img,true]);img.style.left=item.x+"px";img.style.top=item.y+"px";img.setAttribute(cV7,"true");img.setAttribute(TET,"yes");if(!img.src){var src="";if(this.options.imgUrlPreprocessor){src=this.options.imgUrlPreprocessor.apply(this,[item]);if(!src){continue}}else{src=gd1.apply(this,[this.options.serverPath,item.lh1,item.Xci])+item.filename+"."+this.options.imgType}if(D2a&&this.options.imgType=="png"){img.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+src+",sizingMethod=scale);";_6wa.apply(this,[i])}else{if(px){img.style.filter="alpha(opacity=0)"}img.src=src}}else{_6wa.apply(this,[i])}}else{_6wa.apply(this,[i])}}S47.apply(this);NoH8.apply(this)};var gd1=function(_1978,lh1,Xci){var C90="img.mapbar.com";if(strImgsvrUrl.substring(7,21)==C90){return _1978.replace(C90,"img"+this.maplet.vI_9(lh1,Xci)+".mapbar.com")}else{return _1978}};var _X82O=function(id){LCG.apply(this,[id])};var XnHV=function(id){var img=this.D91[id];if(typeof img!="undefined"&&img){if(px){img.style.display="";img.style.filter=null}img.onerror=null;img.onload=null;_6wa.apply(this,[id])}};this.refreshDataXY=function(){if(!this.options.needData){return}for(var id in this.data){var uy=this.data[id];for(var i=0;i<uy.length;i++){var item=uy[i];var zB=this.maplet.layerData[id].x+item.r.i.x;var zF=this.maplet.layerData[id].y+item.r.i.y;item.rect.min.x=zB;item.rect.min.y=zF;item.rect.max.x=zB+item.r.a.x;item.rect.max.y=zF+item.r.a.y}}};var _6wa=function(id){if(!this.options.needData){return}var img=this.D91[id];if(!this.options.needImg||(typeof img=="object"&&img&&((typeof img.src!="undefined"&&img.src!=sX)||(D2a&&this.options.imgType=="png")))){if(!this.data[id]&&typeof this.maplet.layerData[id]=="object"){var item=this.maplet.layerData[id];var src="";if(this.options.dataUrlPreprocessor){src=this.options.dataUrlPreprocessor.apply(this,[item]);if(!src){return}}else{src=gd1.apply(this,[this.options.serverPath,item.lh1,item.Xci])+item.filename+"."+this.options.dataType}new i96(src,b7_01,false,true,this,undefined,[id]).V96Xw()}else{var uy=this.data[id];iCN.apply(this,[uy,true]);if(this.maplet.N31){for(var i=0;i<uy.length;i++){var item=uy[i];item.rect.min.x=item.rect.min.x+this.maplet.ClPI;item.rect.min.y=item.rect.min.y+this.maplet.c970q;item.rect.max.x=item.rect.max.x+this.maplet.ClPI;item.rect.max.y=item.rect.max.y+this.maplet.c970q}}}}};var b7_01=function(id,kPH24){if(typeof this.maplet.layerData[id]=="undefined"||!this.maplet.layerData[id]){return}var layerData=this.maplet.layerData[id];var h83=this.options.dataPattern.replace(MLayer.DPLACEHOLDER,layerData.dirname+"_"+layerData.xyname);var uy=eval("typeof "+h83+'=="undefined"?null:'+h83);if(uy&&uy.length>0){this.data[id]=uy;var p1=layerData.x;var p3=layerData.y;for(var i=0;i<uy.length;i++){var item=uy[i];var zB=p1+item.r.i.x;var zF=p3+item.r.i.y;item.rect={min:{x:zB,y:zF},max:{x:zB+item.r.a.x,y:zF+item.r.a.y}}}uy=null}_removeNode(aa(kPH24))};this.getDataByXY=function(id,x,y,scg_5){if(typeof scg_5!="boolean"){scg_5=false}if(this.data[id]){var pt={x:x,y:y};for(var i=0;i<this.data[id].length;i++){if(_isInsideRect(pt,this.data[id][i].rect)){var d=this.data[id][i];if(scg_5){if(d.c.length>0){var r=d.rect;var p1=this.maplet.layerData[id].x;var p3=this.maplet.layerData[id].y;for(var nC052=0;nC052<d.c.length;nC052++){var c=d.c[nC052];var qx=p1+c.i.x;var qz=p3+c.i.y;var u768={min:{x:qx,y:qz},max:{x:qx+c.a.x,y:qz+c.a.y}};if(_isInsideRect(pt,u768)){d=this.data[id][c.f]}}}}return{pid:d.p,area:d.l}}}}return null};this.vq28a=function(id,x,y){if(this.getDataByXY(id,x,y)){this.maplet.d7q("pointer",this.maplet.vb)}};this.click=function(id,x,y){if((this.options.events&MLayer.CLICK)!=MLayer.CLICK){return null}var d=null;if(d=this.getDataByXY(id,x,y,true)){return d}return null};this.clearImgs=function(){for(var i in this.D91){LCG.apply(this,[i])}};this.clearData=function(){for(var i in this.data){p86o3.apply(this,[i])}};this.clear=function(){this.clearImgs();this.clearData();if(!this.dom){return}this.dom.innerHTML=""};this.resize=function(w,h){if(!this.dom){return}if(cm5UC(this.dom.style.width,0)!=w){this.dom.style.width=(w-1)+"px"}if(cm5UC(this.dom.style.height,0)!=h){this.dom.style.height=(h-2)+"px"}};this.show=function(){this.setVisible(true)};this.hide=function(){this.setVisible(false)};this.setVisible=function(visible){if(!this.dom){return}if(this.dom.style.display!=(visible?"":"none")){this.dom.style.display=visible?"":"none"}};this.finalize=function(){this.remove(true)};this.remove=function(finalize){if(typeof finalize!="boolean"){finalize=false}this.clear();if(this.dom){if(!finalize){if(this.dom.parentNode){this.dom.parentNode.removeChild(this.dom)}}else{_removeNode(this.dom);this.dom=null}}if(this.options.processorThisObj){this.options.processorThisObj=null}this.maplet=null};this.toString=function(){return"com.mapbar.maplet.MLayer"};this.id=new Date().getTime()+"_layer";this.maplet=null;this.dom=document.createElement("DIV");this.dom.style.position="absolute";this.D91={};this.data={};this._a3=0;this.O6$bv=0;var g7Y="_using";this.options=options||{};with(this.options){this.setServerPath(typeof serverPath!="undefined"?serverPath:undefined);this.setZIndex(typeof zindex!="undefined"?zindex:undefined);this.setImgType(typeof imgType!="undefined"?imgType:undefined);this.setDataType(typeof dataType!="undefined"?dataType:undefined);this.setDataPattern(typeof dataPattern!="undefined"?dataPattern:undefined);this.setLevelRange((typeof minLevel!="undefined"?minLevel:undefined),(typeof maxLevel!="undefined"?maxLevel:undefined));this.setImgWidth(typeof imgWidth!="undefined"?imgWidth:undefined);this.setImgHeight(typeof imgHeight!="undefined"?imgHeight:undefined);this.setNeedData(typeof needData!="undefined"?needData:undefined);this.setNeedImg(typeof needImg!="undefined"?needImg:undefined);this.setCreator(typeof creator!="undefined"?creator:undefined);this.setImgUrlPreprocessor(typeof imgUrlPreprocessor!="undefined"?imgUrlPreprocessor:undefined);this.setDataUrlPreprocessor(typeof dataUrlPreprocessor!="undefined"?dataUrlPreprocessor:undefined);this.setPreprocessorThisObj(typeof processorThisObj!="undefined"?processorThisObj:undefined);this.setFireEvent(typeof events!="undefined"?events:undefined)}};MLayer.USER=1;MLayer.SYSTEM=2;MLayer.DPLACEHOLDER="[xyname]";MLayer.NONE=0;MLayer.CLICK=1;MLayer.MOUSEMOVE=2;MLayer.ALL=255;var MTraffic=function(options){this.initialize=function(maplet){this.maplet=maplet;this.layer=new MLayer({serverPath:this.options.serverPath,imgType:this.options.imgType,needData:false,minLevel:this.options.minLevel,maxLevel:this.options.maxLevel,creator:MLayer.SYSTEM,imgUrlPreprocessor:kl$,M0w5:this});this.maplet.addLayer(this.layer);this.refresh();W46G7=nB(this,M1_,this.options.interval)};var kl$=function(data){if(w87w6){return this.options.serverPath+w87w6+(this.maplet.AG-1)+"/o"+data.grid+"."+this.options.imgType}else{return""}};this.refresh=function(){if(!this.layer||!this.layer.inZoomRange(this.maplet.AG)){return}this.layer.clear();_wIc=true;M1_.apply(this)};var M1_=function(){IoF.apply(this)};var IoF=function(){new i96(Yg80.apply(this),xnm53,false,true,this).V96Xw()};var Yg80=function(){return this.options.magicPath.replace("[city]",this.options.city)};var xnm53=function(){var d=eval(MTraffic.MAGIC_RESULT_NAME);if(typeof d!="string"||!d){return}if(!w87w6||d!=w87w6||_wIc){w87w6=eval(MTraffic.MAGIC_RESULT_NAME);_wIc=false;this.layer.clear();this.layer.update();MEvent.trigger(this.layer.maplet,"traffic_update",{magicPath:w87w6})}};this.setServerPath=function(_1978){if(typeof _1978!="string"||!_1978){_1978="http://lukuang.mapbar.com/"}this.options.serverPath=_1978};this.setImgType=function(type){if(typeof type!="string"||!type){type="png"}this.options.imgType=type.toLowerCase()};this.setMagicPath=function(_1978){if(typeof _1978!="string"||!_1978){_1978="http://lukuang.mapbar.com/[city]/traffic/images/traffic.js"}this.options.magicPath=_1978};this.setLevelRange=function(min,max){if(typeof min!="number"||min<TRAFFIC_MIN_LEVEL||min>TRAFFIC_MAX_LEVEL){min=TRAFFIC_MIN_LEVEL}if(typeof max!="number"||max<TRAFFIC_MIN_LEVEL||max>TRAFFIC_MAX_LEVEL){max=TRAFFIC_MAX_LEVEL}this.options.minLevel=min;this.options.maxLevel=max};this.setInterval=function(i){if(typeof i!="number"||i<TRAFFIC_REFRESH_INTERVAL){i=TRAFFIC_REFRESH_INTERVAL}this.options.interval=i*1000;if(W46G7){window.clearInterval(W46G7);W46G7=nB(this,M1_,this.options.interval)}};this.setCity=function(city,refresh){if(typeof city!="string"||!city){city="beijing"}this.options.city=city;if(typeof refresh!="boolean"){refresh=true}if(refresh){_wIc=true;M1_.apply(this)}};this.show=function(){if(this.layer){this.layer.show()}};this.hide=function(){if(this.layer){this.layer.hide()}};this.finalize=function(){this.remove(true)};this.remove=function(finalize){if(typeof finalize!="boolean"){finalize=false}if(W46G7){window.clearTimeout(W46G7)}W46G7=null;this.layer.remove(finalize);this.maplet=null};this.toString=function(){return"com.mapbar.maplet.MTraffic"};this.id=new Date().getTime()+"_traffic";this.maplet=null;this.layer=null;var W46G7=null;var w87w6=null;var _wIc=true;this.options=options||{};with(this.options){this.setServerPath(typeof serverPath!="undefined"?serverPath:undefined);this.setLevelRange((typeof minLevel!="undefined"?minLevel:undefined),(typeof maxLevel!="undefined"?maxLevel:undefined));this.setInterval(typeof interval!="undefined"?interval:undefined);this.setCity(typeof city!="undefined"?city:undefined,false);this.setMagicPath(typeof magicPath!="undefined"?magicPath:undefined);this.setImgType(typeof imgType!="undefined"?imgType:undefined)}};MTraffic.MAGIC_RESULT_NAME="__mapbar_magic_id";function rh_(maplet){this.maplet=maplet;document["mapbar-overview"]=this;this.yl="mapbar";var e56k5=0;var vr4Q=0;var V5h=0;var heN=0;this.c3=oo;this.fg=true;this.vb=document.createElement("div");this.vb.unselectable="on";this.vb.style.position="absolute";this.vb.style.zIndex=999;this.vb.style.backgroundColor="white";this.vb.style.border="1px solid #A6A5A1";this.vb.setAttribute(j25$O,true);this.vb.style.overflow="hidden";this.vb.style.display="none";this.fC=document.createElement("div");this.fC.id="mapbar-overview-canvas";this.fC.unselectable="on";this.fC.style.position="absolute";this.fC.style.visibility="visible";this.fC.style.zIndex=0;this.fC.style.top=(uU-2)+"px";this.fC.style.left=(px)?"5px":"7px";this.fC.style.backgroundColor=MapBackgroundColor;this.fC.style.border="2px solid #0E347F";this.fC.style.overflow="hidden";this.fC.selected=false;this.vb.appendChild(this.fC);this.z3=document.createElement("div");this.z3.id="mapbar-overview-viewport";this.z3.unselectable="on";this.fC.appendChild(this.z3);this.z1=document.createElement("div");this.z1.id="mapbar-overview-viewframe";this.z1.unselectable="on";this.fC.appendChild(this.z1);this.z2=document.createElement("div");this.z2.id="mapbar-overview-viewpad_ctrl";this.z2.unselectable="on";this.z2.style.MozUserSelect="none";this.fC.appendChild(this.z2);this.z2.style.cursor="move";this.z2.selected=false;this.ao=new Array();this.cW=0;this.g6h7W=[2,4,8,6];this.shadow=document.createElement("div");this.shadow.unselectable="on";this.shadow.style.position="absolute";this.shadow.style.zIndex=998;this.shadow.setAttribute(j25$O,true);this.shadow.style.display="none";var VyM8=null;var M58=null;this.w91eO=new fD("OvwImgs",0,0,0,0,true,0,"",this.fC);this.show=function(){this.fg=true};this.hide=function(){this.fg=false};this.nF=function(){if(this.fg){if(this.c3){return cm5UC(this.shadow.style.top)}else{return heN}}else{return 0}};this.VOqw1=function(){if(this.fg){if(this.c3){return cm5UC(this.shadow.style.left)}else{return V5h}}else{return 0}};this.nz=function(){if(this.fg){if(this.c3){return cm5UC(this.shadow.offsetHeight)}else{return cm5UC(this.img.offsetHeight)}}else{return 0}};this.w0=function(lM){_66(lM);if(this.cW!=0){return}if(lM.target.id==this.z2.id||$3kS==this.z2.id){$3kS=this.z2.id;this.z2.selected=true;this.downX=(px)?event.clientX:lM.clientX;this.downY=(px)?event.clientY:lM.clientY;this.xa=this.downX;this.xb=this.downY}else{if(fJ(lM.target,this.fC)||$3kS==this.fC.id){$3kS=this.fC.id;this.fC.selected=true;this.downX=(px)?event.clientX:lM.clientX;this.downY=(px)?event.clientY:lM.clientY;this.xa=this.downX;this.xb=this.downY}}if($3kS){this.ao.doc_mousemove=MEvent.bindDom(document,"mousemove",this,this.f9);this.ao.doc_mouseup=MEvent.bindDom(document,"mouseup",this,this.l1);if(px){this.ao.losecapture=MEvent.bindDom(document.body,"losecapture",this,this.l1)}else{this.ao.blur=MEvent.bindDom(window,"blur",this,this.l1)}}};this.f9=function(lM){if($3kS==this.z2.id&&this.z2.selected){this.tR=(px)?event.clientX:lM.clientX;this.tS=(px)?event.clientY:lM.clientY;var lI=(this.tR-this.downX);var lK=(this.tS-this.downY);this.downX=this.tR;this.downY=this.tS;if(this.z2.style.top){this.z2.style.top=(parseInt(this.z2.style.top)+lK)+"px";this.z2.style.left=(parseInt(this.z2.style.left)+lI)+"px"}}else{if($3kS==this.fC.id&&this.fC.selected){this.tR=(px)?event.clientX:lM.clientX;this.tS=(px)?event.clientY:lM.clientY;var lI=(this.tR-this.downX);var lK=(this.tS-this.downY);this.downX=this.tR;this.downY=this.tS;this.w91eO.style.top=(parseInt(this.w91eO.style.top)+lK)+"px";this.w91eO.style.left=(parseInt(this.w91eO.style.left)+lI)+"px";if(this.z3.style.top){this.z3.style.top=(parseInt(this.z3.style.top)+lK)+"px";this.z3.style.left=(parseInt(this.z3.style.left)+lI)+"px";this.z1.style.top=(parseInt(this.z1.style.top)+lK)+"px";this.z1.style.left=(parseInt(this.z1.style.left)+lI)+"px"}}}if(!VyM8&&this.z2.offsetWidth<this.fC.offsetWidth){if(px){document.body.setCapture()}VyM8=nB(this,Gq8,100);M58=nB(this,zL,100)}};this.l1=function(lM){if(this.maplet.sS!=ts.$9f&&this.maplet.sS!=ts.tz&&this.maplet.sS!=ts.tA&&this.maplet.sS!=ts.tv){_66(lM)}if(VyM8){this.maplet.hideBubble();window.clearInterval(VyM8);VyM8=null;window.clearInterval(M58);M58=null;if(px){document.body.releaseCapture()}}if(this.ao.doc_mousemove){MEvent.removeBuiltInListener(document,"mousemove",this.ao.doc_mousemove);this.ao.doc_mousemove=null;MEvent.removeBuiltInListener(document,"mouseup",this.ao.doc_mouseup);this.ao.doc_mouseup=null;if(px){MEvent.removeBuiltInListener(document.body,"losecapture",this.ao.losecapture);this.ao.losecapture=null}else{MEvent.removeBuiltInListener(window,"blur",this.ao.blur);this.ao.blur=null}}if(this.z2.selected){$3kS=null;this.z2.selected=false;var tR=(px)?event.clientX:lM.clientX;var tS=(px)?event.clientY:lM.clientY;if(typeof tR=="undefined"){tR=this.tR}if(typeof tS=="undefined"){tS=this.tS}var lI=(tR-this.xa-cm5UC(this.w91eO.style.left));var lK=(tS-this.xb-cm5UC(this.w91eO.style.top));var lf=-lK*this.xf/this.maplet.imgHeight;var li=lI*this.xg/this.maplet.imgWidth;this.gK=this.maplet.gx+lf;this.gL=this.maplet.gA+li;this.cW=1;this.vh=getTimeout(this,this.vO,20)}else{if(this.fC.selected){$3kS=null;this.fC.selected=false;var tR=(px)?event.clientX:lM.clientX;var tS=(px)?event.clientY:lM.clientY;var lI=-(tR-this.xa);var lK=-(tS-this.xb);var lf=-lK*this.xf/this.maplet.imgHeight;var li=lI*this.xg/this.maplet.imgWidth;this.gK=this.maplet.gx+lf;this.gL=this.maplet.gA+li;this.cW=2;this.vh=getTimeout(this,this.vO,20)}}};var p$m=function(lM){_66(lM)};this.vO=function(){if(this.vh){clearTimeout(this.vh);this.vh=null}if(!this.z3.style.top||!this.z2.style.top){this.maplet.setCenter(this.gK,this.gL,true);this.cW=0;return}var lK=parseInt(this.z2.style.top)-parseInt(this.z3.style.top);var lI=parseInt(this.z2.style.left)-parseInt(this.z3.style.left);var gN=Math.round(lI);var gO=Math.round(lK);if((Math.abs(lI)+Math.abs(lK))>=10){var gN=Math.round(lI*10/(Math.abs(lI)+Math.abs(lK)));var gO=Math.round(lK*10/(Math.abs(lI)+Math.abs(lK)))}if(this.cW==2){if((Math.abs(lI)+Math.abs(lK))==0){this.maplet.setCenter(this.gK,this.gL,true);this.cW=0}else{this.z3.style.top=(parseInt(this.z3.style.top)+gO)+"px";this.z3.style.left=(parseInt(this.z3.style.left)+gN)+"px";this.z1.style.top=(parseInt(this.z1.style.top)+gO)+"px";this.z1.style.left=(parseInt(this.z1.style.left)+gN)+"px";this.vh=getTimeout(this,this.vO,20)}}else{if(this.cW==1){gN=-gN;gO=-gO;if((Math.abs(lI)+Math.abs(lK))==0){this.maplet.setCenter(this.gK,this.gL,true);this.cW=0}else{for(var i in this.pU){if(typeof this.pU[i]=="object"&&(this.pU[i]!=null)){this.pU[i].style.top=(parseInt(this.pU[i].style.top)+gO)+"px";this.pU[i].style.left=(parseInt(this.pU[i].style.left)+gN)+"px"}}this.z2.style.top=(parseInt(this.z2.style.top)+gO)+"px";this.z2.style.left=(parseInt(this.z2.style.left)+gN)+"px";this.vh=getTimeout(this,this.vO,20)}}}};this.pU=new Array();this.yN=null;this.c4=false;this.cl=false;this.sa=new Array();this.nH=function(){if(this.fg&&this.c3){return OVER_WIN_WIDTH}else{return uS}};this.addListener=function(uy){this.sa[uy.id]=uy};this.removeListener=function(uy){this.sa[uy.id]=null};this.uq=function(){for(var pf in this.sa){if(this.sa[pf]&&this.sa[pf].onresize){this.sa[pf].onresize()}}this.maplet.onresize()};this.g1=function(){for(var pf in this.sa){if(this.sa[pf]){this.sa[pf]=null}this.sa=null}this.clearImgs();this.pU=null;for(var l8 in this.ao){try{if(this.ao[l8]!=null){MEvent.removeBuiltInListener(this.fC,l8,this.ao[l8]);this.ao[l8]=null}}catch(lM){}this.ao=null}this.img.overview=null;this.img.onclick=null;this.img.onmousedown=null;this.img.onmouseup=null;this.img.ondblclick=null;this.z2.w0=null;this.z2.f9=null;if(this.vb.parentNode!=null){_removeNode(this.vb)}this.maplet=null};this.onresize=function(){this.j898();this.uq()};this.close=function(){if(this.cl){return}if(typeof this.img=="undefined"){this.c3=oo=false;return}else{if(this.img.style.display=="none"&&this.c3){this.c3=oo=false}}$851.apply(this);this.cl=true;this.yN=getTimeout(this,g25c,10);this.c4=false;this.uq()};this.open=function(){if(typeof this.img=="undefined"){this.c3=oo=true;return}if(this.c4){return}$851.apply(this);this.c4=true;this.yN=getTimeout(this,$cT1,10);this.cl=false};this.qa=function(f2){var An=(px)?0:2;this.img=document.createElement("div");this.img.unselectable="on";this.img.style.position="absolute";this.img.style.zIndex=1000;this.img.overview=this;this.img.style.cursor=(px)?"hand":"pointer";this.img.style.overflow="hidden";this.img.style.display="none";this.A54Y0=document.createElement("img");this.A54Y0.unselectable="on";this.A54Y0.style.position="absolute";this.A54Y0.src=CTLIMG_RESOURCE[0].url;this.A54Y0.style.width=CTLIMG_RESOURCE[0].w+"px";this.A54Y0.style.height=CTLIMG_RESOURCE[0].h+"px";this.A54Y0.v5w="no";if(px){this.img.style.filter="alpha(opacity=0)"}else{this.img.style.opacity="0"}this.img.onmousedown=function(lM){_66(lM||window.event)};this.img.onmouseup=function(lM){this.overview.l1(lM);_66(lM||window.event)};this.img.ondblclick=function(lM){_66(lM||window.event)};this.img.onclick=function(lM){_66(lM||window.event);if(this.overview.c3){this.overview.close()}else{this.overview.open()}};f2.appendChild(this.img);this.img.appendChild(this.A54Y0);f2.appendChild(this.vb);f2.appendChild(this.shadow);this.ao.mousedown=MEvent.bindDom(this.fC,"mousedown",this,this.w0);this.ao.mouseup=MEvent.bindDom(this.fC,"dblclick",this,p$m);this.onresize();if(!this.fg){return}if(oo){this.open()}else{this.close()}};this.clearImgs=function(){for(var i in this.pU){LCG.apply(this,[i])}};var LCG=function(id){try{if(this.pU[id]!=null){_removeNode(this.pU[id]);this.pU[id].onmousedown=null;this.pU[id].onerror=null;this.pU[id].onload=null;this.pU[id]=null;delete this.pU[id]}}catch(lM){}};var S47=function(){for(var i in this.pU){if(this.pU[i]&&!this.pU[i].c2){LCG.apply(this,[i])}}};this.paint=function(){if(!this.c3||!this.fg){return}this.width=OVER_WIN_WIDTH-10;this.height=OVER_WIN_HEIGHT-10;this.gx=this.maplet.gx;this.gA=this.maplet.gA;this.AG=Math.max(Math.max(0,te-2),uW[this.maplet.AG]);this.imgWidth=this.maplet.imgWidth;this.imgHeight=this.maplet.imgHeight;this.xK=this.maplet.xK;if(this.yl!=this.maplet.yl){this.yl=this.maplet.yl;this.clearImgs()}var yk=this.yl;this.z4=Math.ceil((this.width)/(this.imgWidth)/2);this.z5=Math.ceil((this.height)/(this.imgHeight)/2);this.xg=sj[this.AG];this.xf=qP[this.AG];this.sR=sI[this.AG]+"/";this.gD=Math.floor((this.maplet.gA)/this.xg);this.gE=Math.floor((this.maplet.gx)/this.xf);if(this.gD<0){this.gD+=1}this.mapX=this.width/2-Math.round(((this.gA*wp)%(this.xg*wp))*this.imgWidth/(this.xg*wp));if(this.gx>=0){this.mapY=this.height/2-this.imgHeight+Math.round(((this.gx*wp)%(this.xf*wp))*this.imgHeight/(this.xf*wp))}else{this.mapY=this.height/2+Math.round(((this.gx*wp)%(this.xf*wp))*this.imgHeight/(this.xf*wp))}var nL=nM[this.AG];this.sZ=0;this.s1=0;this.tf1=this.width;this.tg=this.height;this.s2=parseInt(this.gD);this.s3=parseInt(this.gE);this.th=parseInt(this.gD);this.ti=parseInt(this.gE);var s8=(360/sj[this.AG]);this.gk=1;this.wT=0;for(var i in this.pU){if(this.pU[i]!=null){this.pU[i].c2=false}}for(qx=-this.z4-1;qx<=this.z4;qx++){for(qz=-this.z5-1;qz<=this.z5;qz++){try{var pM=this.maplet.strImgUrl+"mapbank/"+yk+"/"+this.sR;var qy=parseInt(this.gD+qx);var qA=parseInt(this.gE+qz);qy=(qy)%s8;if(qy>=(s8/2)){qy-=s8}if(qy<(-s8/2)){qy+=s8}var dirx=parseInt(Math.floor((qy)/nL));var diry=parseInt(Math.floor((qA)/nL));if(dirx<0){dirx+=1}if(diry<0){diry+=1}var lh1=(qy)-dirx*nL;var Xci=(qA)-diry*nL;pM+=dirx+"_"+diry+"/";pM+=lh1+"_"+Xci+"."+this.xK;var p1=(qx*this.imgWidth)+parseInt(this.mapX);var p3=(-(qz*this.imgHeight)+parseInt(this.mapY));var p4=p3;if(this.yl!="aerial"&&this.yl.indexOf("aerial")<0){p3=p3+w8[this.AG]}if(p1<-this.imgWidth||p1>this.width||p3>this.height||p3<-this.imgHeight){continue}if(this.sZ<(p1+this.imgWidth)){this.sZ=(p1+this.imgWidth);this.s2=parseInt(this.gD)+parseInt(qx)}if(this.s1<(p3+this.imgHeight)){this.s1=(p3+this.imgHeight);this.ti=parseInt(this.gE)+parseInt(qz)}if(this.tf1>p1){this.tf1=p1;this.th=parseInt(this.gD)+parseInt(qx)}if(this.tg>p3){this.tg=p3;this.s3=parseInt(this.gE)+parseInt(qz)}var xY="__ov_ctrl_"+((this.AG).toString(16)+(this.gD+qx).toString(16)+"l"+(this.gE+qz).toString(16)).toLowerCase();if(pM&&pM.indexOf("NaN")<0){if(this.pU[xY]==null){this.pU[xY]=new Image();this.pU[xY].id=xY;this.pU[xY].name=xY;this.pU[xY].wyq=this.AG+"_"+dirx+"_"+diry+"_"+lh1+"_"+Xci;this.pU[xY].ntry="0";this.pU[xY].unselectable="on";this.pU[xY].style.position="absolute";this.pU[xY].onmousedown=function(){return false};this.pU[xY].v5w="no";this.pU[xY].src=pM}var p2=(p1+this.imgWidth/2-this.width/2)*this.gk-(p3+this.imgHeight/2-this.height/2)*this.wT+this.width/2;var p5=(p1+this.imgWidth/2-this.width/2)*this.wT+(p3+this.imgHeight/2-this.height/2)*this.gk+this.height/2;this.pU[xY].style.top=parseInt(p5-this.imgHeight/2)+"px";this.pU[xY].style.left=parseInt(p2-this.imgWidth/2)+"px";this.pU[xY].c2=true}pM=null;xY=null}catch(lM){}}}for(var i in this.pU){var img=this.pU[i];if(img&&img.c2&&img.parentNode!=this.w91eO){this.w91eO.appendChild(img)}}S47.apply(this);S4Y4F.apply(this);this.w91eO.style.top=this.w91eO.style.left="0px"};var S4Y4F=function(){var Ae=parseInt(this.maplet.width*this.maplet.xg/this.xg);var zZ=parseInt(this.maplet.height*this.maplet.xf/this.xf);if(Ae>this.width&&zZ>this.height){BM2.apply(this,[false])}else{this.z3.style.left=parseInt(this.width-Ae)/2+"px";this.z3.style.top=parseInt(this.height-zZ)/2+"px";this.z3.style.width=(Ae)+"px";this.z3.style.height=(zZ)+"px";this.z1.style.left=parseInt(this.width-Ae)/2+"px";this.z1.style.top=parseInt(this.height-zZ)/2+"px";this.z1.style.width=(Ae)+"px";this.z1.style.height=(zZ)+"px";this.z2.style.left=parseInt(this.width-Ae)/2+"px";this.z2.style.top=parseInt(this.height-zZ)/2+"px";this.z2.style.width=(Ae)+"px";this.z2.style.height=(zZ)+"px";BM2.apply(this,[true])}};var BM2=function(visible){this.z3.style.visibility=visible?"visible":"hidden";this.z1.style.visibility=visible?"visible":"hidden";this.z2.style.visibility=visible?"visible":"hidden"};this.getRect=function(){var r={min:{x:0,y:0},max:{x:0,y:0}};if(typeof this.img!="undefined"){var _MAIf=(this.vb.style.display!="none");var w80=(this.img.style.display!="none");if(_MAIf||w80){var d=this.c3?this.shadow:this.img;r={min:{x:d.offsetLeft,y:d.offsetTop},max:{x:0,y:0}};r.max.x=r.min.x+d.offsetWidth;r.max.y=r.min.y+d.offsetHeight}}return r};var g25c=function(){var _MAIf=(this.vb.style.display!="none");if(this.fg){this.img.style.display=""}this.uq();$851.apply(this);BM2.apply(this,[false]);this.shadow.style.display="none";if(this.fg||_MAIf){with(this.vb.style){if(px){filter="alpha(opacity=100)"}else{opacity="1"}}}if(this.fg){with(this.A54Y0.style){left="-26px";top="-124px"}}with(this.img.style){if(px){filter="alpha(opacity=0)"}else{opacity="0"}}var yw=0,d=10;var p={b:0,c:1};var GAw0={b:0,c:1};function _6e58(){if(yw<d){yw++;if(px){this.vb.style.filter="alpha(opacity="+(100-Vj_vA(yw,p.b,p.c,d)*100)+")";if(this.fg){this.img.style.filter="alpha(opacity="+Vj_vA(yw,GAw0.b,GAw0.c,d)*100+")"}else{this.img.style.filter="alpha(opacity="+(100-Vj_vA(yw,GAw0.b,GAw0.c,d)*100)+")"}}else{this.vb.style.opacity=1-Vj_vA(yw,p.b,p.c,d);if(this.fg){this.img.style.opacity=Vj_vA(yw,GAw0.b,GAw0.c,d)}else{this.img.style.opacity=1-Vj_vA(yw,GAw0.b,GAw0.c,d)}}this.yN=getTimeout(this,_6e58,100)}else{this.vb.style.display="none";this.img.style.display=this.fg?"":"none";this.cl=false;this.c3=false;this.uq()}}_6e58.apply(this)};var $cT1=function(){if(this.vb.style.display!="none"){return}$851.apply(this);BM2.apply(this,[false]);with(this.vb.style){display=this.fg?"":"none";if(px){filter="alpha(opacity=0)"}else{opacity="0"}}with(this.img.style){display=this.fg?"":"none";if(px){filter="alpha(opacity=0)"}else{opacity="0"}}with(this.A54Y0.style){top="-125px";left="-42px"}var yw=0,d=10;var p={b:0,c:1};var GAw0={b:0,c:1};function _6e58(){if(yw<d){yw++;if(px){this.vb.style.filter="alpha(opacity="+Vj_vA(yw,p.b,p.c,d)*100+")";this.img.style.filter="alpha(opacity="+Vj_vA(yw,GAw0.b,GAw0.c,d)*100+")"}else{this.vb.style.opacity=Vj_vA(yw,p.b,p.c,d);this.img.style.opacity=Vj_vA(yw,GAw0.b,GAw0.c,d)}this.yN=getTimeout(this,_6e58,100)}else{if(px){this.vb.style.filter=null}else{this.shadow.style.opacity=1}this.shadow.style.display=this.fg?"":"none";this.c4=false;this.c3=true;this.uq();this.paint()}}_6e58.apply(this)};var $851=function(){if(this.yN){window.clearTimeout(this.yN);this.yN=null}};var Vj_vA=function(yw,b,c,d){if(yw==0){return b}if(yw==d){return b+c}if((yw/=d/2)<1){return c/2*Math.pow(2,10*(yw-1))+b}return c/2*(-Math.pow(2,-10*--yw)+2)+b};this.oJi83=function(location){location=location||{};if(typeof location.type!="number"&&!(location.type==Maplet.LEFT_TOP||location.type==Maplet.LEFT_BOTTOM||location.type==Maplet.RIGHT_TOP||location.type==Maplet.LEFT_BOTTOM)){location.type=Maplet.RIGHT_BOTTOM}if(typeof location.marginx!="number"){location.marginx=6}if(typeof location.marginy!="number"){location.marginy=6}return location};this.setLocation=function(location){this.location=this.oJi83(location);this.j898()};this.resizeTo=function(w,h){if(typeof w!="number"){w=150}else{if(w<100){w=100}else{if(w>210){w=210}}}if(typeof h!="number"){h=140}else{if(h<100){h=100}else{if(h>210){h=210}}}OVER_WIN_WIDTH=w;OVER_WIN_HEIGHT=h;this.onresize();this.paint()};var Cp76=function(){with(this.location){if(type==Maplet.LEFT_TOP){e56k5=marginx;vr4Q=marginy;V5h=e56k5+rh_.b069+4;heN=vr4Q+rh_.$uD4+4}else{if(type==Maplet.LEFT_BOTTOM){e56k5=marginx;vr4Q=this.maplet.height-OVER_WIN_HEIGHT-marginy;V5h=e56k5+rh_.b069+4;heN=vr4Q+OVER_WIN_HEIGHT-uS-rh_.$uD4-1}else{if(type==Maplet.RIGHT_TOP){e56k5=this.maplet.width-OVER_WIN_WIDTH-marginx;vr4Q=marginy;V5h=e56k5+OVER_WIN_WIDTH-uS-rh_.b069-2;heN=vr4Q+rh_.$uD4+4}else{if(type==Maplet.RIGHT_BOTTOM){e56k5=this.maplet.width-OVER_WIN_WIDTH-marginx;vr4Q=this.maplet.height-OVER_WIN_HEIGHT-marginy;V5h=e56k5+OVER_WIN_WIDTH-uS-rh_.b069-2;heN=vr4Q+OVER_WIN_HEIGHT-uS-rh_.$uD4-1}}}}}};this.j898=function(){Cp76.apply(this);with(this.vb.style){width=OVER_WIN_WIDTH+"px";height=OVER_WIN_HEIGHT+"px";left=e56k5+"px";top=vr4Q+"px"}with(this.shadow.style){width=OVER_WIN_WIDTH+rh_.Y9d+"px";height=OVER_WIN_HEIGHT+rh_.Y9d+"px";left=e56k5-rh_.Y9d/2+"px";top=vr4Q-rh_.Y9d/2+"px"}with(this.fC.style){width=OVER_WIN_WIDTH-rh_.b069*2-cm5UC(borderWidth)*2+"px";height=OVER_WIN_HEIGHT-rh_.$uD4*2-cm5UC(borderWidth)*2+"px";left=rh_.b069+"px";top=rh_.$uD4+"px"}with(this.w91eO.style){width=this.fC.style.width;height=this.fC.style.height;top=left="0px"}with(this.img.style){width=uS+"px";height=uS+"px";left=V5h+"px";top=heN+"px"}with(this.A54Y0.style){if(this.c3){top="-125px";left="-42px"}else{left="-26px";top="-124px"}}this.shadow.innerHTML="";if(D2a){for(var i=0;i<this.g6h7W.length;i++){var O_2=document.createElement("div");O_2.unselectable="on";O_2.style.position="absolute";O_2.style.zIndex=i;O_2.style.backgroundColor="black";O_2.setAttribute(j25$O,true);O_2.style.left=i*2+"px";O_2.style.top=i*2+"px";O_2.style.width=(OVER_WIN_WIDTH+(this.g6h7W.length-i)*4+2)+"px";O_2.style.height=(OVER_WIN_HEIGHT+(this.g6h7W.length-i)*4+2)+"px";if(px){O_2.style.filter="alpha(opacity="+this.g6h7W[i]+")"}else{O_2.style.opacity=this.g6h7W[i]/100}this.shadow.appendChild(O_2)}}else{var x=rh_.Y9d/2-rh_.dCo;var y=x;var w=rh_._YK;var h=rh_._YK;var s=['<div style="position:absolute;left:'+x+"px;top:"+y+"px;width:"+w+"px;height:"+h+'px;overflow:hidden;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:-28px;top:-103px;"></div>'];x+=rh_._YK;w=OVER_WIN_WIDTH-rh_._YK+1;h=rh_.dCo;s.push('<div style="position:absolute;left:'+x+"px;top:"+y+"px;width:"+w+"px;height:"+h+'px;overflow:hidden;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:0px;top:-226px;"></div>');x+=w;w=rh_._YK;h=w;s.push('<div style="position:absolute;left:'+x+"px;top:"+y+"px;width:"+w+"px;height:"+h+'px;overflow:hidden;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:-38px;top:-103px;"></div>');x=OVER_WIN_WIDTH+rh_._YK+rh_.dCo;y+=rh_._YK;h=OVER_WIN_HEIGHT-rh_._YK+1;s.push('<div style="position:absolute;left:'+x+"px;top:"+y+"px;width:"+w+"px;height:"+h+'px;overflow:hidden;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:-81px;top:0px;"></div>');x=x-rh_.dCo-1;y+=h;w=rh_._YK;h=w;s.push('<div style="position:absolute;left:'+x+"px;top:"+y+"px;width:"+w+"px;height:"+h+'px;overflow:hidden;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:-38px;top:-113px;"></div>');x=rh_.Y9d/2-rh_.dCo+rh_._YK;y+=rh_.dCo+1;w=OVER_WIN_WIDTH-rh_._YK+1;s.push('<div style="position:absolute;left:'+x+"px;top:"+y+"px;width:"+w+"px;height:"+h+'px;overflow:hidden;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:0px;top:-229px;"></div>');x=rh_.Y9d/2-rh_.dCo;y=y-rh_.dCo-1;w=rh_._YK;h=w;s.push('<div style="position:absolute;left:'+x+"px;top:"+y+"px;width:"+w+"px;height:"+h+'px;overflow:hidden;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:-28px;top:-113px;"></div>');y=rh_.Y9d/2-rh_.dCo+rh_._YK;h=OVER_WIN_HEIGHT-rh_._YK+1;w=rh_.dCo;s.push('<div style="position:absolute;left:'+x+"px;top:"+y+"px;width:"+w+"px;height:"+h+'px;overflow:hidden;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:-78px;top:0px;"></div>');this.shadow.innerHTML=s.join("")}};var Gq8=function(){var rt=VLs.apply(this);var vj=0,vk=0;if(rt.min.x<0){vj=5}if(rt.min.y<0){vk=5}if(rt.max.x>cm5UC(this.fC.style.width)){vj=-5}if(rt.max.y>cm5UC(this.fC.style.height)){vk=-5}if((vj!=0||vk!=0)){this.panTo(vj,vk)}};var VLs=function(){var r={min:{x:this.z2.offsetLeft,y:this.z2.offsetTop},max:{x:0,y:0}};r.max.x=r.min.x+this.z2.offsetWidth;r.max.y=r.min.y+this.z2.offsetHeight;return r};this.panTo=function(x,y){this.w91eO.style.top=cm5UC(this.w91eO.style.top)+y+"px";this.w91eO.style.left=cm5UC(this.w91eO.style.left)+x+"px"};var zL=function(){if(this.fs||this.c0){return}var sP=parseInt(this.w91eO.style.left);var sQ=parseInt(this.w91eO.style.top);if((sP+this.tf1)>=0||(sP+this.sZ-this.width)<=0||(sQ+this.tg)>=0||(sQ+this.s1-this.height)<=0){this.fs=true;zA.apply(this)}};var zA=function(){if(this.fs==false){return}var sP=parseInt(this.w91eO.style.left);var sQ=parseInt(this.w91eO.style.top);if((sP+this.tf1)>=0||(sP+this.sZ-this.width)<=0){if(this.c0==true){return}this.c0=true;var qy=0;var p1=0;if((sP+this.tf1)>=0){this.th--;this.tf1-=parseInt(this.imgWidth);qy=this.th;p1=this.tf1}if((sP+this.sZ-this.width)<=0){this.s2++;p1=this.sZ;this.sZ+=parseInt(this.imgWidth);qy=this.s2}var qx=qy;var nL=nM[this.AG];var s8=parseInt(360/sj[this.AG]);qy=(qy)%s8;if(qy>=(s8/2)){qy-=s8}if(qy<(-s8/2)){qy+=s8}var yk=this.yl;for(var qz=this.ti;qz<=this.s3;qz++){var qA=qz;var p3=(-(qz-this.ti+1)*this.imgHeight)+this.s1;aA.apply(this,[p1,p3,qy,qA,qx,qz,yk])}this.c0=false}if((sQ+this.tg)>=0||(sQ+this.s1-this.height)<=0){if(this.c0==true){return}this.c0=true;var qA=0;var p3=0;if((sQ+this.tg)>=0){this.s3++;this.tg-=parseInt(this.imgHeight);qA=this.s3;p3=this.tg}if((sQ+this.s1-this.height)<=0){this.ti--;p3=this.s1;this.s1+=parseInt(this.imgHeight);qA=this.ti}var qz=qA;var nL=nM[this.AG];var s8=parseInt(360/sj[this.AG]);var yk=this.yl;for(var qx=this.th;qx<=this.s2;qx++){var qy=qx;qy=(qy)%s8;if(qy>=(s8/2)){qy-=s8}if(qy<(-s8/2)){qy+=s8}var p1=((qx-this.th)*this.imgWidth)+this.tf1;aA.apply(this,[p1,p3,qy,qA,qx,qz,yk])}this.c0=false}this.fs=false};var aA=function(p1,p3,qy,qA,qx,qz,yk){var nL=nM[this.AG];var dirx=parseInt(Math.floor((qy)/nL));var diry=parseInt(Math.floor((qA)/nL));if(dirx<0){dirx+=1}if(diry<0){diry+=1}var lh1=(qy)-dirx*nL;var Xci=(qA)-diry*nL;var pM=this.maplet.strImgUrl.replace("img","img"+this.maplet.vI_9(lh1,Xci))+"mapbank/"+yk+"/"+this.sR;var xY="__ov_ctrl_"+((this.AG).toString(16)+qx.toString(16)+"l"+qz.toString(16)).toLowerCase();pM+=dirx+"_"+diry+"/";pM+=lh1+"_"+Xci+"."+this.xK;if(pM&&pM.indexOf("NaN")<0){if(this.pU[xY]==null){this.pU[xY]=new Image();this.pU[xY].id=xY;this.pU[xY].name=xY;this.pU[xY].wyq=this.AG+"_"+dirx+"_"+diry+"_"+lh1+"_"+Xci;this.pU[xY].ntry="0";this.pU[xY].unselectable="on";this.pU[xY].style.position="absolute";this.pU[xY].onmousedown=function(){return false};this.pU[xY].v5w="no";this.pU[xY].src=pM}var p2=(p1+this.imgWidth/2-this.width/2)*this.gk-(p3+this.imgHeight/2-this.height/2)*this.wT+this.width/2;var p5=(p1+this.imgWidth/2-this.width/2)*this.wT+(p3+this.imgHeight/2-this.height/2)*this.gk+this.height/2;this.pU[xY].style.top=parseInt(p5-this.imgHeight/2)+"px";this.pU[xY].style.left=parseInt(p2-this.imgWidth/2)+"px";this.pU[xY].c2=true;this.w91eO.div.appendChild(this.pU[xY]);xY=null}pM=null};this.location=this.oJi83(OVER_LOCATION)}rh_.b069=2;rh_.$uD4=2;rh_.dCo=3;rh_.Y9d=16;rh_._YK=7;function MStandardControl(c,b,a,d){this.x6=(typeof c=="undefined")?"mapbar":c;this.left=(typeof b=="undefined")?0:parseInt(b);this.top=(typeof a=="undefined")?0:parseInt(a);this.fi=(typeof d=="undefined")?0:parseInt(d);this.id=new Date().getTime()+parseInt(Math.random()*1000);this.nR=null;this.initialize=function(e){this.maplet=e;if(this.maplet.gc[this.id]==null){if(!this.fi&&this.maplet.height<300){if(bsc){this.fi=1}}this.maplet.gc[this.id]=this;this.nR=new gb(typeof this.x6!="object"?null:this.x6);this.nR.initialize(this.maplet);if(this.maplet.controlCanvas==null){this.maplet.controlCanvas=this.nR}}};this.remove=function(){this.maplet=null;if(this.nR){if(this.nR==this.maplet.controlCanvas){this.maplet.controlCanvas=null}this.nR.g1();this.nR=null}};this.toString=function(){return"com.mapbar.maplet.MStandardControl"}}function MLookupControl(a,c,b){this.ya=(typeof a=="undefined")?tX("%u62CD%uCB0F%uD02B%uF3C7"):a;this.left=(typeof c=="undefined")?0:parseInt(c);this.top=(typeof b=="undefined")?0:parseInt(b);this.id=new Date().getTime()+parseInt(Math.random()*1000);this.onresize=function(d){if(this.maplet.overview.nF()<=37){this.tY.style.left=(this.maplet.width-132+this.left-this.maplet.overview.nH())+"px"}else{this.tY.style.left=(this.maplet.width-132+this.left)+"px"}};this.initialize=function(d){this.maplet=d;if(this.maplet.gc[this.id]==null){this.maplet.gc[this.id]=this;this.tY=document.createElement("div");this.tY.style.position="absolute";this.onresize(this.maplet);this.tY.style.top=(10+this.top)+"px";this.tY.style.zIndex=10;this.tY.style.visibility="visible";this.tU=document.createElement("img");this.tU.unselectable="on";this.tU.src=strImgsvrUrl+"images/lookup.png";this.tU.alt=this.ya;this.tU.style.cursor="hand";this.tU.style.cursor="pointer";this.tU.vb=this;this.tU.maplet=this.maplet;this.tU.onclick=function(){this.maplet.setMode("lookup");MEvent.trigger(this.vb,"onclick")};this.tY.appendChild(this.tU);this.maplet.vb.appendChild(this.tY)}};this.remove=function(){this.maplet=null;if(this.tY!=null&&this.tY.parentNode!=null){this.tY.parentNode.removeChild(this.tY);this.tY=null;this.tU.maplet=null;this.tU.onclick=null;this.tU=null}};this.toString=function(){return"com.mapbar.maplet.MLookupControl"}}var MContextMenuItem=function(title,fy,unit){this.ao=[];this.title=title;this.callback=(typeof fy=="undefined")?null:fy;this.t6=document.createElement("tr");this.tW=document.createElement("td");this.tW.className="contextmenuitem";this.tW.innerHTML="&nbsp;"+title;if(unit==1){this.tW.style.borderBottom="1px solid #4A799C"}this.t6.appendChild(this.tW);this.t6.style.backgroundColor="#e8f2fd";this.uK=function(lM){this.vb.hide();if(typeof this.callback=="function"&&this.callback){this.callback.apply(null,[this,this.vb.maplet.fP])}else{if(typeof this.callback=="string"&&this.callback){eval(this.callback)}else{MEvent.trigger(this,"select",this.vb.maplet.f8,this.vb.maplet.fP)}}};this.uG=function(lM){this.t6.style.backgroundColor="#d2e1ff"};this.uJ=function(lM){this.t6.style.backgroundColor="#e8f2fd"};this.paint=function(vb){this.vb=vb;this.vb.t8.appendChild(this.t6)};this.toString=function(){return"com.mapbar.maplet.MContextMenuItem"};this.ao.click=MEvent.bindDom(this.t6,"click",this,this.uK);this.ao.mouseover=MEvent.bindDom(this.t6,"mouseover",this,this.uG);this.ao.mouseout=MEvent.bindDom(this.t6,"mouseout",this,this.uJ);this.remove=function(){if(this.vb){this.vb=null}for(var l8 in this.ao){MEvent.removeBuiltInListener(this.t6,l8,this.ao[l8]);delete this.ao[l8]}this.ao=null;if(this.t6){if(this.t6.parentNode){_removeNode(this.t6)}this.t6=null}}};var MContextMenu=function(){this.qt=new Array();this.fns=new Array();this.cPo=null;this.id=new Date().getTime()+parseInt(Math.random()*1000);this.tY=document.createElement("div");this.tY.className="mapcontextmenu";this.t7=document.createElement("table");this.t7.className="contextmenutable";this.t8=document.createElement("tbody");this.t7.appendChild(this.t8);this.tY.appendChild(this.t7);this.initialize=function(a){this.maplet=a;this.maplet.sF.appendChild(this.tY)};this.update=function(){for(var b in this.t8.childNodes){if(typeof this.t8.childNodes[b]=="object"){if(this.t8.childNodes[b].vb!=null){this.t8.childNodes[b].vb=null}this.t8.removeChild(this.t8.childNodes[b])}}for(var a=0;a<this.qt.length;a++){this.qt[a].paint(this)}};this.addItem=function(b,a){if(typeof a=="undefined"){this.qt[this.qt.length]=b}else{a=parseInt(a);this.qt.splice(a,0,b)}this.update()};this.remove=function(){if(typeof this.maplet=="object"&&this.maplet){if(this==this.maplet.xc){this.maplet.xc=null}this.clear();_removeNode(this.tY);this.qt=null;this.maplet=null}};this.removeItem=function(a){if(a<this.qt.length){this.qt[a].remove()}this.qt.splice(a,1);this.update()};this.disableItem=function(b){var a=this.qt[b];if(b<this.qt.length){a.t6.firstChild.style.color="#999999";a.t6.firstChild.style.cursor="default";this.fns[b]=a.ao.click;MEvent.removeBuiltInListener(a.t6,"click",a.ao.click);MEvent.removeBuiltInListener(a.t6,"mouseover",a.ao.mouseover);MEvent.removeBuiltInListener(a.t6,"mouseout",a.ao.mouseout);a.ao.click=MEvent.bindDom(a.t6,"click",a,function(){return false})}};this.enableItem=function(b,c){var a=this.qt[b];if(b<this.qt.length&&typeof this.fns[b]!="undefined"){a.t6.firstChild.style.color="#000000";a.t6.firstChild.style.cursor="pointer";MEvent.removeBuiltInListener(a.t6,"click",a.ao.click);a.ao.click=MEvent.bindDom(a.t6,"click",a,c);a.ao.mouseover=MEvent.bindDom(a.t6,"mouseover",a,a.uG);a.ao.mouseout=MEvent.bindDom(a.t6,"mouseout",a,a.uJ)}};this.modifyItem=function(b,c){var a=this.qt[b];if(b<this.qt.length){a.t6.firstChild.innerHTML=c}};this.clear=function(){for(var a=0;a<this.qt.length;a++){this.qt[a].remove()}this.qt=new Array();this.update()};this.show=function(a,e){this.showPoi(a,e);var b=$(".mapcontextmenu");var d=b.height();var c=b.width();d+e>maplet.height?e-=(d+6):null;c+a>maplet.width?a-=(c+6):null;this.tY.style.left=parseInt(a)+"px";this.tY.style.top=parseInt(e)+"px";this.tY.style.visibility="visible"};this.showPoi=function(a,c){if(px){this.cPo=document.createElement("v:oval");this.cPo.filled="true";this.cPo.style.left=a-3;this.cPo.style.top=c-3;this.cPo.style.width=6;this.cPo.style.height=6;this.cPo.style.position="absolute";var b=document.createElement("v:fill");b.color="red";b.type="gradient";this.cPo.appendChild(b);maplet.a8xh5().appendChild(this.cPo)}else{this.cPo=document.createElementNS("http://www.w3.org/2000/svg","circle");this.cPo.setAttribute("cx",a-1);this.cPo.setAttribute("cy",c-1);this.cPo.setAttribute("r",3);this.cPo.setAttribute("fill","red");maplet.a8xh5().firstChild.appendChild(this.cPo)}this.cPo.setAttribute("id","contentMenuPoi");this.cPo.style.position="absolute";this.cPo.unselectable="on";this.cPo.setAttribute(cV7,"true")};this.hide=function(){this.tY.style.visibility="hidden";var a=document.getElementById("contentMenuPoi");if(a){a.parentNode.removeChild(a)}};this.toString=function(){return"[MapbarContextMenu]"+this.qt.length}};var MSnapshotBox=function(RG3n,style){if(!(RG3n instanceof Maplet)&&!RG3n){throw new Error("parameter para_maplet is invalid Maplet object.")}var x6=(typeof style!="string"||!style)?"":style+"/";var W$25C=SNAPSHOT_SERVER;var IM19=SNAPSHOT_SERVER+"?a=get&";var maplet=RG3n;var V8Db=new Date().getTime();var ao=[];var rd34=strImgsvrUrl+"images/"+x6+"preview.gif";var HAh=strImgsvrUrl+"images/"+x6+"close2.gif";var O8f=strImgsvrUrl+"images/"+x6+"save.gif";var Q812h="MSnapshotSizeTip"+V8Db;var pN6WT=Q812h+"_td";var w802='<table cellpadding="2" cellspacing="0" style="background-color:#0E347F;color:#ff0;font-size:14px;font-family:Arial;-moz-user-select:none;-khtml-user-select:none;user-select:none;" onselectstart="return false;"><tr><td id="'+pN6WT+'"></td></tr></table>';var nX2X=new fD(Q812h,0,0,0,0,false,24,w802,maplet.vb);nX2X.div.style.width="auto";nX2X.div.style.height="auto";var hqBvt="MSnapshotBox"+V8Db;var umG1k='<table width="100%" height="100%" style="border:2px solid #0E347F;-moz-user-select:none;-khtml-user-select:none;user-select:none;" onselectstart="return false;" cellpadding="0" cellspacing="0"><tr><td style="background-color:#FFFFFF;filter:alpha(opacity=30);opacity:0.3;"></td></tr></table>';var R13o1=new fD(hqBvt,0,0,0,0,false,24,umG1k,maplet.vb);R13o1.div.style.overflow="hidden";var j2tO7=73;var J_577=24;kF9="MSnapshotBar"+V8Db;xF3w8="MSnapshotBtn_preview_"+V8Db;G5N55="MSnapshotBtn_download_"+V8Db;lV3np="MSnapshotBtn_cancel_"+V8Db;var r$_n="";if(D2a){r$_n='<table cellspacing="1" style="border:1px solid #06c;background-color:white;"><tr valign="middle" align="center" style="background-color:#FFFFFF;"><td id="'+xF3w8+'" style="width:21px;height:21px;cursor:pointer;" title="\u9884\u89c8"><div style="OVERFLOW: hidden;position:absolute;width:11px;height:11px;left:7px;top:8px;"><img src="'+sX+'" style="position:absolute;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+"px;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+CTLIMG_RESOURCE[0].url+',sizingMethod=scale);left:-36px;top:-141px;"></div></td><td id="'+G5N55+'" style="width:21px;height:21px;cursor:pointer;" title="\u4fdd\u5b58"><div style="position:absolute;overflow:hidden;width:11px;height:11px;left:31px;top:8px;"><img src="'+sX+'" style="position:absolute;left:-49px;top:-141px;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+"px;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+CTLIMG_RESOURCE[0].url+',sizingMethod=scale);"/></div></td><td id="'+lV3np+'" style="width:21px;height:21px;cursor:pointer;" title="\u53d6\u6d88"><div style="OVERFLOW: hidden;position:absolute;width:11px;height:11px;left:54px;top:8px;"><img src="'+sX+'" style="position:absolute;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+"px;left:-25px;top:-141px;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+CTLIMG_RESOURCE[0].url+',sizingMethod=scale);"></div></td></tr></table>'}else{r$_n='<table cellspacing="1" style="border:1px solid #06c;background-color:white;"><tr valign="middle" align="center" style="background-color:#FFFFFF;"><td id="'+xF3w8+'" style="width:21px;height:21px;cursor:pointer;" title="\u9884\u89c8"><div style="OVERFLOW: hidden;position:absolute;width:11px;height:11px;left:7px;top:8px;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+'px;left:-36px;top:-141px;"></div></td><td id="'+G5N55+'" style="width:21px;height:21px;cursor:pointer;" title="\u4fdd\u5b58"><div style="position:absolute;overflow:hidden;width:11px;height:11px;left:31px;top:8px;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:-49px;top:-141px;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+'px;"/></div></td><td id="'+lV3np+'" style="width:21px;height:21px;cursor:pointer;" title="\u53d6\u6d88"><div style="OVERFLOW: hidden;position:absolute;width:11px;height:11px;left:54px;top:8px;"><img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+'px;left:-25px;top:-141px;"></div></td></tr></table>'}var Y5L=new fD(kF9,0,0,0,0,false,24,r$_n,maplet.vb);var vj9="mapbar_snapshot_iframe";var iframe=null;var _8$fV="mapbar_snapshot_frm";var Ol4=null;var gu915=0;var h_D1={x:0,y:0,width:0,height:0,rect:{min:{x:0,y:0},max:{x:0,y:0}}};this.E6vg=false;this.K9J=false;this.show=function(){if(ao.length==0){ao.push(MEvent.bindDom(document.getElementById(kF9),"mousedown",this,MO1_b));ao.push(MEvent.bindDom(document.getElementById(xF3w8),"click",this,f5s));ao.push(MEvent.bindDom(document.getElementById(G5N55),"click",this,QiS));ao.push(MEvent.bindDom(document.getElementById(lV3np),"click",this,function(){maplet.setMode("pan");document.getElementById("mSnap").className=""}))}C959();this.hide();R13o1.show();nX2X.show()};this.hide=function(){var l8=E49(this.hide);if(typeof l8!="undefined"&&l8){if(l8.type=="click"){var target=typeof l8.target!="undefined"?l8.target:l8.srcElement;var id=target.parentNode.id+target.id;if(id==lV3np){MEvent.trigger(maplet,"snapshot_done","cancel")}else{if(id==xF3w8){MEvent.trigger(maplet,"snapshot_done","preview")}else{if(id==G5N55){MEvent.trigger(maplet,"snapshot_done","download")}}}if(typeof snapshotClick!="undefined"){snapshotClick=1;document.getElementById("mSnap").className=""}}}c2V0();Y5XL();A560N()};var c2V0=function(){R13o1.hide();R13o1.resize(0,0)};var Y5XL=function(){nX2X.hide();nX2X.moveTo(-1000,-1000)};var A560N=function(){Y5L.hide();Y5L.resize(0,0)};this.moveTo=function(x,y){R13o1.moveTo(x,y);var R10H=y-nX2X.div.firstChild.clientHeight-2;nX2X.moveTo(x,R10H);if(y-nX2X.div.offsetHeight<0){nX2X.moveTo(x+3,R10H+nX2X.div.offsetHeight+5)}};this.resize=function(w,h){w=w<0?0:w;h=h<0?0:h;R13o1.resize(w,h);this.TK0_8(w+" x "+h)};this.TK0_8=function(text){document.getElementById(pN6WT).innerHTML=text};this.isVisible=function(){return document.getElementById(hqBvt).style.visibility!="hidden"?true:false};this.evL=function(){this.E6vg=true;nI4QI();var x=h_D1.x+h_D1.width-j2tO7-3;var y=h_D1.y+h_D1.height+2;if(y+J_577>maplet.height){y-=J_577+6}Y5L.resize(j2tO7,J_577);Y5L.moveTo(x,y);Y5L.show();maplet.d7q("pointer",document.getElementById(xF3w8));maplet.d7q("pointer",document.getElementById(G5N55));maplet.d7q("pointer",document.getElementById(lV3np));MEvent.trigger(maplet,"snapshot_select",{x:h_D1.x,y:h_D1.y,width:h_D1.width,height:h_D1.height})};this.snapshot=function(options){if(typeof options!="object"){options={}}if(typeof options.mode!="string"||(options.mode!="fullscreen"&&options.mode!="custom")){options.mode=SNAPSHOT_OPTIONS.mode}if(typeof options.x=="undefined"||isNaN(options.x)){options.x=0}if(typeof options.y=="undefined"||isNaN(options.y)){options.y=0}if(typeof options.width=="undefined"||isNaN(options.width)){options.width=maplet.width}if(typeof options.height=="undefined"||isNaN(options.height)){options.height=maplet.height}if(typeof options.zoom=="undefined"||isNaN(options.zoom)){options.zoom=maplet.getZoomLevel()}if(typeof options.format!="string"){options.format=SNAPSHOT_OPTIONS.format}if(typeof options.depth=="undefined"||isNaN(options.depth)){options.depth=SNAPSHOT_OPTIONS.depth}if(options.processMode!="string"&&(options.processMode!="event"&&options.processMode!="download")){options.processMode=SNAPSHOT_OPTIONS.processMode}nI4QI.apply(this,[options]);C1Y1.apply(this,[options])};var C1Y1=function(options){var D91=kJ84();if(D91.length<=0){return}var n67A9={};n67A9.T9V76=[];n67A9.point="";n67A9.p5C="";n67A9.area="";n67A9.min="0,0";n67A9.max=h_D1.width+","+h_D1.height;n67A9.width=h_D1.width;n67A9.height=h_D1.height;n67A9.zoom=typeof options.zoom=="undefined"?maplet.getZoomLevel():options.zoom;n67A9.format=typeof options.format=="undefined"?SNAPSHOT_OPTIONS.format:options.format;n67A9.depth=typeof options.depth=="undefined"?SNAPSHOT_OPTIONS.depth:options.depth;n67A9.processMode=typeof options.processMode=="undefined"?SNAPSHOT_OPTIONS.processMode:options.processMode;n67A9.d6PN7="";n67A9.P6A05="";var C91_2=new RegExp(SNAPSHOT_MAPIMG_URI_PREFIX,"ig");for(var i=0;i<D91.length;i++){var x=parseInt(D91[i].style.left)-h_D1.x;var y=parseInt(D91[i].style.top)-h_D1.y;var Cix=(n67A9.zoom>=12&&n67A9.zoom<=13)?","+D91[i].id:"";n67A9.T9V76.push(D91[i].src.replace(C91_2,"").replace(".png","")+","+x+","+y+Cix)}n67A9.T9V76=n67A9.T9V76.join("|");var KP8=getMarkers();if(KP8.length>0){n67A9.point=[];C91_2=new RegExp(SNAPSHOT_MARKER_URI_PREFIX,"ig");for(var i=0;i<KP8.length;i++){var JvT9=KP8[i];var x=JvT9.x-h_D1.x;var y=JvT9.y-h_D1.y;n67A9.point.push(x+"@"+y+","+JvT9.text+","+JvT9.V5aK0+","+JvT9.O8RW2+","+JvT9.iStr+","+JvT9.iType+","+JvT9.src.replace(C91_2,""))}n67A9.point=n67A9.point.join("|")}var vw=getPolylines();if(vw.length>0){n67A9.p5C=[];n67A9.area=[];for(var i=0;i<vw.length;i++){var pt7=[];var pts=vw[i].pts;for(var nC052=0;nC052<pts.length;nC052++){pt7.push((pts[nC052].mapX-h_D1.x)+"@"+(pts[nC052].mapY-h_D1.y))}var brush=vw[i].brush;if(vw[i].brush.fill){n67A9.area.push(pt7.join(",")+";"+K7m(brush.bgcolor)+";"+(parseFloat(brush.bgtransparency)/100)+";"+K7m(brush.color)+";"+brush.stroke+";"+brush.style+";"+(parseFloat(brush.transparency)/100))}else{n67A9.p5C.push(pt7.join(",")+";"+K7m(brush.color)+";"+brush.stroke+";"+brush.style+";"+(parseFloat(brush.transparency)/100))}}if(n67A9.p5C.length>0){n67A9.p5C=n67A9.p5C.join("|")}else{n67A9.p5C=""}if(n67A9.area.length>0){n67A9.area=n67A9.area.join("|")}else{n67A9.area=""}}var d6PN7=getEllipse();if(d6PN7.length>0){n67A9.d6PN7=[];for(var i=0;i<d6PN7.length;i++){var item=d6PN7[i];var brush=item.d6PN7.brush;n67A9.d6PN7.push((item.qx-h_D1.x)+"@"+(item.qz-h_D1.y)+","+item.L34+"px,"+item.OO3+"px,"+K7m(brush.bgcolor)+","+(parseFloat(brush.bgtransparency)/100)+","+K7m(brush.color)+","+brush.stroke+","+brush.style+","+(parseFloat(brush.transparency)/100))}if(n67A9.d6PN7.length>0){n67A9.d6PN7=n67A9.d6PN7.join("|")}else{n67A9.d6PN7=""}}var v8B=getRoundRect();if(v8B.length>0){n67A9.P6A05=[];for(var i=0;i<v8B.length;i++){var item=v8B[i];var brush=item.P6A05.brush;n67A9.P6A05.push((item.qx-h_D1.x)+"@"+(item.qz-h_D1.y)+","+(item.y144d-h_D1.x)+"@"+(item.SE6KN-h_D1.y)+","+item.n_E+","+item.y69+","+K7m(brush.bgcolor)+","+(parseFloat(brush.bgtransparency)/100)+","+K7m(brush.color)+","+brush.stroke+","+brush.style+","+(parseFloat(brush.transparency)/100))}if(n67A9.P6A05.length>0){n67A9.P6A05=n67A9.P6A05.join("|")}else{n67A9.P6A05=""}}lkgon.apply(this,[n67A9])};var oId5=function(){if(gu915>=3){return}var taskId=Ol4.taskId.value;if(typeof _snapshot_result=="object"&&_snapshot_result){if(_snapshot_result.url!="inexistence"){switch(_snapshot_result.processMode){case"event":case"preview":window.open(_snapshot_result.url,"newwindow");break;default:break}return}}window.setTimeout(function(i7D0){return function(){gu915++;new i96(IM19+"taskId="+taskId,function(){oId5.apply(i7D0)}).V96Xw()}}.apply(this,[this]),1000)};var K7m=function(color){if(color.substring(0,3).toLowerCase()=="rgb"){return color.replace(new RegExp(",","g"),"@")}return color};var f5s=function(){this.hide();var options={};options.processMode="preview";C1Y1.apply(this,[options]);maplet.setMode("pan")};var QiS=function(){this.hide();var options={};options.processMode="download";C1Y1.apply(this,[options]);maplet.setMode("pan")};var MO1_b=function(lM){_66(lM)};var kJ84=function(){var v6=[];var K30R5=maplet.sE.div.childNodes;for(var i=0;i<K30R5.length;i++){var img=K30R5[i];var u090=parseInt(img.style.left);var S03=parseInt(img.style.top);if(_isRectint(h_D1.rect,{min:{x:u090,y:S03},max:{x:u090+maplet.imgWidth,y:S03+maplet.imgHeight}})){v6.push(img)}}return v6};var getMarkers=function(){var v6=[];var C00=maplet.getMarkers();if(C00.length>0){for(var i=0;i<C00.length;i++){if(!C00[i].icon){continue}if(!C00[i].icon.isVisible()){continue}var J4i=C00[i];var icon=J4i.icon;var $l839=0,cMPC=0,vuR81=0,AWYVA=0;var Rs74=0,r_4B=0;Rs74=$l839=parseInt(icon.div.style.left);r_4B=cMPC=parseInt(icon.div.style.top);vuR81=icon.div.clientWidth;AWYVA=icon.div.clientHeight;var D9q7="",sgA="",X2J="";if(C00[i].label){var RG92=J4i.label;D9q7=RG92.getText();sgA=parseInt(RG92.div.style.left);X2J=parseInt(RG92.div.style.top);var okHV=RG92.div.clientWidth;var V934$=RG92.div.clientHeight;if(sgA<$l839){$l839=sgA}if(X2J<cMPC){cMPC=X2J}if((sgA+okHV)>($l839+vuR81)){vuR81=sgA+okHV}if((X2J+V934$)>(cMPC+AWYVA)){AWYVA=X2J+V934$}}if(_isRectint(h_D1.rect,{min:{x:$l839,y:cMPC},max:{x:$l839+vuR81,y:cMPC+AWYVA}})){v6.push({x:Rs74,y:r_4B,src:icon.getImgUrl(),text:D9q7,V5aK0:C00[i].label?C00[i].label.xoffset:0,O8RW2:C00[i].label?C00[i].label.yoffset:0,sW:C00[i],iType:icon.iType,iStr:(icon.iStr==undefined)?"":icon.iStr})}}}return v6};var getPolylines=function(){var v6=[];var vw=maplet.getPolylines();if(vw.length>0){for(var i=0;i<vw.length;i++){var pts=vw[i].pts;var a$X53=false;for(var nC052=0;nC052<pts.length;nC052++){var R8o$x=pts[nC052].mapX;var R8o$y=pts[nC052].mapY;if(_isInsideRect({x:R8o$x,y:R8o$y},h_D1.rect)){a$X53=true;break}if(nC052>0){var R8o$Oq3_M=pts[nC052-1].mapX;var R8o$o166=pts[nC052-1].mapY;var DOoV={start:{x:h_D1.rect.max.x,y:h_D1.rect.max.y},end:{x:h_D1.rect.max.x,y:h_D1.rect.min.y}};var JQt={start:{x:R8o$Oq3_M,y:R8o$o166},end:{x:R8o$x,y:R8o$y}};if(_IsIntersect(DOoV,JQt)){a$X53=true;break}DOoV={start:{x:h_D1.rect.max.x,y:h_D1.rect.min.y},end:{x:h_D1.rect.min.x,y:h_D1.rect.min.y}};if(_IsIntersect(DOoV,JQt)){a$X53=true;break}DOoV={start:{x:h_D1.rect.min.x,y:h_D1.rect.min.y},end:{x:h_D1.rect.min.x,y:h_D1.rect.max.y}};if(_IsIntersect(DOoV,JQt)){a$X53=true;break}DOoV={start:{x:h_D1.rect.min.x,y:h_D1.rect.max.y},end:{x:h_D1.rect.max.x,y:h_D1.rect.max.y}};if(_IsIntersect(DOoV,JQt)){a$X53=true;break}}}if(!a$X53&&vw[i].brush.fill){var k4XlB=vw[i].pts;var a1B2=[];for(var nC052=0;nC052<k4XlB.length;nC052++){a1B2.push({x:k4XlB[nC052].mapX,y:k4XlB[nC052].mapY})}var N85F=[{x:h_D1.rect.max.x,y:h_D1.rect.max.y},{x:h_D1.rect.max.x,y:h_D1.rect.min.y},{x:h_D1.rect.min.x,y:h_D1.rect.min.y},{x:h_D1.rect.min.x,y:h_D1.rect.max.y}];for(var nC052=0;nC052<a1B2.length;nC052++){if(_isInsidePolygon(a1B2[nC052],N85F)){a$X53=true}}if(!a$X53){for(var nC052=0;nC052<N85F.length;nC052++){if(_isInsidePolygon(N85F[nC052],a1B2)){a$X53=true}}}}if(a$X53){v6.push(vw[i])}}}return v6};var getEllipse=function(){var v6=[];var d6PN7=maplet.getEllipse();if(d6PN7.length>0){for(var i=0;i<d6PN7.length;i++){var item=d6PN7[i];var e4J={min:{x:item.data.qx,y:item.data.qz},max:{x:item.data.y144d,y:item.data.SE6KN}};if(_isRectint(h_D1.rect,e4J)){v6.push({qx:e4J.min.x,qz:e4J.min.y,L34:item.data.L34,OO3:item.data.OO3,d6PN7:item})}}}return v6};var getRoundRect=function(){var v6=[];var v8B=maplet.getRoundRect();if(v8B.length>0){for(var i=0;i<v8B.length;i++){var item=v8B[i];var e4J={min:{x:item.Mrq52.mapX,y:item.Mrq52.mapY},max:{x:item.APVp0.mapX,y:item.APVp0.mapY}};if(_isRectint(h_D1.rect,e4J)){v6.push({qx:e4J.min.x,qz:e4J.min.y,y144d:e4J.max.x,SE6KN:e4J.max.y,n_E:parseInt(item.width*item.arcsize)*2,y69:parseInt(item.height*item.arcsize)*2,P6A05:item})}}}return v6};var Y4579=function(xKLTf){var V50X=null;if(px){V50X=document.createElement("<input name='"+xKLTf+"'>")}else{V50X=document.createElement("input");V50X.name=xKLTf}V50X.type="hidden";return V50X};var lkgon=function(max5){try{gu915=0;if(typeof _snapshot_result=="object"&&_snapshot_result){_snapshot_result=null}if(!iframe){if(px){iframe=document.createElement("<IFRAME name='"+vj9+"'>")}else{iframe=document.createElement("IFRAME");iframe.name=vj9}iframe.id=vj9;iframe.frameBorder="0";iframe.style.width="0px";iframe.style.height="0px";iframe.style.zIndex=-1;maplet.vb.appendChild(iframe);var _01FB=function(i7D0){return function(){b476.apply(i7D0)}};if(px){iframe.attachEvent("onreadystatechange",_01FB(this))}else{iframe.addEventListener("load",_01FB(this),false)}Ol4=document.createElement("FORM");Ol4.id=_8$fV;Ol4.method="POST";Ol4.target=vj9;Ol4.action=W$25C;maplet.vb.appendChild(Ol4);Ol4.appendChild(Y4579("mapimgs"));Ol4.appendChild(Y4579("max"));Ol4.appendChild(Y4579("min"));Ol4.appendChild(Y4579("size"));Ol4.appendChild(Y4579("markers"));Ol4.appendChild(Y4579("polylines"));Ol4.appendChild(Y4579("polygons"));Ol4.appendChild(Y4579("format"));Ol4.appendChild(Y4579("depth"));Ol4.appendChild(Y4579("processMode"));Ol4.appendChild(Y4579("taskId"));Ol4.appendChild(Y4579("codeform"));Ol4.appendChild(Y4579("zoom"));Ol4.appendChild(Y4579("ellipse"));Ol4.appendChild(Y4579("roundrect"))}Ol4.mapimgs.value=max5.T9V76;Ol4.max.value=max5.max;Ol4.min.value=max5.min;Ol4.size.value=max5.width+"x"+max5.height;Ol4.markers.value=max5.point;Ol4.polylines.value=max5.p5C;Ol4.polygons.value=max5.area;Ol4.format.value=max5.format;Ol4.depth.value=max5.depth;Ol4.processMode.value=max5.processMode;Ol4.taskId.value=new Date().getTime();Ol4.codeform.value="1";Ol4.zoom.value=max5.zoom;Ol4.ellipse.value=max5.d6PN7;Ol4.roundrect.value=max5.P6A05;if(!px){Ol4.target=vj9}Ol4.submit()}catch(nc){iframe=null;Ol4=null}};var b476=function(){if(px&&iframe.readyState!="complete"){return}oId5.apply(this)};var nI4QI=function(options){if(typeof options=="undefined"){with(h_D1){x=parseInt(R13o1.div.style.left);y=parseInt(R13o1.div.style.top);width=R13o1.div.clientWidth;height=R13o1.div.clientHeight}}else{if(options.mode=="fullscreen"){options.width=maplet.width;options.height=maplet.height}with(h_D1){x=options.x;y=options.y;width=options.width;height=options.height}}with(h_D1){rect={min:{x:x,y:y},max:{x:x+width,y:y+height}}}};var C959=function(){with(h_D1){x=0;y=0;width=0;height=0;rect=null}};this.finalize=function(){for(var i=0;i<ao.length;i++){MEvent.removeBuiltInListener(ao[i]);ao[i]=null}ao=null;maplet.vb.removeChild(nX2X.div);nX2X=null;maplet.vb.removeChild(R13o1.div);R13o1=null;maplet.vb.removeChild(Y5L.div);Y5L=null;maplet.vb.removeChild(iframe);iframe=null;maplet.vb.removeChild(Ol4);Ol4=null;maplet=null};this.toString=function(){return"com.mapbar.maplet.MSnapshotBox"}};var MIconShadow=function(c,d,b,a,e){this.$b1=0;this.div=document.createElement("div");this.div.unselectable="on";this.div.style.zIndex=this.$b1;this.div.style.position="absolute";d=(typeof d=="undefined")?16:d;b=(typeof b=="undefined")?16:b;this.img=(D2a)?document.createElement("v:Image"):new Image();this.img.unselectable="on";this.img.style.MozUserSelect="none";this.img.style.zIndex=this.$b1;this.img.style.position="absolute";this.img.style.top="0px";this.img.style.left="0px";this.img.setAttribute(cV7,"true");this.img.src=(typeof c=="undefined")?strImgsvrUrl+"images/Shadow.png":c;this.div.appendChild(this.img);this.width=(typeof d=="undefined")?parseInt(this.img.width):parseInt(d);this.height=(typeof b=="undefined")?parseInt(this.img.height):parseInt(b);this.img.style.width=this.width+"px";this.img.style.height=this.height+"px";this.div.style.width=this.width+"px";this.div.style.height=this.height+"px";this.anchorX=this.width/2;this.anchorY=this.height/2;this.anchorX=parseInt((typeof a=="undefined")?this.anchorX-16:this.anchorX+a);this.anchorY=parseInt((typeof e=="undefined")?this.anchorY:this.anchorY+e);this.left=0;this.top=0;this.wz=function(f){this.div.id="mk_shadow_c_"+f;this.img.id="mk_shadow_"+f};this.initialize=function(f){this.sW=f;if(px){this.img.ondragstart=function(){return false}}this.img.onmousedown=function(){return false}};this.update=function(g,j,i){if(this.sW.autoHide&&!this.sW.icon.isVisible()){if(this.div.parentNode){this.div.parentNode.removeChild(this.div);this.fu=false}}else{var f=parseInt(j)-parseInt(this.anchorX);var h=parseInt(i)-parseInt(this.anchorY);if(this.div.parentNode!=g.lA.div&&!this.sW.ls){g.lA.appendChild(this.div);this.div.style.width=this.width+"px";this.div.style.height=this.height+"px";this.img.style.width=this.width+"px";this.img.style.height=this.height+"px";this.fu=true}this.div.style.top=h+"px";this.div.style.left=f+"px";this.top=h;this.left=f}};this.isVisible=function(){return(this.fu)};this.zq=function(){return(this.img.src)+","+this.width+","+this.height};this.hilite=function(){if(this.div){if(this.div.style.zIndex<pF){pF++}this.setZIndex(pF)}};this.finalize=function(){this.remove(true)};this.remove=function(f){if(typeof f!="boolean"){f=false}if(this.img){if(px){this.img.ondragstart=null}this.img.onmousedown=null}if(this.div){if(!f){if(this.div.parentNode){this.div.parentNode.removeChild(this.div)}}else{_removeNode(this.div);this.div=null}}if(f){this.sW=null}};this.setZIndex=function(f){if(this.div&&this.div.parentNode&&f!=this.div.style.zIndex){this.$b1=this.div.style.zIndex;this.div.style.zIndex=f}};this.kP$D=function(){if(!this.div){return}if(this.$b1!=this.div.style.zIndex){this.setZIndex(this.$b1)}};this.toString=function(){return"com.mapbar.maplet.MIconShadow"}};window.MVersion={version:"31.2",build:"0908141554"};var Maplet=function(m,b,e,k,d,g,f,i,l){if(px){try{document.execCommand("BackgroundImageCache",false,true)}catch(c){}}this.downX=0;this.downY=0;this.tR=0;this.tS=0;this.fS=0;this.fT=0;this.offsetX=0;this.offsetY=0;ac=new Date();this.imgWidth=300;this.imgHeight=300;this.clickToCenter=true;this.a5Y={};this.customInfoWindow=false;this.N31=false;this.edj5=false;this.Y$_8=null;this.ClPI=null;this.c970q=null;this.GK04=null;this.c35=[];cWK3U=[];this._61="";this.asli=-1;this.$iX=-1;this.wUW="";this.v13E={f2:null,_06:[],yN:null,xd:0.12,fJ8:4,H1n3:1,interval:100,qD9:{width:85,height:68},_8bh:{width:35,height:27}};this.A4b={fC:null,width:16,height:16,offsetY:5,tU70:3,AqW:4,uX:null};this.tXT0b=-1;this.a2q=false;this.T9087=true;this.K33=false;this.w02=bpp[0];this.traffic=null;this.t8Q_=true;this.DOw0s=5;this.markerDragAnimation=true;this.qS={};this.layerData={};this.N949c={width:41,height:20};this._1_={width:0,height:0};this.$BQ=null;this.allowDrawingDragMap=true;this.Y7d32=true;this.bV8=false;this.sS=ts.ty;this.id="mapbar";this.yt=((new Date().getTime())%86400000).toString(36)+(parseInt(Math.random()*1000)).toString(36);if(typeof strRemoteIP!="undefined"&&strRemoteIP){this.yt+="*"+strRemoteIP}document["mapbar-maplet"]=this;this.left=(typeof g=="undefined")?0:parseInt(g);this.top=(typeof f=="undefined")?0:parseInt(f);this.width=(typeof k=="undefined")?600.00001:parseInt(k);this.height=(typeof d=="undefined")?400.00001:parseInt(d);if(isNaN(parseFloat(m))||(typeof m=="string"&&m.length>3&&m.substring(0,3).toLowerCase()=="inf")){this.id=m;this.vb=(typeof m=="object")?m:document.getElementById(m);if(b!=null&&b!="undefined"){var a=cq.vp(b);this.gx=Math.min(sy[1],Math.max(sy[0],parseFloat(a[1])));this.gA=Math.min(sz[1],Math.max(sz[0],parseFloat(a[0])%360));a=null}if(typeof this.vb!="undefined"&&this.vb!=null){if(!this.vb.style.zIndex){this.vb.style.zIndex=0}this.left=0;this.top=0;if(this.vb.style.left){this.left=parseInt(this.vb.style.left)}if(this.vb.style.top){this.top=parseInt(this.vb.style.top)}if(this.vb.style.width){this.width=parseInt(this.vb.style.width)}if(this.vb.style.height){this.height=parseInt(this.vb.style.height)}}}else{this.gA=b;this.gx=m}this.strImgUrl=strImgsvrUrl;this.AG=(typeof e=="undefined")?0:parseInt(e);this.nT=0;this.py=0;this.rotation=0;this.gk=Math.cos(this.rotation/180*Math.PI);this.wT=Math.sin(this.rotation/180*Math.PI);this.yv=(i=="undefined")?"":i;this.pU=new Array();this.qE=new Array();this.yl=(typeof l=="undefined"||l==null)?ds:l;this.u2=null;this.u3="";this.xK="png";this.xw=this.yl;this.yh="";this.x4=this.yl;this.x3=null;this.uu=null;this.xX=this.yl;this.pJ=null;this.biTb=[["",1],[2,3]];this.bp=true;this.ff=false;this.fe=true;this.sf=null;this.fj=(typeof bDefaultControlOn=="undefined")?true:bDefaultControlOn;this.fa=false;this.z4=Math.ceil((this.width)/(this.imgWidth)/2);this.z5=Math.ceil((this.height)/(this.imgHeight)/2);this.aO=new Array();this.aN=new Array();this.yG=new Array();this.fp=null;this.pU=new Array();this.aE=new Array();this.aF=null;this.aG=null;this.aH=null;this.zy=null;this.tG=null;this.brush=new MBrush("#FF0000",2);this.sv=0;this.fo=false;this.gJ=null;this.gI=new Image();this.c8=new MBound(0,0,0,0);this.cH=false;this.c0=false;this.w3=new Array();this.cI=true;this.cn=false;this.gc=[];this.u5=[];this.vA=this.sS;this.fs=false;this.c9=false;this.G2p=null;this.tD=0;this.gM=1;this.xc=null;this.mapContextMenu=null;this.overview=new rh_(this);this.ovw=this.overview;this.wK=new Array();if(typeof this.vb=="undefined"||this.vb==null){document.writeln('<div unselectable="on" id="'+this.id+'" style="position:absolute;overflow:hidden; width:'+this.width+"px; height:"+this.height+"px; left:"+this.left+"px; top:"+this.top+'px;"></div>');this.vb=q1(this.id)}else{this.vb.style.overflow="hidden"}this.map=this.vb;if(this.map){this.map.setAttribute("align","left");if(this.map.style.position!="absolute"){this.map.style.position="relative"}var j="http://www.mapbar.com/ApiCopyrightLink.html?referrer="+window.location.host;this.rH8=document.createElement("div");this.rH8.style.width=this.N949c.width+"px";this.rH8.style.height=this.N949c.height+"px";this.rH8.style.overflow="hidden";this.rH8.innerHTML="<img src='"+CTLIMG_RESOURCE[0].url+"' style='position:absolute;width:"+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+"px;left:-25px;top:-158px' />";this.rH8.id="ImgCopyright";this.rH8.style.position="absolute";this.rH8.style.zIndex=3;this.rH8.style.top=(this.height-22)+"px";this.rH8.setAttribute("whohide","");this.rH8.style.cursor="pointer";this.rH8.onclick=function(){window.open(j)};this.E088=document.createElement("a");this.E088.setAttribute("target","_blank");this.E088.setAttribute("href","http://www.navinfo.com.cn");this.E088.innerHTML="&copy;&nbsp;NavInfo";this.E088.style.position="absolute";this.E088.style.zIndex=3;this.E088.style.fontSize="12px";this.E088.style.color="blue";this.E088.style.fontFamily="arial";this.E088.style.textDecoration="none";this.E088.style.top=(this.height-25)+"px";this.E088.style.left=(this.width-70)+"px";this.E088.style.background="none";this.P01=0;this.map.appendChild(this.rH8);this.map.appendChild(this.E088);this._1_.width=this.E088.offsetWidth;this._1_.height=this.E088.offsetHeight}vZ(this);this._G9f=false;this.DllQ7=false;this.uw=0;this.t9=0;this.xe=10;if(bp){this.setOverlay("base")}this.fM=null;this.AY=0.2;this.AS=-1;this.AT=0;this.AZ=null;this.vg=20;this.vh=null;this.Ah=null;this.vc=0;this.vd=0;this.vi=0;this.tB={zoomin:1,zoomout:2,pan:3,erase:13,edit:23,lookup:5,bookmark:6,drawline:9,drawarea:10,measure:11,measarea:15,snapshot:24}};Maplet.MICON_IMGSRC_FLAG="imgsrc";Maplet.MLABEL_TEXT_FLAG="lbltext";Maplet.LEFT_TOP=1;Maplet.LEFT_BOTTOM=2;Maplet.RIGHT_TOP=3;Maplet.RIGHT_BOTTOM=4;Maplet.prototype={onresize:function(){this.K3KA();this.$esX2()},K3KA:function(){var v5_2={w:0,h:this.N949c.height};if(this.rH8.style.display!="none"){v5_2.w=v5_2.w+this.N949c.width+5}if(this.t8Q_){v5_2.w=v5_2.w+this._1_.width+5}var k5wnI=this.width;if(this.controlCanvas&&this.controlCanvas.options.location.type==Maplet.RIGHT_BOTTOM){k5wnI=k5wnI-this.controlCanvas.getRect().width}if(this.overview.location.type==Maplet.RIGHT_BOTTOM){var V3O=this.overview.getRect();if(k5wnI>=V3O.min.x&&V3O.min.x!=0){k5wnI=V3O.min.x;if((this.width-V3O.max.x>=v5_2.w)||(this.height-V3O.max.y>=v5_2.h)){k5wnI=this.width}}}var QbLl5=this.t8Q_?this._1_.width:0;var co92=this.t8Q_?cm5UC(this.E088.style.left):k5wnI;if(this.t8Q_){with(this.E088.style){left=k5wnI-QbLl5-5+"px";top=(this.height-23)+"px";co92=this.t8Q_?cm5UC(left):k5wnI}}with(this.rH8){if(style.display!="none"){style.left=co92-offsetWidth-5+"px";style.top=(this.height-26)+"px"}}},nI:function(){if(!this.ff){return null}if(this.AP==null){this.AP=new AO(this,-1,this.width-16,0,16,this.height,this.ff,this.vb)}return this.AP},wP:function(d){if(measureClick==1){maplet.setMode("pan");measureClick=0;return false}else{if(snapshotClick==2){MEvent.trigger(maplet,"snapshot_done","cancel");maplet.setMode("pan");snapshotClick=1;document.getElementById("mSnap").className="";maplet.setCursorStyle("default",pj_lf+"images/openhand.cur");return false}}MEvent.trigger(this,"contextmenu");var b=document["mapbar-maplet"];MEvent.trigger(b,"contextmenu");var e=(px)?event.srcElement.id:d.target.id;var f=(px)?event.srcElement:d.target;var c=parseInt((px)?event.clientX:d.clientX)-b.offsetX;var a=parseInt((px)?event.clientY:d.clientY)-b.offsetY;b.l6=e;b.f8=e;b.fS=c-b.left;b.fT=a-b.top;b.fR=b.zp(b.fS,b.fT);b.fO=b.zo(b.fS,b.fT);cq.lf=b.fO;cq.li=b.fR;b.fP=cq.zn();if(b.xc){b.xc.hide()}if(typeof f.contextmenu!="undefined"&&f.contextmenu!=null){b.xc=f.contextmenu;f.contextmenu.show(b.fS,b.fT)}else{if(b.mapContextMenu!=null){b.xc=b.mapContextMenu;b.mapContextMenu.show(b.fS,b.fT)}}return false},getContextMenu:function(){return this.mapContextMenu},setContextMenu:function(a){if(this.mapContextMenu!=a){this.removeContextMenu()}this.mapContextMenu=a;if(this.mapContextMenu!=null){this.mapContextMenu.initialize(this)}},setStandardContextMenu:function(a){this.xc=a},removeContextMenu:function(){if(this.mapContextMenu!=null){if(this.xc==this.mapContextMenu){this.xc=null}this.sF.div.removeChild(this.mapContextMenu.tY);this.mapContextMenu.maplet=null;this.mapContextMenu=null}},showMap:function(){if(MapBackgroundColor){this.vb.style.backgroundColor=MapBackgroundColor}this.vb.oncontextmenu=this.wP;this.sG=new fD("MapContainerBg",0,0,this.width,this.height,true,0,"",this.vb);this.sF=new fD("MapContainer",0,0,this.width,this.height,true,2,"",this.vb);this.zs=new fD("ToolTip",0,0,0,0,false,24,"",this.sF);this.sE=new fD("LayerMap",0,0,this.width,this.height,true,2,"",this.sF);this.vx=new fD("LayerPoiMap",0,0,this.width,this.height,true,3,"",this.sF);this.nI();if(this.fj){var gV=new MStandardControl();this.addControl(gV);this.controlCanvas=gV.nR}this.wq=new fD("LayerScale",1,this.height-24,70,24,this.fe,3,"",this.vb);var content='<table border="0" width="100%" height="100%" style="border:2px solid #0E347F;"><tr ><td align="center" valign="middle" style="filter:alpha(opacity=30);opacity:0.3;background-color:#FFFFFF;"></td></tr></table>';this.sD=new fD("LayerBorder",1,1,1,1,false,6,content,this.vb);this.sD.style.border="1px solid #FFFFFF";this.snapshotBox=new MSnapshotBox(this);content='<div style="position:absolute;border-width:2px 0px 0px 2px;border-style:solid;border-color:red;width:4px;height:4px;left:0px;top:0px;line-height:1px;"></div><div style="position:absolute;border-width:2px 2px 0px 0px;border-style:solid;border-color:red;width:4px;height:4px;left:28px;top:0px;line-height:1px;"></div><div style="position:absolute;border-width:0px 0px 2px 2px;border-style:solid;border-color:red;width:4px;height:4px;left:0px;top:20px;line-height:1px;"></div><div style="position:absolute;border-width:0px 2px 2px 0px;border-style:solid;border-color:red;width:4px;height:4px;left:28px;top:20px;line-height:1px;"></div>';this.v13E.f2=new fD("_mapbar_mw_indicator",0,0,this.v13E._8bh.width,this.v13E._8bh.height,true,100,content,this.vb).div;this.v13E.f2.style.display="none";this.v13E._06=this.v13E.f2.getElementsByTagName("div");var An=(navigator.appVersion.match(new RegExp("6.","i"))=="6.")?0:2;this.sO=new fD("LayerMask",0,0,this.width-An,this.height-An,true,2,"",this.sF);this.sO.style.backgroundImage="url("+strImgsvrUrl+"images/mask.gif)";this.sO.div.setAttribute(cV7,"true");this.lA=new fD("LayerDrawMap",0,0,this.width,this.height,true,4,"",this.sF);if(!px){this.lA.style.MozUserSelect="none"}this.lA.div.setAttribute(cV7,"true");this.A4b.fC=new fD("_mapbar_drag_cross",0,0,this.A4b.width,this.A4b.height,true,2,"",this.vb);with(this.A4b.fC.div){style.width=this.A4b.width+"px";style.height=this.A4b.height+"px";style.display="none";style.overflow="hidden"}if(D2a){this.A4b.fC.div.innerHTML='<v:image  style="position:absolute;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+"px;left:-49px;top:-108px;\" src='"+CTLIMG_RESOURCE[0].url+"' />"}else{this.A4b.fC.div.innerHTML='<img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+'px;left:-49px;top:-108px;">'}this.overview.qa(this.vb);var rightMargin=15;var ui=0;this.sg=(this.width>360)?150:73;if((this.overview.nF()+this.overview.nz())>(this.height-23)){ui+=Math.max(0,this.overview.nH()-(this.sg-70))}MEvent.bindDom(this.map,"mousemove",this,this.a3);MEvent.bindDom(this.map,"mousedown",this,this.a2);MEvent.bindDom(this.map,"mouseup",this,this.a6);MEvent.bindDom(this.map,"click",this,this.aZ);MEvent.bindDom(this.map,"dblclick",this,this.a1);MEvent.bindDom(this.map,"mouseout",this,this.a4);MEvent.bindDom(this.map,"drag",this,this.a3);MEvent.bindDom(this.map,"dragstart",this,this.a3);MEvent.bindDom(this.map,"dragend",this,this.a3);MEvent.bindDom(this.map,"mouseover",this,this.a5);if(MOUSEWHEEL){MEvent.bindDom(this.map,"mousewheel",this,this.a7);MEvent.bindDom(this.map,"DOMMouseScroll",this,this.a7)}if(kp){MEvent.bindDom(document,"keydown",this,this.onkeydown)}this.qd();this.setZoomLevel(this.AG);this.setMode(this.sS);if(this.zP==null){this.zP=setInterval("document['mapbar-maplet'].zL()",100)}},qd:function(){this.sD.hide();this.sD.resize(1,1);this.sD.moveTo(-10,-10);if(document.all){this.sE.moveTo(0,0);this.sE.show();this.vx.moveTo(0,0);this.vx.show();this.lA.moveTo(0,0);this.lA.show();this.sO.moveTo(0,0);this.sO.show()}},setStyle:function(d,a){if(this.yl!=d){this.yl=d;if("aerial"==this.yl||this.yl.indexOf("aerial")>=0){this.xK="jpg"}else{this.xK="png"}if(typeof a!="undefined"){this.xK=a}if(typeof this.sF!="undefined"){for(var b in this.pU){try{if(this.pU[b]!=null&&typeof this.pU[b]=="object"){if(this.pU[b].parentNode!=null){this.pU[b].parentNode.removeChild(this.pU[b])}this.pU[b]=null}}catch(c){}}this.refresh();MEvent.trigger(this,"style",d)}}},setRotation:function(a){if(px&&rs){this.rotation=a;this.gk=Math.cos(this.rotation/180*Math.PI);this.wT=Math.sin(this.rotation/180*Math.PI)}},setHeadMode:function(a){this.nT=a},setOverlay:function(b,a){if(typeof a=="string"){this.u3=a}if(this.u2!=b){this.u2=b}if(typeof this.sF!="undefined"){this.refresh()}},zN:function(){var a=sj[this.AG]*this.width/this.imgWidth;this.c8.tl=(this.gA-a/2);this.c8.s6=(this.gA+a/2);var b=qP[this.AG]*this.height/this.imgHeight;this.c8.tj=(this.gx-b/2);this.c8.s4=(this.gx+b/2)},fI:function(f){if(this.w3!=null&&this.w3.length>0){sY=this.c8.s0;te=this.c8.tp;var e=sj[f]*this.width/this.imgWidth;var b=(this.gA-e/2);var h=(this.gA+e/2);var g=qP[f]*this.height/this.imgHeight;var d=(this.gx-g/2);var a=(this.gx+g/2);for(var c=0;c<this.w3.length;c++){if(this.w3[c].qn(d,b)&&this.w3[c].qn(a,h)){sY=this.w3[c].s0;te=this.w3[c].tp;break}}}},setBound:function(a){this.c8=a},refresh:function(){this.u0();this.u8()},fL:function(){if(this.fM!=null){clearTimeout(this.fM);this.fM=null}if(this.c0||this.fs||f1.fx.length>0){this.fM=getTimeout(this,this.fL,100);return}this.no()},no:function(){var b=0;for(var a in this.pU){try{if(this.pU[a]!=null&&typeof this.pU[a]=="object"){if(this.pU[a].c2==true){}else{if(this.pU[a].parentNode!=null){_removeNode(this.pU[a])}this.pU[a].onerror=null;this.pU[a].onload=null;this.pU[a]=null;delete this.pU[a];b++}}}catch(c){}}},zL:function(){if(this.a2q||this.fs||this.c0||(typeof this.Ai!="undefined"&&this.Ai!=0)){return}var b=parseInt(this.sF.style.left);var a=parseInt(this.sF.style.top);if((b+this.tf1)>=0||(b+this.sZ-this.width)<=0||(a+this.tg)>=0||(a+this.s1-this.height)<=0){this.fs=true;this.zA()}},zA:function(){if(this.fs==false){return}var h=parseInt(this.sF.style.left);var g=parseInt(this.sF.style.top);if((h+this.tf1)>=0||(h+this.sZ-this.width)<=0){if(this.c0==true){return}this.c0=true;try{var d=0;var l=0;if((h+this.tf1)>=0){this.th--;this.tf1-=parseInt(this.imgWidth);d=this.th;l=this.tf1}if((h+this.sZ-this.width)<=0){this.s2++;l=this.sZ;this.sZ+=parseInt(this.imgWidth);d=this.s2}var f=d;var e=nM[this.AG];var i=parseInt(360/sj[this.AG]);d=(d)%i;if(d>=(i/2)){d-=i}if(d<(-i/2)){d+=i}var b=this.yl;for(var c=this.ti;c<=this.s3;c++){var k=c;var j=(-(c-this.ti+1)*this.imgHeight)+this.s1;this.aA(l,j,d,k,f,c,b)}this.c0=false}catch(a){}}if((g+this.tg)>=0||(g+this.s1-this.height)<=0){if(this.c0==true){return}this.c0=true;try{var k=0;var j=0;if((g+this.tg)>=0){this.s3++;this.tg-=parseInt(this.imgHeight);k=this.s3;j=this.tg}if((g+this.s1-this.height)<=0){this.ti--;j=this.s1;this.s1+=parseInt(this.imgHeight);k=this.ti}var c=k;var e=nM[this.AG];var i=parseInt(360/sj[this.AG]);var b=this.yl;for(var f=this.th;f<=this.s2;f++){var d=f;d=(d)%i;if(d>=(i/2)){d-=i}if(d<(-i/2)){d+=i}var l=((f-this.th)*this.imgWidth)+this.tf1;this.aA(l,j,d,k,f,c,b)}this.c0=false}catch(a){}}this.fs=false},aA:function(p,l,f,o,h,e,c){var g=nM[this.AG];var n=parseInt(Math.floor((f)/g));var k=parseInt(Math.floor((o)/g));if(n<0){n+=1}if(k<0){k+=1}var b=(f)-n*g;var a=(o)-k*g;var i=this.strImgUrl.replace("img","img"+this.vI_9(b,a))+"mapbank/"+c+"/"+this.sR;var d=((this.AG).toString(16)+h.toString(16)+"l"+e.toString(16)).toLowerCase();i+=n+"_"+k+"/";i+=b+"_"+a+"."+this.xK;if(i&&i.indexOf("NaN")<0){if(this.pU[d]==null){if(rs==0||!px){this.pU[d]=new Image();this.pU[d].id=d;this.pU[d].name=d;this.pU[d].wyq=this.AG+"_"+n+"_"+k+"_"+b+"_"+a;this.pU[d].ntry="0";this.pU[d].unselectable="on";this.pU[d].style.position="absolute"}else{this.pU[d]=document.createElement("v:Image");this.pU[d].id=d;this.pU[d].name=d;this.pU[d].ntry="0";this.pU[d].unselectable="on";this.pU[d].style.position="absolute";this.pU[d].cE="f";this.pU[d].style.rotation=this.rotation;this.pU[d].style.width=this.imgWidth+"px";this.pU[d].style.height=this.imgHeight+"px"}f1.nk(this.pU[d],i,this.imgWidth,this.imgHeight);this.sE.div.appendChild(this.pU[d])}else{if(px&&rs){this.pU[d].style.rotation=this.rotation}}var m=(p+this.imgWidth/2-this.width/2)*this.gk-(l+this.imgHeight/2-this.height/2)*this.wT+this.width/2;var j=(p+this.imgWidth/2-this.width/2)*this.wT+(l+this.imgHeight/2-this.height/2)*this.gk+this.height/2;this.pU[d].style.top=parseInt(j-this.imgHeight/2)+"px";this.pU[d].style.left=parseInt(m-this.imgWidth/2)+"px";this.pU[d].c2=true;this.pU[d].setAttribute("origy",parseInt(j-this.imgHeight/2));this.pU[d].setAttribute("origx",parseInt(m-this.imgWidth/2));d=null}i=null},h4g0:function(){this.no();this.sG.div.style.width=this.sE.div.style.width;this.sG.div.style.height=this.sE.div.style.height;this.sG.div.style.left=this.sE.div.style.left;this.sG.div.style.top=this.sE.div.style.top;this.sG.div.style.visibility="visible";for(var b in this.pU){var a=this.pU[b];if(a&&a.parentNode){a.parentNode.removeChild(a);this.sG.div.appendChild(a)}}this.H71();this.T9087=false},H71:function(){for(var b in this.pU){var a=this.pU[b];if(a&&a.parentNode){a.c2=false}}},_09rf:function(){this.H71();this.no()},u8:function(g,f){if(this.fe){var a=a=(this.xg*100*60/parseInt(this.imgWidth))*this.gM;var d="#000000";var e=(en)?"km":tX("%u516E%uE338");var c=(en)?"mi":tX("%u54EA");a=(a<10)?(a).toPrecision(1):parseInt(a);if(this.wq.div.innerHTML==""){var b=['<div id="_scaleValue" style="position:absolute;font-family: arial;FONT-SIZE: 12px; color:'+d+';FONT-WEIGHT: bold;left:4px;top:0px;">&nbsp;'+a+" "+e+"</div>"];b.push('<div style="position:absolute;width:69px;height:11px;overflow:hidden;top:8px;">');if(D2a){b.push('<img src="'+sX+'" style="position:absolute;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+CTLIMG_RESOURCE[0].url+",sizingMethod=scale);width:"+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+'px;left:-8px;top:-209px;border:0px;" onmousedown="return false;" unselectable="on" galleryimg="no" />')}else{b.push('<img src="'+CTLIMG_RESOURCE[0].url+'" style="position:absolute;left:-8px;top:-209px;width:'+CTLIMG_RESOURCE[0].w+"px;height:"+CTLIMG_RESOURCE[0].h+'px;border:0px;" onmousedown="return false;" unselectable="on" galleryimg="no" />')}b.push("</div>");if(en==1){this.wq.style.top=cm5UC(this.wq.style.top)-10+"px";this.wq.style.height=cm5UC(this.wq.style.height)+10+"px";b.push('<div id="_scaleValue2" style="position:absolute;font-family: arial;FONT-SIZE: 12px; color:'+d+';FONT-WEIGHT: bold;left:4px;top:19px;">&nbsp;'+a+" "+c+"</div>")}this.wq.div.innerHTML=b.join("")}else{if(en==1){aa("_scaleValue").innerHTML="&nbsp;"+a+" "+e;if(aa("_scaleValue2")){aa("_scaleValue2").innerHTML="&nbsp;"+a+" "+c}}else{aa("_scaleValue").innerHTML="&nbsp;"+a+" "+e}}this.wq.show()}else{this.wq.hide()}},$esX2:function(){if(!this.wq){return}if(this.fe){var c=4,b;if(en==1){b=this.height-34}else{b=this.height-24}var d=0,a=0;if(this.controlCanvas&&this.controlCanvas.options.location.type==Maplet.LEFT_BOTTOM){d=this.controlCanvas.getRect().max.x+10}if(this.overview&&this.overview.location.type==Maplet.LEFT_BOTTOM){a=this.overview.getRect().max.x+10}this.wq.moveTo(Math.max(c,Math.max(d,a)),b)}},showNavLogo:function(a){if(!a){this.E088.style.display="none"}else{this.E088.style.display="block"}this.t8Q_=a;this.K3KA()},waitPan:function(a,c,b){if(this.Ah){clearTimeout(this.Ah)}this.Ah=null;if(a&&c){if(this.vi==0){this.vi=1;this.vc=a;this.vd=c;this.fy=b;this.Ah=getTimeout(this,this.waitPan,500)}}else{if(this.vi){this.vi=0;this.panTo(this.vc,this.vd,this.fy)}}},doPan:function(){this.fa=true;this.K33=true;if(!px&&ContentInfo&&ContentInfo.isVisible()){ContentInfo.LG8O9(true)}if(!this.T9087){this.no();this.T9087=true}if(this.markerDragAnimation){with(this.A4b){if(uX!=null&&!uX.ls){this.d1rDu(false)}}}var tN=parseInt(Math.sqrt(this.Aq*this.Aq+this.Aw*this.Aw));if(this.vh){clearTimeout(this.vh)}this.vh=null;if((this.va-tN)<=(1.2*this.vg)){this.Aq=this.xoffset;this.Aw=this.yoffset;this.sF.moveTo(this.Aq,this.Aw);this.vh=getTimeout(this,this.finishupPan,10)}else{var lJ=this.xoffset*this.vg/this.va;var lL=this.yoffset*this.vg/this.va;this.Aq+=lJ;this.Aw+=lL;this.sF.moveTo(this.Aq,this.Aw);this.vh=getTimeout(this,this.doPan,10)}},finishupPan:function(){this.fa=false;this.N31=true;this.Y$_8=new Date().getTime();this.ClPI=this.Aq;this.c970q=this.Aw;if(this.vh){clearTimeout(this.vh)}this.vh=null;this.setCenter(this.ve,this.vf);this.N31=false;if(this.fp&&this.fp.parentNode!=this.sF.div){this.sF.div.appendChild(this.fp)}else{}if(this.fy!=null&&this.fy!="undefined"){eval(this.fy)}this.K33=false},AN:function(AL,x,y){this.lA.hide();if(this.H434){this.H434.setVisible(false)}for(var i in this.a5Y){var p=this.a5Y[i];if(p.options.zoomhide&&p.isVisible()){p.setVisible(false)}}if(!this.T9087){this.no()}this.a2q=true;if(typeof x!="number"){x=0}if(typeof y!="number"){y=0}var AK=Math.pow(2,parseFloat(AL))/Math.pow(2,this.AG);for(var i in this.pU){var img=this.pU[i];if(img.c2){with(img.style){if(img.getAttribute("done")!="1"){_removeNode(img);img=null;delete this.pU[i]}else{width=(this.imgWidth*AK<10?0:this.imgWidth*AK+1)+"px";height=(this.imgHeight*AK<10?0:this.imgHeight*AK+1)+"px";left=cm5UC(img.getAttribute("origx"))*AK+1+"px";top=cm5UC(img.getAttribute("origy"))*AK+1+"px"}}}}with(this.sE.div.style){width=this.width*AK+"px";height=this.height*AK+"px";left=(this.width/2-cm5UC(width)/2+x)+"px";top=(this.height/2-cm5UC(height)/2+y)+"px"}},T65K1:function(VHR5D){if(cm5UC(this.sE.div.style.width)!=this.width){with(this.sE.div.style){width=this.width+"px";height=this.height+"px";left="0px";top="0px"}}if(typeof VHR5D=="boolean"&&VHR5D){for(var i in this.pU){var img=this.pU[i];if(typeof img=="object"&&img.c2){img.style.left=cm5UC(img.getAttribute("origx"),0)+"px";img.style.top=cm5UC(img.getAttribute("origy"),0)+"px";img.style.width=this.imgWidth+"px";img.style.height=this.imgHeight+"px"}}}this.a2q=false},vQ:function(a){while(a!=null&&a.length>0){a[a.length-1]=null;a.length--}},vS:function(c,a){if(a>=0&&c.length>a){c[a]=null;for(var b=a;b<c.length-1;b++){c[b]=c[b+1]}c[c.length-1]=null;c.length--}},getElementById:function(c,b){var a=this.p8(c,b);if(a>=0&&c.length>a){return c[a]}return null},p8:function(c,d){var a=-1;for(var b=0;b<c.length;b++){if(c[b].id==d){a=b;break}}return a},removePointAt:function(a){this.vS(this.aO,a)},vX:function(a){this.vS(this.aO,this.p8(this.aO,a))},removeAllPoints:function(){this.vQ(this.aO)},removeLabelAt:function(a){this.vS(this.yG,a)},vV:function(a){this.vS(this.yG,this.p8(this.yG,a))},removeAllLabels:function(){this.vQ(this.yG)},removeLineAt:function(a){this.vS(this.aN,a)},vW:function(a){this.vS(this.aN,this.p8(this.aN,a))},removeAllLines:function(){this.vQ(this.aN)},addHotspot:function(d,b,f,h,e){var a="hotspot"+this.aE.length;if(typeof b=="object"&&b.toString()=="com.mapbar.maplet.MPoint"){d=b.lat;b=b.lon}else{var g=cq.vp(b);d=Math.min(sy[1],Math.max(sy[0],parseFloat(g[1])));b=Math.min(sz[1],Math.max(sz[0],parseFloat(g[0])%360))}var c=new a8(a,"","",parseFloat(d),parseFloat(b),f,"","0");c.fl=false;c.AJ=h;c.AI=e;this.aE[this.aE.length]=c},addPointWithSwapImage:function(e,b,g,a,h,d,c,f){this.aO[this.aO.length]=new a8("point"+this.sv,e,b,parseFloat(g),parseFloat(a),h,d,c,f);this.sv++},addPointWithId:function(g,e,a,f,c,b,d){this.aO[this.aO.length]=new a8(g,pc[g],pb[g],parseFloat(e),parseFloat(a),f,c,b,d)},addIcon:function(b,d,e,f,a,c){var g=cq.vp(d);this.addPoint(b,g[1],g[0],e,f,a,c)},nC:function(){return this.c8},zp:function(b,e){var d=(b-this.width/2);if(this.rotation!=0){var c=(e-this.height/2);d=d*this.gk+c*this.wT}var a=this.gA+d*this.xg/this.imgWidth;a=Math.min(sz[1],Math.max(sz[0],a%360));return a},zo:function(a,e){var b=(e-this.height/2);if(this.rotation!=0){var d=(a-this.width/2);b=-d*this.wT+b*this.gk}var c=this.gx-b*this.xf/this.imgHeight;c=Math.min(sy[1],Math.max(sy[0],c));return c},zl:function(a,c){var b=((parseFloat(a)-this.gA)%360);if(b>180){b-=360}if(b<-180){b+=360}var e=Math.round(this.width/2+b/sj[this.AG]*this.imgWidth);if(this.rotation!=0){var d=Math.round(this.height/2-((parseFloat(c)-this.gx)%360)/qP[this.AG]*this.imgHeight);e=(e-this.width/2)*this.gk-(d-this.height/2)*this.wT+this.width/2}return e},zm:function(c,a){var d=Math.round(this.height/2-((parseFloat(c)-this.gx)%360)/qP[this.AG]*this.imgHeight);if(this.rotation!=0){var b=((parseFloat(a)-this.gA)%360);if(b>180){b-=360}if(b<-180){b+=360}var e=Math.round(this.width/2+b/sj[this.AG]*this.imgWidth);d=(e-this.width/2)*this.wT+(d-this.height/2)*this.gk+this.height/2}return d},setMode:function(d,c){d=d.toString().toLowerCase();d=(this.tB[d])?parseInt(this.tB[d]):parseInt(d);if((d!=3&&d!=23)&&this.sS==d){return null}if(this.sS==3||this.sS==23){this.vA=this.sS}this.sS=parseInt(d);this.thw7_();var b=null;switch(d){case"zoomin":case"1":case 1:this.cS=true;this.d7q("crosshair",this.map);this.sS=1;b="zoomin";break;case"zoomout":case"2":case 2:this.cS=true;this.sS=2;this.d7q("crosshair",this.map);b="zoomout";break;case ts.ty:case"pan":case 3:this.sS=3;b="pan";d=null;case ts.l3:case 13:case"erase":if(d){this.sS=13;b="erase";d=null}case ts.tu:case"edit":case 23:if(d){this.sS=23;b="edit";d=null}this.cO=true;this.d7q("default",this.map);break;case ts.tv:case"lookup":case 5:this.cS=true;this.d7q("crosshair",this.map);this.sS=5;b="lookup";break;case"6":case 6:case"bookmark":this.d7q("default",this.map);b="bookmark";this.sS=6;break;case"7":case 7:this.d7q("default",this.map);break;case"8":case 8:this.d7q("default",this.map);break;case"9":case 9:case"drawline":this.d7q("default",this.map);this.po=-1;this.sS=9;b="drawline";if(this.allowDrawingDragMap){this.cO=true}break;case"10":case 10:case"drawarea":this.d7q("default",this.map);this.po=-1;this.sS=10;b="drawarea";if(this.allowDrawingDragMap){this.cO=true}break;case"11":case 11:case"measure":this.d7q("default",this.map);b="measure";this.sS=11;if(this.allowDrawingDragMap){this.cO=true}break;case"15":case 15:case"measarea":this.d7q("default",this.map);b="measarea";this.sS=15;if(this.allowDrawingDragMap){this.cO=true}break;case"24":case 24:case"snapshot":this.cS=true;this.d7q("crosshair",this.map);b="snapshot";this.sS=24;break;default:break}var a=null;if(b!=null&&typeof c=="function"){a=MEvent.addListener(this,b,c)}if(b!=null){MEvent.trigger(this,"setmode",b)}return a},setCursorStyle:function(b,a){if(typeof b=="string"&&typeof a=="string"&&b){if("default,pointer,move,crosshair,measure".indexOf(b)!=-1){cWK3U[b]=a}}},d7q:function(c,d){var a=cWK3U[c];var b="";if(typeof a=="string"&&a){b="url('"+a+"'),auto"}else{b=c}if(d.style.cursor!=b){d.style.cursor=b}},wN:function(a,f,c,b,d){if(typeof c=="undefined"||c==null){return}if(typeof c.wyq=="object"){avBubble.width=c.wyq.width!=undefined?c.wyq.width:260;avBubble.height=c.wyq.height!=undefined?c.wyq.height:240}else{avBubble.width=260;avBubble.height=240}if(iToolTipStyle=="undefined"||iToolTipStyle==1){var e=(typeof c=="object")?c:null;if(e){avBubble.gl(e.title,e.content);d=b}else{avBubble.gl(c,b)}if(e){this.fp=e.gv(a,f,true)}else{this.fp=gp(c,a,f,b,true)}}else{var e=(typeof c=="object")?c:null;if(e){setToolTipMenu(a,f,e.title,e.content)}else{setToolTipMenu(a,f,c,b)}}},hideBubble:function(){hideBubble(this);if(this.fp){if(this.fp.parentNode){this.fp.parentNode.removeChild(this.fp)}this.fp=null}},aY:function(){if((this.tR>0)&&(this.tR<this.width)&&(this.tS>0)&&(this.tS<this.height)&&(this.downX>0)&&(this.downX<this.width)&&(this.downY>0)&&(this.downY<this.height)){return true}else{return false}},lu:function(){var b=0,c=0,a=0,d=0;if(this.tR<this.downX&&this.tS<this.downY){b=this.downX-this.tR;c=this.downY-this.tS;a=this.tR;d=this.tS}else{if(this.tR>this.downX&&this.tS<this.downY){b=this.tR-this.downX;c=this.downY-this.tS;a=this.downX;d=this.tS}else{if(this.tR<this.downX&&this.tS>this.downY){b=this.downX-this.tR;c=this.tS-this.downY;a=this.tR;d=this.downY}else{if(this.tR>this.downX&&this.tS>this.downY){b=parseInt(this.tR)-this.downX;c=parseInt(this.tS)-this.downY;a=this.downX;d=this.downY}else{b=this.tR-this.downX;c=this.tS-this.downY;a=this.downX;d=this.downY}}}}if(this.sS==ts.$9f){nX();this.snapshotBox.resize(b,c);this.snapshotBox.moveTo(a,d)}else{this.sD.resize(b,c);this.sD.moveTo(a,d)}},thw7_:function(){this.cL=false;this.cS=false;this.cO=false;this.cN=false;this.cR=false;if(this.zy){this.zy.remove(true);this.zy=null}if(this.tG){this.tG.remove(true);this.tG=null}if(this.sD.style.visibility=="visible"){this.sD.hide();this.sD.resize(1,1);this.sD.moveTo(-10,-10)}if(this.snapshotBox.isVisible()&&!this.snapshotBox.E6vg){this.snapshotBox.hide()}nX()},addPolyline:function(g,f,c,b,a,e){var d=new a9("pline"+this.sv,g,f,c,b,a,e);d.maplet=this;this.aN[this.aN.length]=d;this.sv++},addPolylineString:function(e,a,c){var d=e.split(",");var b=new a9("pline"+this.sv,null,null,(d.length>2)?d[2]:null,(d.length>0)?parseInt(d[0]):0,(d.length>1)?d[1]:1,c);b.maplet=this;this.sv++;b.vp(a);this.aN[this.aN.length]=b},addLabelString:function(b,a,d){var c=cq.vp(a);this.addLabel((b==null)?"http://map.mapbar.com/maplite/images/marker.gif":b,c[1],c[0],d)},addOrigin:function(b,a){aC.setOrigin(parseFloat(b),parseFloat(a))},addDestination:function(b,a){aC.setDestination(parseFloat(b,a))},clean:function(){this.hideBubble();this.removeAllPoints();this.removeAllLabels();this.removeAllLines();pd=new Array();pa=new Array();this.refresh()},showBasePois:function(a){this.bp=a;this.refresh()},showZoomBar:function(a,b){this.ff=a;if(typeof b!="undefined"&&b!=null){if(this.yh!=b){this.yh=b;this.nI().setStyle(this.yh)}}if(this.ff){this.overview.hide();this.nI().show();this.AP.setZoomLevel(this.getZoomLevel())}else{if(this.AP!=null){this.AP.hide()}}},addControl:function(d,e,b,a){if(typeof d=="string"||(typeof d=="object"&&d.toString().indexOf("MStandardControl")>0)){if(this.controlCanvas){this.controlCanvas.g1();this.controlCanvas=null}var c=null;if(typeof d=="string"){if(b==null||b=="undefined"){b=0}if(a==null||a=="undefined"){a=0}c=new MStandardControl(d,b,a,e)}else{if(typeof d=="object"){c=d}}if(c){c.initialize(this)}}else{if(typeof d=="object"){if(this.gc[d.id]){return}d.initialize(this);this.gc[d.id]=d;this.overview.addListener(this.gc[d.id])}}},removeControl:function(a){if(typeof a=="object"&&this.gc[a.id]){this.gc[a.id].remove();this.gc[a.id]=null}},addBound:function(a){if(typeof a!="undefined"){this.w3[this.w3.length]=a}},clearAllBounds:function(){for(var a=0;a<this.w3.length;a++){this.w3[a]=null}this.w3.length=0},setScaleBarValue:function(a){},getCurrentMap:function(){var a=this.width*sj[this.AG]/this.imgWidth;cq.lf=this.gx;cq.li=this.gA;var e=cq.zn();var c=(this.aO.length>0)?"&pois="+this.aO.length+",":"";for(var b=0;b<this.aO.length;b++){c+=this.aO[b].zn()+","+this.aO[b].xP+","}var d=(this.aN.length>0)?"&plines="+this.aN.length+",":"";for(var b=0;b<this.aN.length;b++){d+=this.aN[b].zn()+";"}var f="";for(var b in this.u5){if(typeof this.u5[b]=="object"&&this.u5[b]!=null&&this.u5[b].zq){if(f.length==0){f="&overlays="}f+=this.u5[b].zq()+";"}}return"&map="+this.AG+","+e+","+this.width+","+this.height+"&zm="+(Math.round(parseFloat(a)*1000)/10)+"&width="+this.width+"&height="+this.height+"&ctr="+e+c+d+"&client="+strLicenseKey+f},getLastPoint:function(){var a="&poi=";if(this.aO.length>0){a+=this.aO[this.aO.length-1].zn()+","+this.aO[this.aO.length-1].xP}return a},getLastLine:function(){var a="&pline=";if(this.aN.length>0){a+=this.aN[this.aN.length-1].zn()}return a},setCursorIcon:function(a){this.gJ=a;this.gI.src=a;nX()},v1:function(){this.gJ=null;this.gI.src=null},setBgColor:function(a){this.vb.style.backgroundColor=a},setTransparency:function(a){this.sE.div.style.filter="alpha(opacity="+a+");";this.sE.div.style.MozOpacity=(a/100);this.sE.div.style.opacity=(a/100);this.sE.div.style.qK=(a/100)},getFitZoomLevel:function(a,c){var b=1;while(a<=c[b]&&b<(c.length)){b++}return(b-1)},setBrushStyle:function(b,a){this.brush.color=b;this.brush.stroke=a},ql:function(){return this.cI},setActive:function(a){this.cI=a},onkeydown:function(b){var a=(b)?b:(window.event)?window.event:null;if(a){var c=(a.fG)?a.fG:((a.keyCode)?a.keyCode:((a.which)?a.which:0));if(c=="37"||c=="38"||c=="39"||c=="40"){if(this.ql()){if(a.target&&((a.target.nodeName=="INPUT"&&a.target.getAttribute("type").toLowerCase()=="text")||a.target.nodeName=="TEXTAREA")){return}if(a.srcElement&&((a.srcElement.tagName=="INPUT"&&a.srcElement.type=="text")||a.srcElement.tagName=="TEXTAREA")){return}if(a.shiftKey||a.ctrlKey){if(c=="37"){this.setRotation(this.rotation-15);this.refresh()}if(c=="39"){this.setRotation(this.rotation+15);this.refresh()}}else{if(c=="37"){this.panTo(this.width/2,0)}if(c=="38"){this.panTo(0,this.height/2)}if(c=="39"){this.panTo(-this.width/2,0)}if(c=="40"){this.panTo(0,-this.height/2)}}}}}},showDiy:function(j){var c=(typeof j=="undefined")?new Array():sdc(j).split(",");var e=(c.length>0);var h=c[0];x6=c[1];var b=c[2];var f=c[3];var g=c[4];var i=c[5];var k=c[6];var d=c[7];if(e){w8=new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0)}else{w8=new Array(0,0,0,0,0,0,0,0,75,0,0,-150,0,0)}if(typeof h=="undefined"){te=0}else{te=parseInt(h)}if(typeof x6=="undefined"){this.setStyle("mapbar")}else{this.setStyle(x6,b)}if(typeof f=="undefined"){this.gM=1}else{this.gM=parseFloat(f)}if(typeof d=="undefined"){if(e){this.strImgUrl="http://diyimg.mapbar.com/maplite/"}else{this.strImgUrl=strImgsvrUrl}}else{this.strImgUrl=d}if(typeof k=="undefined"){sz=new Array(-360,360);sy=new Array(-90,90)}else{var a=cq.vp(g);sz=new Array(a[0]-parseFloat(i)/2,a[0]+parseFloat(i)/2);sy=new Array(a[1]-parseFloat(k)/2,a[1]+parseFloat(k)/2)}if(typeof g!="undefined"){this.centerAndZoom(new MPoint(g),sY-1)}},_70:function(){var qx=0;var qz=0;var y144d=this.width;var SE6KN=this.height;var X0u=this.yh_1H();var r09m={tn:X0u.min.x,A5j2F:X0u.max.x,width:X0u.max.x-X0u.min.x};var l3W_l=this.R5_();var Mi3C={tn:l3W_l.min.x,A5j2F:l3W_l.max.x};with(this.controlCanvas){if(isVisible()){if(options.location.type==Maplet.LEFT_TOP||options.location.type==Maplet.LEFT_BOTTOM){qx=Math.max(qx,l3W_l.max.x)}else{y144d=Math.min(y144d,l3W_l.min.x)}}}with(this.overview){if(fg){if(location.type==Maplet.LEFT_TOP||location.type==Maplet.LEFT_BOTTOM){qx=Math.max(qx,X0u.max.x+location.marginx)}else{y144d=Math.min(y144d,X0u.min.x)}}}var w=y144d-qx;var h=SE6KN-qz;if(!isNaN(parseInt(avBubble.rE75))&&parseInt(avBubble.rE75)<w){w=parseInt(avBubble.rE75)}if(!isNaN(parseInt(avBubble.SMbF))&&parseInt(avBubble.SMbF)<h){h=parseInt(avBubble.SMbF)}return{min:{x:qx,y:qz},max:{x:y144d,y:SE6KN},width:w,height:h,f0:Mi3C,overview:r09m}},e5D:function(a){this.DllQ7=true;new i96(strImgsvrUrl+"mapbank/base/poireport.txt?"+Math.random(),this.cAw02,null,null,this,this.cAw02).V96Xw()},cAw02:function(){if(typeof basepoilist=="object"&&basepoilist){this.refresh()}this.DllQ7=false},setTrajectory:function(b,h,a,g,c){this.ux=(a==null||a=="undefined")?5:parseInt(a);this.pid=b;this.lX=g;this.wyqLine=null;this.everydo=(c==null||c=="undefined")?null:c;var f=this.wyqPois=h.pts;if(f!=null&&f.length>0){var e=0;this.zf=new Array();this.zg=new Array();this.p9=0;for(var d=0;d<f.length;d++){if(f[d].pid==undefined||f[d].pid==null||f[d].pid==""){continue}var j=cq.vp(f[d].pid);this.zg[e]=parseFloat(j[0]);this.zf[e]=parseFloat(j[1]);e++;j=null}f=null}},rotate:function(a){if(this.uw<=this.t9){this.uw=Math.min(this.t9,this.uw+this.xe)}else{if(this.uw>=this.t9){this.uw=Math.max(this.t9,this.uw-this.xe)}}this.setRotation(this.uw);this.refresh();if(this.uw==this.t9){setTimeout(a,500)}else{setTimeout('maplet.rotate("'+a+'")',500)}},doEmulation:function(){try{if(this.p9==0){this.wY=this.zf[0];this.wZ=this.zg[0];this.py=this.p9;this.p9++}if(this.p9<this.zf.length){this.vh=null;if(this.wyqLine==null){var b=new MBrush();this.wyqLine=new MPolyline([this.wyqPois[0],this.wyqPois[1]],b);this.addOverlay(this.wyqLine)}else{this.wyqLine.appendPoint(this.wyqPois[this.p9],true)}this.everydo!=null?this.everydo():"";if(this.pid.icon.div.parentNode!=this.lA){this.lA.appendChild(this.pid.icon.div.parentNode);this.pid.icon.div.style.zIndex=200}if(this.nT==1&&rs&&this.py!=this.p9){this.py=this.p9;if(typeof this.lY=="undefined"||this.lY==null){this.lY=document.createElement("div");this.lY.style.position="absolute";this.lY.style.zIndex=1000;this.lY.style.width=parseFloat(this.pid.icon.div.style.width)+"px";this.lY.style.height=parseFloat(this.pid.icon.div.style.height)+"px";this.lY.style.left=(this.width/2-parseFloat(this.pid.icon.div.style.width)/2)+"px";this.lY.style.top=(this.height/2-parseFloat(this.pid.icon.div.style.height)/2)+"px";this.lY.innerHTML="<img src='"+this.pid.icon.imgUrl+"' width='"+parseFloat(this.pid.icon.div.style.width)+"px' height='"+this.pid.icon.div.style.height+"px'>";this.map.appendChild(this.lY)}var k=-90+parseFloat(180*Math.atan2(this.zf[this.p9]-this.zf[this.p9-1],0.8*(this.zg[this.p9]-this.zg[this.p9-1]))/Math.PI);if(k<0){k+=360}k=k%360;if((Math.abs(k-this.rotation)%360)>180){this.rotation+=360}if(this.rotation-180-360>0){this.rotation=(this.rotation-720)}this.uw=this.rotation;this.t9=k;if(this.p9==1){this.setRotation(k);this.setCenter(this.wY,this.wZ)}else{this.setCenter(this.wY,this.wZ);setTimeout('maplet.rotate("maplet.doEmulation()")',500);return}}var h=this.zl(this.zg[this.p9-1],this.zf[this.p9-1]);var f=this.zm(this.zf[this.p9-1],this.zg[this.p9-1]);var c=this.zl(this.zg[this.p9],this.zf[this.p9]);var a=this.zm(this.zf[this.p9],this.zg[this.p9]);var j=this.zl(this.wZ,this.wY);var i=this.zm(this.wY,this.wZ);var g=parseFloat(Math.sqrt((c-h)*(c-h)+(a-f)*(a-f)));var d=parseFloat(Math.sqrt((j-h)*(j-h)+(i-f)*(i-f)))+this.ux;if(d<=(g-this.ux)){j=h+d*(c-h)/g;i=f+d*(a-f)/g;this.wZ=this.zg[this.p9-1]+d*(this.zg[this.p9]-this.zg[this.p9-1])/g;this.wY=this.zf[this.p9-1]+d*(this.zf[this.p9]-this.zf[this.p9-1])/g}else{j=c;i=a;this.wZ=this.zg[this.p9];this.wY=this.zf[this.p9];this.p9++}if(this.nT==0){this.pid.icon.div.style.top=(i-parseFloat(this.pid.icon.div.style.height))+"px";this.pid.icon.div.style.left=(j-parseFloat(this.pid.icon.div.style.width)/2)+"px"}if(this.nT==1&&rs){this.sF.div.style.top=parseFloat(this.sF.div.style.top)+this.ux;this.vh=getTimeout(this,this.doEmulation,100)}else{if(j<0){this.panTo(this.width/2,this.height/2-i,"maplet.doEmulation()")}else{if(j>this.width){this.panTo(-this.width/2,this.height/2-i,"maplet.doEmulation()")}else{if(i<0){this.panTo(this.width/2-j,this.height/2,"maplet.doEmulation()")}else{if(i>this.height){this.panTo(this.width/2-j,-this.height/2,"maplet.doEmulation()")}else{this.vh=getTimeout(this,this.doEmulation,10)}}}}}}else{this.vh=null;this.zf=null;this.zg=null;this.pid.icon.div.style.zIndex=1;if(this.lY){if(this.lY.parentNode){this.lY.parentNode.removeChild(this.lY);this.lY=null}}this.setRotation(0);this.refresh();if(this.lX!=null||this.lX!="undefined"){this.lX()}}}catch(e){}},stopEmulation:function(){if(this.p9&&this.zf){this.p9=this.zf.length}},getMarkersInPolygon:function(b){var a=[];var e=[];for(var c=0;c<b.pts.length;c++){e.push({x:b.pts[c].mapX,y:b.pts[c].mapY})}var f=this.getMarkers();for(var c=0;c<f.length;c++){var d={x:f[c].pt.mapX,y:f[c].pt.mapY};if(_isInsidePolygon(d,e)){a.push(f[c])}}return a},getMarkerPolygons:function(d){var b=this.getPolylines(2);var a=[];if(b.length>0){var g={x:d.pt.mapX,y:d.pt.mapY};for(var f=0;f<b.length;f++){var h=[];var c=b[f];for(var e=0;e<c.pts.length;e++){h.push({x:c.pts[e].mapX,y:c.pts[e].mapY})}if(_isInsidePolygon(g,h)){a.push(c)}}}return a},vI_9:function(a,b){return this.biTb[(a%2)<0?0:a%2][(b%2)<0?0:b%2]},QhIW6:function(d){var b=parseInt(this.v13E._06[0].style.borderTopWidth);if(this.v13E.yN!=null&&((d<0&&b==0)||(d>0&&b==2))){return}var e={left:this.tR,top:this.tS};var c=null;var a=null;if(d<0){a=this.r93;c=this.v13E.qD9;this.W00U(true)}else{a=this.o3fal;c=this.v13E._8bh;this.W00U(false)}e.left-=c.width/2;e.top-=c.height/2;this.xr_(true,c,e);this.v13E.yN=getTimeout(this,a,this.v13E.interval)},W00U:function(b){var a=this.v13E._06;if(b){a[0].style.borderWidth="0px 2px 2px 0px";a[1].style.borderWidth="0px 0px 2px 2px";a[2].style.borderWidth="2px 2px 0px 0px";a[3].style.borderWidth="2px 0px 0px 2px"}else{a[0].style.borderWidth="2px 0px 0px 2px";a[1].style.borderWidth="2px 2px 0px 0px";a[2].style.borderWidth="0px 0px 2px 2px";a[3].style.borderWidth="0px 2px 2px 0px"}},o3fal:function(){this.M4g6U(false)},r93:function(){this.M4g6U(true)},M4g6U:function(a){if(this.v13E.H1n3<=this.v13E.fJ8){var e=this.v13E.f2;var b=this.v13E.xd*this.v13E.H1n3;var d=e.offsetWidth*b;e.style.left=(a?e.offsetLeft+d/2:e.offsetLeft-d/2)+"px";e.style.width=(a?e.offsetWidth-d:e.offsetWidth+d)+"px";d=e.offsetHeight*b;e.style.top=(a?e.offsetTop+d/2:e.offsetTop-d/2)+"px";e.style.height=(a?e.offsetHeight-d:e.offsetHeight+d)+"px";this.nC8C();this.v13E.H1n3++;this.v13E.yN=getTimeout(this,(a?this.r93:this.o3fal),this.v13E.interval-this.v13E.interval*this.v13E.xd)}else{this.xr_(false)}},nC8C:function(){var e=this.v13E.f2;var b=4;var a=e.offsetWidth;var d=e.offsetHeight;this.v13E._06[1].style.left=a-b+"px";this.v13E._06[2].style.top=d-b+"px";this.v13E._06[3].style.left=a-b+"px";this.v13E._06[3].style.top=d-b+"px"},xr_:function(b,a,e){var d=this.v13E.f2;d.style.left="100px";d.style.top="100px";if(this.v13E.yN){window.clearTimeout(this.v13E.yN);this.v13E.yN=null}this.v13E.H1n3=1;this.v13E.f2.style.display=b?"":"none";var d=this.v13E.f2;if(typeof e=="object"&&e){d.style.left=e.left+"px";d.style.top=e.top+"px"}if(typeof a=="object"&&a){d.style.width=a.width+"px";d.style.height=a.height+"px";this.nC8C()}},R5_:function(){var r={min:{x:0,y:0},max:{x:0,y:0}};with(this.controlCanvas){var l3W_l=getRect();if(isVisible()){r.min=l3W_l.Wh9;r.max=l3W_l.sDaa}}return r},yh_1H:function(){var a={min:{x:0,y:0},max:{x:0,y:0}};if(this.overview){a=this.overview.getRect()}if(a.min.x==0&&a.max.x==0){a={min:{x:this.width,y:this.height},max:{x:this.width,y:this.height}}}return a},h25my:function(b,h,v){if(typeof h!="boolean"){h=true}if(typeof v!="boolean"){v=true}var t=b.qUr;var p=b.m42-60;var f=b.s08;var e=b.K80K;var u=0;var q=0;var c=0;var i=0;var o=this.width;var g=this.height;if(h||v){var j={min:{x:b.qUr,y:b.m42},max:{x:b.s08,y:b.K80K},width:b.s08-b.qUr,height:b.K80K-b.m42};var k,n,m;if(v&&this.controlCanvas){var a=this.R5_();k=this.controlCanvas.options.location;n=(k.type==Maplet.LEFT_TOP||k.type==Maplet.LEFT_BOTTOM);m=(k.type==Maplet.LEFT_TOP||k.type==Maplet.RIGHT_TOP);if(_isRectint(j,a)){if(n){c=a.max.x}else{o=a.min.x}}else{if(n){if(m&&j.min.x<a.max.x&&(j.min.y<a.max.y||(j.height>this.height-a.max.y))){c=a.max.x}else{if(!m&&j.min.x<a.max.x&&(j.max.y>a.min.y||(j.height>a.min.y))){c=a.max.x}}}else{if(m&&j.max.x>a.min.x&&(j.min.y<a.max.y||(j.height>this.height-a.max.y))){o=a.min.x}else{if(!m&&j.max.x>a.min.x&&(j.max.y>a.min.y||(j.height>a.min.y))){o=a.min.x}}}}}if(h&&this.overview){var d=this.yh_1H();k=this.overview.location;n=(k.type==Maplet.LEFT_TOP||k.type==Maplet.LEFT_BOTTOM);m=(k.type==Maplet.LEFT_TOP||k.type==Maplet.RIGHT_TOP);if(_isRectint(j,d)){if(n){c=Math.max(c,d.max.x)}else{o=Math.min(o,d.min.x)}}else{if(n){if(m&&j.min.x<d.max.x&&(j.min.y<d.max.y||(j.height>this.height-d.max.y))){c=Math.max(c,d.max.x)}else{if(!m&&j.min.x<d.max.x&&(j.max.y>d.min.y||(j.height>d.min.y))){c=Math.max(c,d.max.x)}}}else{if(m&&j.max.x>d.min.x&&(j.min.y<d.max.y||(j.height>this.height-d.max.y))){o=Math.min(o,d.min.x)}else{if(!m&&j.max.x>d.min.x&&(j.max.y>d.min.y||(j.height>d.min.y))){o=Math.min(o,d.min.x)}}}}}}if(t<c){u=t-c}if(p<i){q=p-i}if(f>o){if(u==0){u=f-o}else{u=0}}if(e>g){if(q==0){q=e-g}else{q=0}}return{cy813:u,cx0:q}},H324:function(e,c){if(typeof c!="object"||!c){c={a0_54:true,s208:true,$24B4:true}}var b=this.h25my(e,c.a0_54,c.s208,c.$24B4);var d=b.cy813;var a=b.cx0;if(d!=0||a!=0){if(typeof e.c99!="number"){e.c99=0}if(typeof e.wQ613!="number"){e.wQ613=0}if(d!=0){d=(d<0?d-e.c99:d+e.c99)}if(a!=0){a=(a<0?a-e.wQ613:a+e.wQ613)}maplet.panTo(-d,-a)}return b},viewOverlay:function(i,k,j){var o=i.toString();var f=o.indexOf("MMarker")!=-1;var b=o.indexOf("MPolyline")!=-1;var d=o.indexOf("MEllipse")!=-1;var c=o.indexOf("MRoundRect")!=-1;var h=0,e=0,l=0,a=0;if(f&&i.icon){var g=i;h=g.pt.mapX-g.icon.anchorX;e=g.pt.mapY-g.icon.anchorY;l=h+parseInt(g.icon.div.style.width);a=e+parseInt(g.icon.div.style.height)}else{if(b){var n=i.getCenterXY();h=n.x-16;e=n.y-16;l=h+32;a=e+32}else{if(d){h=i.gC.mapX-16;e=i.gC.mapY-16;l=h+32;a=e+32}else{if(c){var m=i.getCenterXY();h=m.x-16;e=m.y-16;l=h+32;a=e+32}}}}return this.H324({qUr:h,m42:e,s08:l,K80K:a,c99:k,wQ613:j})},C3N:function(){this.H434=new fD("LayerContainer",0,0,this.width,this.height,true,2,"",this.sF)},PU77:function(){for(var a in this.layerData){this.layerData[a]=null;delete this.layerData[a]}},getImgByXY:function(a,f,c){if(typeof c!="boolean"){c=false}var b=this.pU[((this.AG).toString(16)+(this.gD).toString(16)+"l"+(this.gE).toString(16)).toLowerCase()];if(typeof b=="object"&&b){var e=Math.floor((a-parseInt(b.style.left))/this.imgWidth);var d=-Math.floor((f-parseInt(b.style.top)+(c?w8[this.AG]:0))/this.imgHeight);b=this.pU[((this.AG).toString(16)+(this.gD+e).toString(16)+"l"+(this.gE+d).toString(16)).toLowerCase()];return b}return null},d1rDu:function(visible,left,top){with(this.A4b){if(typeof left!="undefined"){fC.div.style.left=left+"px"}if(typeof top!="undefined"){fC.div.style.top=top+"px"}if(fC.div.parentNode!=this.vb){this.vb.appendChild(fC.div);fC.div.style.zIndex=2}if(fC.div.style.display!=(visible?"":"none")){fC.div.style.display=(visible?"":"none")}if(uX){uX.Ogm();uX=null}}},a8xh5:function(){if(!this.$BQ){this.$BQ=document.createElement("div");this.$BQ.id=px?"vCanvasVML":"vCanvasSVG";this.$BQ.style.position="absolute";this.$BQ.unselectable="on";this.$BQ.style.zIndex=0;this.$BQ.style.MozUserSelect="none";this.lA.appendChild(this.$BQ);if(!px){var b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttribute("id","LayerDrawSVG");b.setAttribute("version","1.1");b.setAttribute("overflow","visible");b.setAttribute("viewBox","-"+this.width+" -"+this.height+" "+this.width*3+" "+this.height*3);b.setAttribute("style","position: absolute; left: -"+this.width+"px; top: -"+this.height+"px; z-index: 0;");b.setAttribute("height",this.height*3+"px");b.setAttribute("width",this.width*3+"px");b.setAttribute(cV7,"true");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d","M 0 0 L 10 5 L 0 10 L 4 5 z");c.setAttribute("fill",this.brush.color);c.setAttribute("fill-opacity",this.brush.bgtransparency/100+0.3);var a=document.createElementNS("http://www.w3.org/2000/svg","marker");a.setAttribute("id","svgArrow");a.setAttribute("viewBox","0 0 10 10");a.setAttribute("refX","6");a.setAttribute("refY","5");a.setAttribute("markerUnits","strokeWidth");a.setAttribute("orient","auto");a.appendChild(c);b.appendChild(a);this.$BQ.appendChild(b)}}return this.$BQ},autoZoomLogo:function(){}};Maplet.prototype.toString=function(){return"com.mapbar.maplet.Maplet"};Maplet.prototype.setIwStdSize=function(a,b){if(typeof a!="number"){a=260}if(typeof b!="number"){b=240}if(a<avBubble.minWidth){a=avBubble.minWidth}if(b<avBubble.minHeight){b=avBubble.minHeight}avBubble.width=a;avBubble.height=b};Maplet.prototype.setIwZoomInSize=function(a,b){if(typeof a!="number"){a=""}if(typeof b!="number"){b=""}if(a<avBubble.width){a=""}if(b<avBubble.height){b=""}avBubble.rE75=a;avBubble.SMbF=b};Maplet.prototype.addLayer=function(a){if(a&&a instanceof MLayer){if(!this.qS[a.id]){a.initialize(this);this.qS[a.id]=a;this.refresh()}}else{return false}return true};Maplet.prototype.removeLayer=function(a,b){if(typeof b!="boolean"){b=false}if(a&&a instanceof MLayer&&this.qS[a.id]&&typeof a.remove=="function"){this.qS[a.id].remove(b);this.qS[a.id]=null;delete this.qS[a.id]}};Maplet.prototype.clearLayers=function(b){if(!this.H434){return}for(var a in this.qS){if(this.qS[a].options.creator==MLayer.USER){this.removeLayer(this.qS[a],b)}}if(!this.traffic){this.H434.clear();_removeNode(this.H434.div);this.H434=null}};Maplet.prototype.getLayers=function(){var b=[];for(var a in this.qS){if(this.qS[a].options.creator==MLayer.USER){b.push(this.qS[a])}}return b};Maplet.prototype.addPanel=function(a){if(a&&a instanceof MPanel){if(this.a5Y[a.id]){return true}a.initialize(this);this.a5Y[a.id]=a}else{return false}};Maplet.prototype.removePanel=function(a,b){if(typeof b!="boolean"){b=false}if(typeof a=="object"){if(this.a5Y[a.id]){a.remove(b);this.a5Y[a.id]=null;delete this.a5Y[a.id]}else{if(typeof a.remove=="function"){a.remove(b)}}}else{if(typeof a=="string"){if(this.a5Y[a]){this.a5Y[a].remove(b);this.a5Y[a]=null;delete this.a5Y[a]}}}};Maplet.prototype.getPanels=function(){var a=[];for(var b in this.a5Y){a.push(this.a5Y[b])}return a};Maplet.prototype.addOverlay=function(a){if(typeof a=="object"){if(this.u5[a.id]){return}a.initialize(this);this.u5[a.id]=a}};Maplet.prototype.getZoomLevel=function(){return this.AG};Maplet.prototype.clearOverlays=function(a){if(typeof a!="boolean"){a=false}this.hideBubble(this);for(var b in this.u5){if(this.u5[b]&&this.u5[b].remove){this.u5[b].remove(a);this.u5[b]=null;delete this.u5[b]}}};Maplet.prototype.removeOverlay=function(a,b){if(typeof b!="boolean"){b=false}if(typeof a=="object"){if(this.u5[a.id]){this.u5[a.id].remove(b);this.u5[a.id]=null;delete this.u5[a.id]}else{if(typeof a.remove=="function"){a.remove(b)}}}else{if(typeof a=="string"){if(this.u5[a]){this.u5[a].remove(b);this.u5[a]=null;delete this.u5[a]}}}};Maplet.prototype.clearCache=function(){cq.pu=null;cq.pu={}};Maplet.prototype.setAutoZoom=function(b,p,m,l){var c=[];if(this.setAutoZoom.arguments.length==0){for(var h in this.u5){if(this.u5[h]&&this.u5[h].remove){if(this.u5[h].toString()=="com.mapbar.maplet.MMarker"){if(this.u5[h].pt.pid==undefined||this.u5[h].pt.pid==null||this.u5[h].pt.pid==""){continue}c.push(cq.vp(this.u5[h].pt.pid))}else{if(this.u5[h].toString()=="com.mapbar.maplet.MPolyline"){var a=this.u5[h].pts;for(var n=0;n<a.length;n++){if(a[n].pid==undefined||a[n].pid==null||a[n].pid==""){continue}c.push(cq.vp(a[n].pid))}}}}}if(c.length==0){return false}else{b=90;p=180;m=-90;l=-180;for(var k=0;k<c.length;k++){b=Math.min(parseFloat(c[k][1]),b);p=Math.min(parseFloat(c[k][0]),p);m=Math.max(parseFloat(c[k][1]),m);l=Math.max(parseFloat(c[k][0]),l)}}}if(isNaN(parseFloat(b))){var q=cq.vp(b);var o=cq.vp(p);b=q[1];p=q[0];m=o[1];l=o[0]}var j=1.1*(m-b)*this.imgWidth/this.height;var g=1.1*(l-p)*this.imgWidth/this.width;var e=this.getFitZoomLevel(j,qP);var d=this.getFitZoomLevel(g,sj);var f=Math.min(e,d);cq.lf=(m+b)/2;cq.li=(l+p)/2;this.centerAndZoom(new MPoint(cq.zn()),f);return true};Maplet.prototype.setZoomLevel=function(AB,fb,cyvW){this.fI(AB);AB=parseInt(AB);if(AB<te){AB=te}if(AB>sY){AB=sY}if(fb!=undefined&&!fb){return AB}if(this.markerDragAnimation){with(this.A4b){if(uX!=null&&!uX.ls){this.d1rDu(false)}}}if(AB!=this.AG){if(typeof cyvW!="boolean"||cyvW){this.h4g0()}if(apiType==1){MEvent.trigger(this,"zoom",AB)}else{MEvent.trigger(this,"zoom","&act=zoom&zm="+AB)}for(var i in this.a5Y){var p=this.a5Y[i];if(p.options.zoomhide&&p.isVisible()){p.setVisible(false)}}this.lA.hide()}else{this.H71()}if(iToolTipStyle==0){hideToolTipMenu()}if(this.controlCanvas!=null){this.controlCanvas.update(AB)}if(this.gc!=null){for(var n8 in this.gc){if(this.gc[n8].nR){this.gc[n8].nR.controlCanvas.div.update(AB)}}}if(this.ff){this.nI().setZoomLevel(AB)}if(ContentInfo&&ContentInfo.isVisible()){var y60F=this.toScreenCoordinate(avBubble.ax729);if(_isInsideRect({x:y60F[0],y:y60F[1]},{min:{x:0,y:0},max:{x:this.width,y:this.height}})){this._61="infowindow";this.wUW=avBubble.ax729;this.asli=y60F[0];this.$iX=y60F[1]}}this.tXT0b=this.AG;this.AG=AB;this.xg=sj[this.AG];this.xf=qP[this.AG];this.sR=sI[this.AG]+"/";if(this.wUW!=""){var g4=this.asli-this.width/2;var g5=this.$iX-this.height/2;var y60F=this.toScreenCoordinate(this.wUW);var hfPKW=y60F[0]-g4;var $G_=y60F[1]-g5;this.gA=this.zp(hfPKW,$G_);this.gx=this.zo(hfPKW,$G_);this.asli=-1;this.$iX=-1;this.wUW="";this._61=""}this.gD=Math.floor((this.gA)/this.xg);this.gE=Math.floor((this.gx)/this.xf);if(this.gD<0){this.gD+=1}this.mapX=this.width/2-Math.round(((this.gA*wp)%(this.xg*wp))*this.imgWidth/(this.xg*wp));if(this.gx>=0){this.mapY=this.height/2-this.imgHeight+Math.round(((this.gx*wp)%(this.xf*wp))*this.imgHeight/(this.xf*wp))}else{this.mapY=this.height/2+Math.round(((this.gx*wp)%(this.xf*wp))*this.imgHeight/(this.xf*wp))}this.zN();this.refresh();this.tXT0b=this.AG;this.lA.show();if(this.H434){this.H434.setVisible(true)}for(var i in this.a5Y){var p=this.a5Y[i];if(p.options.zoomhide&&!p.isVisible()&&!p.j81wW.K3$){p.setVisible(true)}}};Maplet.prototype.setCenter=function(e,a,f,d){if(!this.T9087){this.no();this.T9087=true}var c=e;if(typeof e=="object"){c=e.pid}if(isNaN(parseFloat(c))||(typeof c=="string"&&c.indexOf(",")>0)){var b=cq.vp(c);e=b[1];a=b[0]}this.gx=Math.min(sy[1],Math.max(sy[0],parseFloat(e)));this.gA=Math.min(sz[1],Math.max(sz[0],parseFloat(a)%360));if(typeof basepoilist!="object"&&!this.DllQ7&&this._G9f){this._G9f=false}if(f==undefined||f){this.setZoomLevel(this.AG)}if(d==undefined||d){if(apiType==1){MEvent.trigger(this,"pan",new MPoint(this.toMapCoordinate(this.width/2,this.height/2)))}else{MEvent.trigger(this,"pan","&act=pan&ctr="+this.toMapCoordinate(this.width/2,this.height/2))}}};Maplet.prototype.moveTo=function(b,a){this.top=parseInt(a);this.left=parseInt(b);this.vb.style.top=parseInt(a)+"px";this.vb.style.left=parseInt(b)+"px"};Maplet.prototype.getCenter=function(){if(apiType==1){return new MPoint(this.getCurrentMap().split(",").slice(1,3).join(","))}else{return this.getCurrentMap().split(",")[1]}};Maplet.prototype.enableTraffic=function(a){if(typeof a!="object"||!a){a={}}if(!this.traffic){this.traffic=new MTraffic(a);this.traffic.initialize(this)}return this.traffic};Maplet.prototype.disableTraffic=function(){if(this.traffic){this.traffic.remove(true);this.traffic=null}};Maplet.prototype.resize=function(b,d){b=parseInt(b);d=parseInt(d);if(b<0||d<0){return}if(b==this.width&&d==this.height){return}aa("myalert").style.visibility="hidden";if(this.snapshotBox.isVisible()){this.snapshotBox.hide()}this.hideBubble();if(ContentInfo&&ContentInfo.closeFn){ContentInfo.closeFn()}this.width=b;this.height=d;vZ(this);if(this.controlCanvas.options.view.ruler){if(this.height>=270){this.controlCanvas.showCtlRuler(true,true,false)}else{this.controlCanvas.showCtlRuler(false,true,false)}}this.z4=Math.ceil((this.width)/(this.imgWidth)/2);this.z5=Math.ceil((this.height)/(this.imgHeight)/2);this.vb.style.width=b+"px";this.vb.style.height=d+"px";this.vb.style.clip="rect(0px,"+this.width+"px,"+this.height+"px, 0px)";this.sF.resize(b,d);this.sE.resize(b,d);this.vx.resize(b,d);if(this.H434){this.H434.resize(b,d);for(var c in this.qS){this.qS[c].resize(b,d)}}if(this.ff){this.nI().resize(d);this.nI().moveTo(this.width-16,0)}this.$esX2();this.onresize();var e=(navigator.appVersion.match(new RegExp("6.","i"))=="6.")?0:2;this.sO.resize(b-e,d-e);this.lA.resize(b,d);this.setZoomLevel(this.AG);if(this.H434){for(var c in this.qS){this.qS[c].refreshDataXY()}}for(var a in this.gc){if(this.gc[a]&&this.gc[a].onresize){this.gc[a].onresize(this)}}this.overview.onresize()};Maplet.prototype.zoomIn=function(){if(this.AG>=sY){return}if(ContentInfo&&ContentInfo.isVisible()){this.setZoomLevel(this.AG+1)}else{this.zoomTo(Math.min(sY,this.AG+1))}};Maplet.prototype.zoomOut=function(){if(this.AG<=te){return}if(ContentInfo&&ContentInfo.isVisible()){this.setZoomLevel(this.AG-1)}else{this.zoomTo(Math.max(0,this.AG-1))}};Maplet.prototype.centerAndZoom=function(b,a){this.setCenter(b,"",false);if(typeof this.sF=="undefined"){this.AG=this.setZoomLevel(a,false);this.showMap()}else{this.setZoomLevel(a)}};Maplet.prototype.zoomTo=function(qB,fy,x,y){if(fy){this.fy=fy}if(ZOOM_TRANSITION&&(!ContentInfo||!ContentInfo.isVisible())){if(this.AZ!=null){clearTimeout(this.AZ)}this.AZ=null;if(typeof qB!="undefined"){this.AT=parseInt(qB);if(typeof x=="undefined"){this.vc=0}else{this.vc=parseInt(x)}if(typeof y=="undefined"){this.vd=0}else{this.vd=parseInt(y)}this.AZ=getTimeout(this,this.zoomTo,200)}else{var vG=new Number();if(this.AT>this.getZoomLevel()){if(this.AS<=(this.AT-this.AY)){if(this.AS==-1){this.AS=this.getZoomLevel()+this.AY}else{this.AS+=this.AY}vG=(this.AS-this.getZoomLevel());this.AN(this.AS,2*this.vc*vG,2*this.vd*vG);this.AZ=getTimeout(this,this.zoomTo,20)}else{this.AS=-1;this.ve=this.zo(-this.vc+this.width/2,-this.vd+this.height/2);this.vf=this.zp(-this.vc+this.width/2,-this.vd+this.height/2);this.setCenter(this.ve,this.vf,false,false);this.setZoomLevel(this.AT);if(this.fy){if(ContentInfo&&ContentInfo.isVisible()){ContentInfo.setVisible(avBubble.mm0())}eval(this.fy)}}}else{if(this.AT<this.getZoomLevel()){if(this.AS==-1||this.AS>=(this.AT+this.AY)){if(this.AS==-1){this.AS=this.getZoomLevel()-this.AY}else{this.AS-=this.AY}vG=Math.abs(this.AS-this.getZoomLevel());this.AN(this.AS,2*this.vc*vG,2*this.vd*vG);this.AZ=getTimeout(this,this.zoomTo,20)}else{this.AS=-1;this.ve=this.zo(-this.vc+this.width/2,-this.vd+this.height/2);this.vf=this.zp(-this.vc+this.width/2,-this.vd+this.height/2);this.setCenter(this.ve,this.vf,false,false);this.setZoomLevel(this.AT);if(this.fy){if(ContentInfo&&ContentInfo.isVisible()){ContentInfo.setVisible(avBubble.mm0())}eval(this.fy)}}}}}}else{this.setZoomLevel(qB)}};Maplet.prototype.panTo=function(a,c,b){if(this.fa){return}this.xoffset=parseFloat(a);this.yoffset=parseFloat(c);this.Aq=0;this.Aw=0;this.fy=b;this.ve=this.zo(-this.xoffset+this.width/2,-this.yoffset+this.height/2);this.vf=this.zp(-this.xoffset+this.width/2,-this.yoffset+this.height/2);this.va=parseInt(Math.sqrt(this.xoffset*this.xoffset+this.yoffset*this.yoffset));if(!this.fa){this.doPan()}};Maplet.prototype.toMapCoordinate=function(a,b){cq.li=this.zp(a,b);cq.lf=this.zo(a,b);return cq.zn()};Maplet.prototype.toScreenCoordinate=function(a){var c=[null,null];try{var d=cq.vp(a);c[0]=this.zl(d[0],d[1]);c[1]=this.zm(d[1],d[0])}catch(b){throw b}return c};Maplet.prototype.showLogo=function(a){if(a){this.rH8.style.display="block"}else{this.rH8.style.display="none"}this.K3KA()};Maplet.prototype.showScale=function(d,b,c,a){this.fe=d;if(this.fe){this.wq.show()}else{if(this.wq!=null){this.wq.hide()}}};Maplet.prototype.showOverview=function(b,a){if(b){this.overview.show();if(a){this.overview.open()}else{this.overview.close()}}else{this.overview.hide();this.overview.close()}};Maplet.prototype.setOverviewLocation=function(a){this.overview.setLocation(a);this.K3KA();this.$esX2()};Maplet.prototype.resizeOverview=function(a,b){this.overview.resizeTo(a,b);this.K3KA();this.$esX2()};Maplet.prototype.showControl=function(a){this.fj=a;if(this.fj){if(this.controlCanvas){this.controlCanvas.show()}}else{if(this.controlCanvas){this.controlCanvas.hide()}}this.K3KA();this.$esX2()};Maplet.prototype.getViewBound=function(){return{LeftUp:this.toMapCoordinate(0,0),LeftDown:this.toMapCoordinate(0,this.height),RightUp:this.toMapCoordinate(this.width,0),RightDown:this.toMapCoordinate(this.width,this.height)}};Maplet.prototype.calcPointsCt=function(f){var b=Number.MAX_VALUE,e=b,a=-Number.MAX_VALUE,c=a;for(var d=0;d<f.length;d++){if(!f[d].maplet){f[d].initialize(this)}b=Math.min(b,f[d].mapX);e=Math.min(e,f[d].mapY);a=Math.max(a,f[d].mapX);c=Math.max(c,f[d].mapY)}if(b!=Number.MAX_VALUE){return new MPoint(this.toMapCoordinate(b+(a-b)/2,e+(c-e)/2))}else{return null}};Maplet.prototype.u0=function(){if(this.c0){return}if(this.fs){return}this.c0=true;this.fs=true;sb=0;if(this.c35.length>0){if(((this.u2!=null&&this.u2=="traffic")||this.AG!=this.tXT0b)||bpp[0]!=this.w02){for(var N=0;N<this.c35.length;N++){this.c35[N].onmousedown=null;_removeNode(this.c35[N])}this.c35=[]}this.w02=bpp[0]}this.T65K1();var B="";if(this.H434){this.PU77()}var h=0;var t=this.yl;var U=(this.u2=="undefined"||this.u2==null)?"poi":this.u2;var n=nM[this.AG];this.sZ=0;this.s1=0;this.tf1=this.width;this.tg=this.height;this.s2=parseInt(this.gD);this.s3=parseInt(this.gE);this.th=parseInt(this.gD);this.ti=parseInt(this.gE);var S=new Array();var k=new Array();var F=parseInt(new Date().getTime()/60000);var T=(360/sj[this.AG]);var r=this.getZoomLevel()-1;if(this.AG==this.tXT0b){this.sE.clean()}else{if(typeof basepoilist!="object"&&!this.DllQ7&&this._G9f){this._G9f=false}}for(var R=-this.z4-1;R<=this.z4;R++){for(var O=-this.z5-1;O<=this.z5;O++){try{var P=parseInt(this.gD+R);var z=parseInt(this.gE+O);P=(P)%T;if(P>=(T/2)){P-=T}if(P<(-T/2)){P+=T}var w=parseInt(Math.floor((P)/n));var v=parseInt(Math.floor((z)/n));if(w<0){w+=1}if(v<0){v+=1}var d=(P)-w*n;var u=(z)-v*n;var G=this.strImgUrl.replace("img","img"+this.vI_9(d,u))+"mapbank/"+t+"/"+this.sR;var C=this.strImgUrl+"mapbank/"+U+"/"+this.sR;var I=this.strImgUrl+"mapbank/base/"+this.sR;C+=w+"_"+v+"/";I+=w+"_"+v+"/";G+=w+"_"+v+"/";C+=d+"_"+u+".png";I+=d+"_"+u+".js";this.wyqid=this.AG+"_"+w+"_"+v+"_"+d+"_"+u;G+=d+"_"+u+"."+this.xK;var ah=(R*this.imgWidth)+parseInt(this.mapX);var ae=(-(O*this.imgHeight)+parseInt(this.mapY));var Y=ae;if(this.yl!="aerial"&&this.yl.indexOf("aerial")<0){ae=ae+w8[this.AG]}var K=false;var m=true;var aj=true;if((ah<-this.imgWidth||ah>this.width||ae>this.height||ae<-this.imgHeight)){K=true}if(this.u2!=null&&this.u2=="traffic"&&w8[this.AG]!=0&&((Y<this.height||Y<=0))){m=false;if(K){G=null}}if(this.H434&&w8[this.AG]!=0&&((Y<this.height||Y<=0))){aj=false;if(K){G=null}}if(K&&m&&aj){continue}if(G){if(this.sZ<(ah+this.imgWidth)){this.sZ=(ah+this.imgWidth);this.s2=parseInt(this.gD)+parseInt(R)}if(this.s1<(ae+this.imgHeight)){this.s1=(ae+this.imgHeight);this.ti=parseInt(this.gE)+parseInt(O)}if(this.tf1>ah){this.tf1=ah;this.th=parseInt(this.gD)+parseInt(R)}if(this.tg>ae){this.tg=ae;this.s3=parseInt(this.gE)+parseInt(O)}}var X=((this.AG).toString(16)+(this.gD+R).toString(16)+"l"+(this.gE+O).toString(16)).toLowerCase();if(h==0){h=1}if(G&&G.indexOf("NaN")<0){if(this.pU[X]==null){if(!rs||!px){this.pU[X]=new Image();this.pU[X].id=X;this.pU[X].name=X;this.pU[X].wyq=this.wyqid;this.pU[X].ntry="0";this.pU[X].unselectable="on";this.pU[X].style.position="absolute";this.pU[X].style.MozUserSelect="none"}else{this.pU[X]=document.createElement("v:Image");this.pU[X].id=X;this.pU[X].name=X;this.pU[X].wyq=this.wyqid;this.pU[X].ntry="0";this.pU[X].unselectable="on";this.pU[X].style.position="absolute";this.pU[X].cE="f";this.pU[X].style.rotation=this.rotation;this.pU[X].style.width=this.imgWidth;this.pU[X].style.height=this.imgHeight}if(px){this.pU[X].style.filter="alpha(opacity=0);"}else{this.pU[X].style.opacity="0"}f1.nk(this.pU[X],G,this.imgWidth,this.imgHeight)}else{if(px&&rs){this.pU[X].style.rotation=this.rotation}}var af=(ah+this.imgWidth/2-this.width/2)*this.gk-(ae+this.imgHeight/2-this.height/2)*this.wT+this.width/2;var W=(ah+this.imgWidth/2-this.width/2)*this.wT+(ae+this.imgHeight/2-this.height/2)*this.gk+this.height/2;this.pU[X].style.top=parseInt(W-this.imgHeight/2)+"px";this.pU[X].style.left=parseInt(af-this.imgWidth/2)+"px";this.pU[X].c2=true;this.pU[X].setAttribute("origy",parseInt(W-this.imgHeight/2));this.pU[X].setAttribute("origx",parseInt(af-this.imgWidth/2))}if(this.u2!=null&&this.u2=="traffic"){if(!__mapbar_magic_id){__mapbar_magic_id=""}var A=bpp[0]+__mapbar_magic_id+"/"+r+"/o"+X+".png";if(D2a){var c=document.createElement("v:image");c.setAttribute("unselectable","on");c.id="o"+X;c.setAttribute("name",X);c.setAttribute("traffic","yes");c.style.cssText="position:absolute;top:"+Y+"px;left:"+ah+"px;width:300px;height:300px";c.src=A;this.c35.push(c)}else{var g=document.createElement("IMG");g.id="o"+X;g.setAttribute("name",X);g.src=A;g.ntry="0";g.unselectable="on";g.onerror=function(){imageTileError(this)};g.onload=function(){imageTileOk(this)};g.onmousedown=function(){return false};g.style.cssText="position:absolute;top:"+Y+"px;left:"+ah+"px;-moz-user-select: none;";g.setAttribute("traffic","yes");this.c35.push(g)}S[S.length]="o"+X;k[k.length]=w+"_"+v+"/"}else{if(this.u2!=null&&this.u2!="undefined"&&C&&C.indexOf("NaN")<0){if(this.pU[X]){var H="o"+this.pU[X].wyq;var ak=w+"_"+v+"/";if(bpp[0]!=xl+"mapbank/base/"||(typeof basepoilist=="object"&&basepoilist[H])){var ab=aa(H);if(!ab){ab=document.createElement("DIV");ab.setAttribute("unselectable","on");ab.id=H;ab.setAttribute("name",X);ab.style.cssText="position:absolute;width:0px;height:0px;";this.c35.push(ab)}ab.style.left=ah+"px";ab.style.top=Y+"px";S[S.length]=H;k[k.length]=ak}}}}if(this.H434){this.layerData[X]={filename:this.sR+w+"_"+v+"/"+d+"_"+u,dirx:w,diry:v,grid:X,lh1:d,Xci:u,dirname:w+"_"+v,xyname:d+"_"+u,x:ah,y:Y}}G=null;C=null}catch(ai){throw (ai)}}}for(var o in this.pU){var g=this.pU[o];if(g!=null&&typeof g=="object"){if((typeof g.c2=="boolean"&&g.c2)||g.c2=="true"){if(g.parentNode!=this.sE.div){if(g.parentNode!=null){g.parentNode.removeChild(g)}this.sE.div.appendChild(g)}}else{if(g.parentNode!=this.sG.div){if(g.parentNode!=null){_removeNode(g)}g.onerror=null;g.onload=null;g=null;delete this.pU[o]}}}}if(!(this.u2!=null&&this.u2=="traffic")&&this.c35.length>0){var L=S.join(",");for(var b=this.c35.length-1;b>=0;b--){if(L.indexOf(this.c35[b].id)==-1){if(this.c35[b].parentNode){_removeNode(this.c35[b])}this.c35.splice(b,1)}}for(var b=S.length-1;b>=0;b--){if(aa(S[b])){S.splice(b,1)}}}if(this.c35.length>0){for(var M=0;M<this.c35.length;M++){this.lA.div.appendChild(this.c35[M])}}B=null;if(this.H434){for(var V in this.qS){if(this.qS[V].inZoomRange(this.AG)){this.qS[V].update()}else{this.qS[V].clear()}}}if(this.sE.div.parentNode!=this.sF.div){this.sF.div.appendChild(this.sE.div)}if(this.vx.div.parentNode!=this.sF.div){this.sF.div.appendChild(this.vx.div)}if((typeof this.fo=="boolean"&&this.fo)&&document.getElementById("LayerMap")&&document.getElementById("LayerMap").filters&&document.getElementById("LayerMap").filters.length>0){document.getElementById("LayerMap").filters[0].apply();document.getElementById("LayerMap").filters[0].vu()}if(this.aN.length>0){for(var al=0;al<this.aN.length;al++){this.aN[al].paint()}}if(this.zy!=null){this.zy.paint();if(this.tG!=null){this.tG.paint()}}if(this.aO.length>0){for(al=0;al<this.aO.length;al++){this.aO[al].u9(this.vx.div);this.aO[al].paint(this.lA.div)}}if(this.yG.length>0){if(!px){this.yG[this.yG.length-1].label(this.lA.graphics)}}else{if(iToolTipStyle==0){hideToolTipMenu()}}if(this.lA.div.parentNode!=this.sF.div){this.sF.div.appendChild(this.lA.div)}if(this.aE.length>0){this.aG=null;this.aH=null;this.aF=null;for(al=0;al<this.aE.length;al++){if(this.AG>=this.aE[al].AJ&&this.AG<=this.aE[al].AI){var E=this.zl(this.aE[al].li,this.aE[al].lf);var D=this.zm(this.aE[al].lf,this.aE[al].li);if(E>=0&&E<=this.width&&D>=0&&D<=this.height){if(this.aG==null){this.aG=new Array();this.aH=new Array();this.aF=new Array()}this.aG[this.aG.length]=E;this.aH[this.aH.length]=D;this.aF[this.aF.length]=al}}}}if(!this.cH){this.cH=true}if(this.u2!=null&&this.u2!="undefined"){if(this.u2=="base"){if(this.AG>=parseInt(bpp[1])&&this.AG<=parseInt(bpp[2])){if(!this._G9f){this._G9f=true}var V=0;for(var Q in S){try{if(typeof S[Q]=="string"&&typeof basepoilist=="object"){if(bpp[0]!=xl+"mapbank/base/"||basepoilist[S[Q]]){new i96(ADURL+S[Q],parseInt,false,true).V96Xw()}V++}else{if(document.getElementById(S[Q])&&document.getElementById(S[Q]).parentNode){_removeNode(aa(S[Q]))}}}catch(ag){throw (ag)}S[Q]=null;k[Q]=null}}else{for(var j in S){try{if(typeof S[j]=="string"&&document.getElementById(S[j])&&document.getElementById(S[j]).parentNode){_removeNode(aa(S[j]))}}catch(ai){throw (ai)}S[j]=null;k[j]=null}}}else{F=parseInt(new Date().getTime()/60000);for(var f in S){try{if((this.u2!="traffic")&&typeof S[f]=="string"){XMLHttp.sendReq("GET","maplite/"+this.u2+".jsp?"+this.u3+"&oid="+S[f]+"&epoch="+F,"",vB,S[f])}}catch(ai){throw (ai)}S[f]=null;k[f]=null}}S.length=0;S=null;k.length=0;k=null}this.c0=false;this.fs=false;for(var J in this.a5Y){var N=this.a5Y[J];if(N.paint){N.paint()}}for(var V=0;V<2;V++){for(var a in this.u5){if(this.u5[a]&&this.u5[a].paint){if(V==0&&this.u5[a] instanceof MMarker&&!this.u5[a].ls){this.u5[a].paint()}else{if(V==1&&this.u5[a].Xh5Lr){this.u5[a].paint()}}}}}avBubble.yhb59();if(this.overview){this.overview.paint()}cq.lf=this.gx;cq.li=this.gA;var e=cq.zn();this.yu=e+"@"+this.AG;if(ALLOW_MV){try{var Z="@mapbar"+(new Date().getTime()%86400).toString(36);sB.src="http://mv.mapbar.com/?"+this.yu+"@"+this.yt+"@"+this.width.toString(36).toUpperCase()+"@"+this.height.toString(36).toUpperCase()+"@"+this.sS.toString(36).toUpperCase()+"@"+c75+"@"+strLicenseKey.toString(36).toUpperCase()+"@"+this.yl+"@"+((bp)?1:0)+"@"+((this.u2)?this.u2:"")+Z}catch(ai){throw (ai)}}this.sF.moveTo(0,0);this.vx.moveTo(0,0);this.lA.moveTo(0,0);this.sO.moveTo(0,0);MEvent.trigger(this,"update",this.yu)};Maplet.prototype.getEllipse=function(){var b=[];for(var a in this.u5){if(this.u5[a] instanceof MEllipse){b.push(this.u5[a])}}return b};Maplet.prototype.getRoundRect=function(){var b=[];for(var a in this.u5){if(this.u5[a] instanceof MRoundRect){b.push(this.u5[a])}}return b};Maplet.prototype.getMarkers=function(){var b=[];for(var a in this.u5){if(this.u5[a] instanceof MMarker){b.push(this.u5[a])}}return b};Maplet.prototype.getPolylines=function(b){if(typeof b!="number"){b=1}var c=[];for(var a in this.u5){if(this.u5[a] instanceof MPolyline){if(b==2&&!this.u5[a].U41k0()){continue}else{if(b==3&&this.u5[a].U41k0()){continue}}c.push(this.u5[a])}}return c};Maplet.prototype.equalsLLCoords=function(b,a,f){if(typeof b=="string"&&b&&typeof a=="string"&&a){try{if(b==a){return true}if(typeof f!="number"){f=0}var d=maplet.toScreenCoordinate(b);var c=maplet.toScreenCoordinate(a);if((d[0]==c[0]||Math.abs(d[0]-c[0])<=f)&&(d[1]==c[1]||Math.abs(d[1]-c[1])<=f)){return true}}catch(e){}}return false};Maplet.prototype.measDistance=function(g){try{var d=0;var f=g.length;var e=[],c=0,a=0;for(var b=1;b<f;b++){e.push(cq.vp(g[b-1].pid));e.push(cq.vp(g[b].pid));c=e[1][1]-e[0][1];a=e[1][0]-e[0][0];d+=Math.sqrt(c*c+a*a*0.64);e.length=0}return parseInt(d*this.gM*111111)}catch(h){return 0}};Maplet.prototype.measArea=function(m){try{var d=0;var f=m.length;var l=2;var j=0;for(var h=1;h<=f;h++){var c=(l%f);var e=(j%f);var b=parseFloat(cq.vp(m[(h%f)].pid)[0]);var k=parseFloat(cq.vp(m[c].pid)[1]);var a=parseFloat(cq.vp(m[e].pid)[1]);d+=b*(k-a);l++;j++}return parseInt(Math.abs(d/2)*this.gM*this.gM*100000*100000)}catch(g){return 0}};Maplet.prototype.decodeLine=function(f,d){var b=[];if(typeof f!="string"||!f||typeof d!="string"||!d){return b}var e=this.t2e7(f);var a=this.h216F(d);if(e.length==a.length){for(var c=0;c<e.length;c++){b.push(new MPoint(e[c][1],e[c][0],false,a[c]));b[c].initialize(this)}}return b};Maplet.prototype.t2e7=function(e){var k=e.length;var f=0;var l=[];var g=0;var d=0;while(f<k){var h;var c=0;var a=0;do{h=e.charCodeAt(f++)-63;a|=(h&31)<<c;c+=5}while(h>=32);var j=((a&1)?~(a>>1):(a>>1));g+=j;c=0;a=0;do{h=e.charCodeAt(f++)-63;a|=(h&31)<<c;c+=5}while(h>=32);var i=((a&1)?~(a>>1):(a>>1));d+=i;l.push([g*0.00001,d*0.00001])}return l};Maplet.prototype.h216F=function(d){var c=[];for(var a=0;a<d.length;++a){var b=d.charCodeAt(a)-63;c.push(b)}return c};var SF4_6={wB:function(a){this.fo=(a)?true:false},addLabel:function(c,e,a,f,g,b,d){if(!g){g=""}this.yG[this.yG.length]=new a8("label"+this.sv,c,c,parseFloat(e),parseFloat(a),f,g,b,d);this.sv++},addPoint:function(d,f,a,g,c,b,e){if(!c){c=""}this.aO[this.aO.length]=new a8("point"+this.sv,d,d,parseFloat(f),parseFloat(a),g,c,b,e);this.sv++},updatePointAt:function(e,d,c,b,a){if(e>=0&&this.aO.length>e){if(!c){c=""}this.aO[e].zM(d,c);if(typeof b!="undefined"){if(typeof a=="undefined"){a=b}this.aO[e].setIcon(b,a)}}},updateLineAt:function(d,c,b,a){if(d>=0&&this.aN.length>d){this.po=d;if(c!="undefined"&&c!=null){this.aN[d].cK=(a=="false"||a=="0")?false:true;this.aN[d].xP=c}if(b!="undefined"&&b!=null){this.aN[d].xu=b}if(this.aN[d].cK){this.aN[d].zM(c,b)}}},showTipOf:function(b,a,c){if(c==null||c==false||c=="undefined"||c=="false"){if(b>=0&&this.aO.length>b){if(this.aO[b].pO){this.aO[b].pO.onmouseover();this.aO[b].pO.wR(a)}}}else{if(b>=0&&this.aN.length>b){this.aN[b].wN()}}}};function a8(id,xI,xJ,lf,li,xP,xu,cK,vD){this.lf=lf;this.li=li;this.setIcon=function(xI,xJ){if(xI!="undefined"&&xI!=""){this.xI=xI;this.pO.src=xI;this.pO.up=xI}if(xJ!="undefined"&&xJ!=""){this.xJ=xJ;this.pO.n1=xJ}};this.zM=function(title,content){this.xP=title;this.xu=content;if(this.id!="undefined"&&this.xP!="undefined"){pe[this.id]=this.xP;pa[this.id]=(this.xu==null||this.xu=="undefined")?tX("%u8BEA%u0AAC%uCEA7%uB050"):this.xu}if(this.cK){if(typeof this.n2!="undefined"){var f2=this.n2.parentNode;if(f2!=null){f2.removeChild(this.n2)}var left=parseInt(this.n2.style.left);var top=parseInt(this.n2.style.top);this.n2=gu(this.xP,this.color);this.n2.style.left=left+"px";this.n2.style.top=top+"px";if(f2!=null){f2.appendChild(this.n2)}}else{this.n2=gu(this.xP,this.color)}}};if(id!="undefined"&&xI!="undefined"){this.id=id;this.color=(vD==null||vD=="undefined")?"#FF0000":vD;this.cK=(cK=="1");this.AJ=0;this.AI=16;this.zM(xP,xu);this.pO=new Image();this.pO.unselectable="on";this.pO.id=this.id;this.pO.fl=true;this.pO.cm=false;this.pO.x0=0;this.pO.As=0;this.pO.lI=0;this.pO.lK=0;this.pO.style.position="absolute";this.pO.onerror=function(){this.src=strImgsvrUrl+"images/marker.gif";this.onerror=null};this.pO.onload=function(){this.onerror=null;this.onload=null};this.setIcon(xI,xJ);this.pO.onmouseover=function(){var maplet=document["mapbar-maplet"];if(maplet.sS==ts.tb||maplet.sS==ts.ta||maplet.sS==ts.tw){this.style.cursor="default";return}this.style.cursor=(px)?"hand":"pointer";if(this.style.zIndex<pF){pF++}this.style.zIndex=pF;if(this.n1!="undefined"&&this.n1!=""){this.src=this.n1}if(this.fl&&iToolTipStyle==0){var x=parseInt(this.style.left)+parseInt(this.width)/2;var y=parseInt(this.style.top)+parseInt(this.height)/2;setToolTipMenu(x,y,pe[this.id],pa[this.id])}};this.pO.onmouseout=function(){if(this.up!="undefined"&&this.up!=""){this.src=this.up}if(document["mapbar-maplet"].sS==ts.tu){this.uI()}};this.pO.onclick=function(){if(this.fl.toString()=="false"){return}var maplet=document["mapbar-maplet"];if(maplet.sS==ts.tb||maplet.sS==ts.ta||maplet.sS==ts.tw||maplet.sS==ts.ly||maplet.sS==ts.lz||maplet.sS==ts.np){return}if(maplet.sS==ts.l3){var pn=maplet.p8(maplet.aO,this.id);maplet.removePointAt(pn);maplet.refresh();if(callback){callback("&act=del&pid="+pn)}return}if(this.lI==0&&this.lK==0){this.wR()}};this.pO.onmousemove=function(lM){if(document["mapbar-maplet"].sS==ts.tu&&this.cm){var Ap=parseInt((px)?event.clientX:lM.clientX);var Av=parseInt((px)?event.clientY:lM.clientY);this.lK+=(Av-this.As);this.lI+=(Ap-this.x0);this.style.top=(parseInt(this.style.top)+(Av-this.As))+"px";this.style.left=(parseInt(this.style.left)+(Ap-this.x0))+"px";this.x0=Ap;this.As=Av}};this.pO.onmousedown=function(lM){var Ap=parseInt((px)?event.clientX:lM.clientX);var Av=parseInt((px)?event.clientY:lM.clientY);this.cm=true;this.x0=Ap;this.As=Av;this.lI=0;this.lK=0};this.pO.onmouseup=function(lM){if(document["mapbar-maplet"].sS==ts.tu){this.uI(lM)}};this.pO.uI=function(lM){if(this.cm&&(this.lI!=0||this.lK!=0)){this.cm=false;var maplet=document["mapbar-maplet"];var pt=maplet.getElementById(maplet.aO,this.id);if(pt!=null){pt.lf+=(maplet.zo(this.lI+maplet.width/2,this.lK+maplet.height/2)-maplet.gx);pt.li+=(maplet.zp(this.lI+maplet.width/2,this.lK+maplet.height/2)-maplet.gA);cq.lf=pt.lf;cq.li=pt.li;var fQ=cq.zn();var pn=maplet.p8(maplet.aO,this.id);maplet.refresh();if(callback){callback("&act=move&pid="+pn+"&latlon="+fQ)}}this.lI=0;this.lK=0}else{this.cm=false}};this.pO.wR=function(ct){var x=parseInt(this.style.left)+parseInt(this.width)/2;var y=parseInt(this.style.top)+parseInt(this.height)/2;var maplet=document["mapbar-maplet"];if((iToolTipStyle=="undefined"||iToolTipStyle==1)&&(pe[this.id]!=null)&&(pe[this.id].length>0)){avBubble.gl(pe[this.id],pa[this.id]);if(ct.toString()=="true"||((x>avBubble.xoffset)&&(x<(maplet.width-avBubble.width))&&(y>avBubble.height)&&(y<(maplet.height)))){maplet.fp=gp(pe[this.id],x,y,pa[this.id]);maplet.sF.div.appendChild(maplet.fp)}else{maplet.fp=gp(pe[this.id],maplet.width/2+2,avBubble.height+10,pa[this.id]);var vj=maplet.width/2-x;var vk=avBubble.height+10-y;maplet.panTo(vj,vk)}}else{if(iToolTipStyle==2){var pn=maplet.p8(maplet.aO,this.id);if(callback){callback("&act=click&pid="+pn)}}}}}this.lx=function(g){var maplet=document["mapbar-maplet"];var width=(this.pO!=null)?parseInt(this.pO.width):16;var height=(this.pO!=null)?parseInt(this.pO.height):16;var left=maplet.zl(this.li,this.lf)-width/2;var top=maplet.zm(this.lf,this.li)-height;if(this.xP&&this.cK){g.setColor(this.color);g.lC(this.xP,maplet.zl(this.li,this.lf)+width/2,maplet.zm(this.lf,this.li)-12)}if(this.xI){g.lB(this.xI,left,top,width,height)}};this.paint=function(f2){if(this.xI){var maplet=document["mapbar-maplet"];var width=(this.pO!=null)?parseInt(this.pO.width):16;var height=(this.pO!=null)?parseInt(this.pO.height):16;var left=maplet.zl(this.li,this.lf)-width/2;var top=maplet.zm(this.lf,this.li)-height;if(left.toString()==eval("Number.NaN.toString()")||top.toString()==eval("Number.NaN.toString()")){return}this.pO.style.top=top+"px";this.pO.style.left=left+"px";if(top>=0&&left>=0&&top<=maplet.height&&left<=maplet.width){if(this.pO.parentNode!=f2){f2.appendChild(this.pO)}this.pO.style.visibility="visible"}else{this.pO.style.visibility="hidden";if(this.pO.parentNode==f2){f2.removeChild(this.pO)}}}};this.u9=function(f2){if(this.xP&&this.cK){var maplet=document["mapbar-maplet"];var width=(this.pO!=null)?parseInt(this.pO.width):16;var height=(this.pO!=null)?parseInt(this.pO.height):16;var left=maplet.zl(this.li,this.lf)-width/2;var top=maplet.zm(this.lf,this.li)-height;if(left.toString()==eval("Number.NaN.toString()")||top.toString()==eval("Number.NaN.toString()")){return}if(top>=0&&left>=0&&top<=maplet.height&&left<=maplet.width){this.n2.style.left=(left+width)+"px";this.n2.style.top=top+"px";if(this.n2.parentNode!=f2){f2.appendChild(this.n2)}}}};this.label=function(){if(this.xu){}};this.pu={};this.vp=function(li){return this.pu[li]||function(pu,xT){var pk=-1;var fE=0;var ub="";var fH="";if(xT!=null&&parseInt(xT.charAt(0),36)>=33){fH=xT.charAt(0);xT=xT.substring(1)}for(var i=0;i<(xT.length-(c75?1:0));i++){var n8=parseInt(xT.charAt(i),36)-10;if(n8>=17){n8=n8-7}ub+=(n8).toString(36);if(n8>fE){pk=i;fE=n8}}var n9=parseInt(ub.substring(0,pk),16);var n0=parseInt(ub.substring(pk+1),16);if("X"==fH){n9=-n9}if("Y"==fH){n0=-n0}var v6=new Array();v6[0]=(n9+n0-parseInt(strLicenseKey))/2;v6[1]=(n0-v6[0])/100000;v6[0]/=100000;if(v6[0]>180){v6[0]-=360}pu[xT]=v6;return v6}(this.pu,li)};this.zn=function(li,lf){if(typeof li!="undefined"&&typeof lf!="undefined"){this.lf=parseFloat(lf);this.li=parseFloat(li)}var v6="";var uh=parseInt(parseFloat(Math.max(-90,Math.min(90,this.lf)))*100000);var uj=parseInt(parseFloat((this.li<0)?(this.li+360):this.li)*100000);var pl=uj-uh+parseInt(strLicenseKey);var pm=uj+uh;if(pl<0){v6="X";pl=-pl}if(pm<0){v6="Y";pm=-pm}var ph=(pl).toString(16);var pi=(pm).toString(16);for(var i=0;i<ph.length;i++){var qv=parseInt(ph.charAt(i),16);v6+=(((qv>=10)?(qv+7):qv)+10).toString(36)}v6+="z";for(var qC=0;qC<pi.length;qC++){var vI1ih=parseInt(pi.charAt(qC),16);v6+=(((vI1ih>=10)?(vI1ih+7):vI1ih)+10).toString(36)}if(c75){v6+=v6.charAt(c75)}return v6.toUpperCase()}}function a9(id,aK,aM,xt,qq,qr,cr){this.aK=(aK==null)?new Array():aK;this.aM=(aM==null)?new Array():aM;this.color=(xt==null)?"#FF0000":xt;this.stroke=(qq==0)?1:qq;this.style=qr;this.id=id;this.cr=(cr=="undefined"||cr==null)?"false":cr;this.xP="";this.cK=false;this.xu="";this.maplet=null;this.vp=function(xT){var aU=xT.split(",");var qI=0;for(var i=0;i<aU.length;i++){if(aU[i]!=null&&aU[i].length>0){var pt=cq.vp(aU[i]);this.aM[qI]=parseFloat(pt[0]);this.aK[qI]=parseFloat(pt[1]);qI++}}};this.zn=function(){var xU=(this.cr.toString()=="true"||this.cr=="true")?"2":"0";var xT=this.stroke+","+xU+","+this.color+":";for(var i=0;i<this.aK.length;i++){cq.lf=parseFloat(this.aK[i]);cq.li=parseFloat(this.aM[i]);xT+=cq.zn()+","}return xT};this.zM=function(title,content){this.xP=title;this.xu=content;if(this.cK){if(typeof this.n2!="undefined"){var f2=this.n2.parentNode;if(f2!=null){f2.removeChild(this.n2)}var left=parseInt(this.n2.style.left);var top=parseInt(this.n2.style.top);this.n2=gu(this.xP,this.color);this.n2.style.left=left+"px";this.n2.style.top=top+"px";if(f2!=null){f2.appendChild(this.n2)}}else{this.n2=gu(this.xP,this.color)}}};this.lx=function(g){var aP=new Array();var aR=new Array();var pg=0;var us=10;for(var i=0;i<this.aK.length;i++){if(this.aK[i].toString()!=eval("Number.NaN.toString()")){aR[pg]=this.maplet.zm(this.aK[i],this.aM[i]);if(this.aM[i].toString()!=eval("Number.NaN.toString()")){aP[pg]=this.maplet.zl(this.aM[i],this.aK[i]);if(pg>0&&(Math.abs(aP[pg]-aP[pg-1])+Math.abs(aR[pg]-aR[pg-1]))>us){pg++}}}if(pg==0){pg++}}if(this.color){g.setColor(this.color)}if(this.stroke){g.setStroke(this.stroke)}g.drawPolyline(aP,aR,this.style);g.paint()};this.paint=function(f2){this.zX=document.createElement("div");this.zX.maplet=this.maplet;this.zX.id=this.id;this.zX.unselectable="on";this.zX.style.zIndex=10;this.zX.style.position="absolute";this.z0=document.createElement("v:polyline");this.z0.unselectable="on";this.z0.id=this.id;this.z0.strokecolor=this.color;this.z0.strokeweight=this.stroke+"pt";this.z0.fill=false;this.z0.filled=this.cr;this.z0.style.position="absolute";this.Ad=document.createElement("v:stroke");this.Ad.opacity=(transparencyLevel/100);this.Ad.joinstyle="round";this.Ad.endcap="round";this.Ad.fill="false";if(bArrow){this.Ad.endarrow="classic"}this.zY=document.createElement("v:fill");this.zY.opacity=((transparencyLevel/2)/100);this.zY.color=this.color;this.z0.appendChild(this.Ad);this.z0.appendChild(this.zY);this.zX.appendChild(this.z0);this.update();if(this.xP&&this.cK&&this.aK.length>=2){var Ao=0;var Au=0;for(var i=1;i<this.aK.length;i++){if(this.aK[i].toString()!=eval("Number.NaN.toString()")){Au=this.maplet.zm(this.aK[i],this.aM[i])}if(this.aM[i].toString()!=eval("Number.NaN.toString()")){Ao=this.maplet.zl(this.aM[i],this.aK[i])}if(Ao>=0&&Au>=0&&Au<=this.maplet.height&&Ao<=this.maplet.width){this.n2.style.left=Ao+"px";this.n2.style.top=Au+"px";if(this.n2.parentNode!=this.zX){this.zX.appendChild(this.n2)}break}}}this.zX.style.visibility="visible";if(f2!=null){f2.appendChild(this.zX)}this.zX.onmouseover=function(lM){if(this.maplet.sS==ts.tb||this.maplet.sS==ts.ta||this.maplet.sS==ts.tw){this.style.cursor="default"}else{this.style.cursor=(px)?"hand":"pointer"}};this.zX.onclick=function(lM){var pn=this.maplet.p8(this.maplet.aN,this.id);var Ap;var Av;if(pn>=0){if(this.maplet.sS==ts.l3){var gF=this.maplet.aN[pn];var fc=true;var pg=0;if(gF.aK.length>2){fc=false;Ap=parseInt((px)?event.clientX:lM.clientX)-this.maplet.left-this.maplet.offsetX;Av=parseInt((px)?event.clientY:lM.clientY)-this.maplet.top-this.maplet.offsetY;var qM=0;var qL=0;var gH=0;var gG=0;for(var i=gF.aK.length-1;i>0;i--){if(gF.aK[i].toString()!=eval("Number.NaN.toString()")){gH=this.maplet.zm(gF.aK[i],gF.aM[i]);if(gF.aM[i].toString()!=eval("Number.NaN.toString()")){gG=this.maplet.zl(gF.aM[i],gF.aK[i]);if(pg>0){var lK=gH-qM;var lI=gG-qL;if(Math.abs(lI)>Math.abs(lK)){var Ax=lK/lI*(Ap-qL)+qM;if(Math.abs(Ax-Av)<16){if(i==0){fc=true}break}}else{if(Math.abs(lK)>0){var Ar=lI/lK*(Av-qM)+qL;if(Math.abs(Ar-Ap)<16){if(i==0){fc=true}break}}}}qL=gG;qM=gH;pg++}}}}if(fc||(gF.aK.length-pg)<2){this.onclick=null;this.maplet.removeLineAt(pn);this.maplet.refresh();if(callback){callback("&act=del&lid="+pn)}}else{for(var qC=0;qC<pg;qC++){gF.aK[gF.aK.length-qC-1]=null;gF.aM[gF.aM.length-qC-1]=null}gF.aK.length=gF.aK.length-pg;gF.aM.length=gF.aM.length-pg;this.maplet.refresh();if(callback){callback("&act=update&lid="+pn+"&pline="+gF.zn())}}}else{if(this.maplet.sS==ts.ty||this.maplet.sS==ts.tu){if(iToolTipStyle==2){if(callback){callback("&act=click&lid="+pn)}}else{if(this.maplet.aN[pn].xP!=null&&this.maplet.aN[pn].xP.length>0){Ap=parseInt((px)?event.clientX:lM.clientX)-this.maplet.left-this.maplet.offsetX;Av=parseInt((px)?event.clientY:lM.clientY)-this.maplet.top-this.maplet.offsetY+8;this.maplet.wN(Ap,Av,this.maplet.aN[pn].xP,this.maplet.aN[pn].xu)}}}else{this.maplet.aZ(lM)}}}}};this.update=function(){var aP=new Array();var aR=new Array();var pg=0;var us=10;if(this.aK==null||this.aK.length<2){return}var cY=false;var tn=this.maplet.width;var to=this.maplet.height;for(var i=0;i<this.aK.length;i+=1){if(this.aK[i].toString()!=eval("Number.NaN.toString()")){aR[pg]=this.maplet.zm(this.aK[i],this.aM[i]);if(this.aM[i].toString()!=eval("Number.NaN.toString()")){aP[pg]=this.maplet.zl(this.aM[i],this.aK[i]);if(tn>aP[pg]){tn=aP[pg]}if(to>aR[pg]){to=aR[pg]}if(!cY&&(aR[pg]<0||aR[pg]>this.maplet.height||aP[pg]<0||aP[pg]>this.maplet.width)){cY=true}if(pg>0&&(Math.abs(aP[pg]-aP[pg-1])+Math.abs(aR[pg]-aR[pg-1]))>us){pg++}if(pg==0){pg++}}}}if(cY){var aQ=new Array();var aS=new Array();pg=0;for(var qC=1;qC<aP.length;qC++){if((aR[qC]<-this.maplet.height&&aR[qC-1]<-this.maplet.height)||(aR[qC]>this.maplet.height*2&&aR[qC-1]>this.maplet.height*2)||(aP[qC]>this.maplet.width*2&&aP[qC-1]>this.maplet.width*2)||(aP[qC]<-this.maplet.width&&aP[qC-1]<-this.maplet.width)){continue}if(aQ.length==0||(aQ[pg]!=aP[qC-1]&&aS[pg]!=aR[qC-1])){aQ[pg]=aP[qC-1];aS[pg]=aR[qC-1];pg++}aQ[pg]=aP[qC];aS[pg]=aR[qC];pg++}aP=aQ;aR=aS;aQ=null;aS=null}var Aa="";for(var qI=0;qI<aP.length;qI++){if(qI>0){Aa+=","}Aa+=(parseInt(aP[qI])+","+parseInt(aR[qI]))}if(bmc){this.z0.style.left=parseInt(tn)+"px";this.z0.style.top=parseInt(to)+"px"}if(this.z0){if(this.z0.points){this.z0.points.value=Aa}else{this.z0.points=Aa}}};this.wN=function(){var pn=this.maplet.p8(this.maplet.aN,this.id);if(this.maplet.aN[pn].xP!=null&&this.maplet.aN[pn].xP.length>0&&this.aK.length>=2){var Ao=0;var Au=0;for(var i=1;i<this.aK.length;i++){if(this.aK[i].toString()!=eval("Number.NaN.toString()")){Au=this.maplet.zm(this.aK[i],this.aM[i])}if(this.aM[i].toString()!=eval("Number.NaN.toString()")){Ao=this.maplet.zl(this.aM[i],this.aK[i])}if(Ao>=0&&Au>=0&&Au<=this.maplet.height&&Ao<=this.maplet.width){this.maplet.wN(Ao,Au+8,this.maplet.aN[pn].xP,this.maplet.aN[pn].xu);break}}}}}Maplet.prototype.aZ=function(c){if(maplet.snapshotBox.E6vg){maplet.snapshotBox.E6vg=false;return}if(this.xc){this.xc.hide()}var k=(px)?event.srcElement.id:c.target.id;var r=(px)?event.srcElement:c.target;var m=parseInt((px)?event.clientX:c.clientX)-this.offsetX;var j=parseInt((px)?event.clientY:c.clientY)-this.offsetY;this.l6=k;this.fS=m-this.left;this.fT=j-this.top;if(this.l6!=null&&this.l6.indexOf("ctrl")>=0){return false}if(this.ff&&this.nI().qn(this.fS,this.fT)){this.AP.tC(this.fS,this.fT);return}if(this.aY()){var q=this.zp(this.fS,this.fT);var a=this.zo(this.fS,this.fT);if(this.downX==this.zQ&&this.downY==this.zR){var g=cq.zn(this.zp(this.fS,this.fT),this.zo(this.fS,this.fT));if(apiType==1){var l=new MPoint(g);l.initialize(this);MEvent.trigger(this,"click",c,l)}else{MEvent.trigger(this,"click",c,g)}}var p=false;if((this.sS==7)){this.addOrigin(a,q)}else{if((this.sS==8)){this.addDestination(a,q)}else{if((this.sS==6)){cq.lf=a;cq.li=q;var v=cq.zn();nX();if(apiType==1){MEvent.trigger(this,"bookmark",{action:"add",point:new MPoint(v),zoom:this.AG})}else{MEvent.trigger(this,"bookmark","&act=add&latlon="+v+"&zm="+this.AG)}}else{if(this.sS==ts.ty||this.sS==ts.tu||this.sS==ts.l3){if((new Date().getTime()-this.tD)>=500){this.tD=new Date().getTime();if(this.cQ){this.cQ=false}else{if(!this.cn){if(this.l6=="LayerMask"||this.l6=="LayerDrawMap"||this.l6=="LayerDrawSVG"||(r.parentNode&&r.parentNode.id=="LayerMap")||r.id.indexOf("OverlayBg")>=0||(r.getAttribute(TET))){if(this.K33){return}if(this.fp!=null){this.hideBubble();if(ContentInfo&&ContentInfo.closeFn){ContentInfo.closeFn()}}if(iToolTipStyle==0){hideToolTipMenu()}if(this.H434){var w=null;if(w=this.getImgByXY(this.tR,this.tS,true)){for(var n in this.qS){if(!this.qS[n].inZoomRange(this.AG)){continue}var t=this.qS[n].click(w.id,this.tR,this.tS);if(t){MEvent.trigger(this,"layer_click",t);return}}}}if(this.clickToCenter){this.waitPan(this.width/2-this.fS,-this.fT+this.height/2)}}}}this.cn=false}else{this.tD=new Date().getTime()}}else{if(this.sS==ts.tb||this.sS==ts.ta||this.sS==ts.lz||this.sS==ts.ly){var o=(en)?"Double click to finish":tX("%u8BFC%uDFC3%uA5C7%uD0CE%uE632");document.getElementById("pjlxl").innerHTML=o;if(this.allowDrawingDragMap&&!this.Y7d32){this.Y7d32=true;return false}if(this.l6!=null&&this.l6.indexOf("ctrl")>=0){return false}if(!this.zy){var f=this.sS==ts.ly||this.sS==ts.ta;var h=new MBrush(this.brush.color,this.brush.stroke,this.brush.style,f,this.brush.bgcolor,this.brush.transparency,this.brush.bgtransparency,this.brush.arrow);var e=new MPoint(cq.zn(q,a));this.zy=new MPolyline([e],h,null,null);this.zy.initialize(this);this.sv++;this.tG=new MPolyline([e,e],h,null,null);this.tG.initialize(this);this.sv++}else{var b=new MPoint(cq.zn(q,a));this.zy.pts.push(b);this.zy.update();this.tG.pts[0]=this.tG.pts[1];this.tG.pts[1]=b;this.tG.update()}p=true}}}}}if(k=="LayerDrawMap"&&!p){if(this.aG!=null&&this.aH!=null){for(var d=0;d<this.aG.length;d++){if(Math.abs(this.aG[d]-this.fS)<8&&Math.abs(this.aH[d]-this.fT)<8){var u="";if(apiType==1){u=this.aE[this.aF[d]].xP}else{u="&hotspot="+this.aE[this.aF[d]].xP}this.vi=0;MEvent.trigger(this,"hotspot",u);if(hs){this.setCenter(this.aE[this.aF[d]].lf,this.aE[this.aF[d]].li);this.setZoomLevel(8)}break}}}}}};Maplet.prototype.a1=function(lM){var l6=(px)?event.srcElement.id:lM.target.id;var target=(px)?event.srcElement:lM.target;this.l6=l6;nX();if(this.l6!=null&&this.l6.toString().indexOf("ctrl")>=0){return false}if(this.aY()){if(this.sS!=ts.tz&&this.sS!=ts.tA&&this.sS!=ts.$9f){this.d7q("default",this.map)}var D25=cq.zn(this.zp(this.fS,this.fT),this.zo(this.fS,this.fT));if(apiType==1){var pt=new MPoint(D25);pt.initialize(this);MEvent.trigger(this,"dbclick",lM,pt)}else{MEvent.trigger(this,"dbclick",lM,D25)}if(this.sS==ts.tb||this.sS==ts.ta){var g0=0;var area=0;if(this.zy){var ur=this.zy.pts.length;if(!px){ur=ur-1}if(this.sS==ts.tb){g0=this.measDistance(this.zy.pts)}else{this.zy.pts[ur]=this.zy.pts[0];area=this.measArea(this.zy.pts)}if(this.zy.zX.parentNode==this.lA.div){this.zy.remove(true)}}if(this.tG&&this.tG.zX.parentNode==this.lA.div){this.tG.remove(true)}this.zy=null;this.tG=null;if(!px){this.refresh()}if(g0.toString()==eval("Number.NaN.toString()")){g0=0}if(area.toString()==eval("Number.NaN.toString()")){area=0}if(this.sS==ts.ta){var xk="";if(area>1000000){area=parseInt(area/10000)/10/10;xk=(en==0)?tX("%u603E%uF79D%u1151")+":"+area+tX("%u5E77%uC42C%uB725%uE338"):"Total area:"+area+"km2"}else{xk=(en==0)?tX("%u603E%uF79D%u1151")+":"+area+tX("%u5E76%uC42C%uE22C"):"Total area:"+area+"m2"}if(this.vA!="undefined"){this.setMode(this.vA)}sC(this.width/2+this.left+this.offsetX,this.height/2+this.top+this.offsetY,xk);if(apiType==1){MEvent.trigger(this,"measarea",(parseInt(area*1000000)/10))}else{MEvent.trigger(this,"measarea","&act=measarea&area="+(parseInt(area*1000000)/10)+tX("%u5E77%uC42C%uB725%uE338"))}}else{var xB="";if(g0>=1000){g0=parseInt(g0/100)/10;xB=(en==0)?tX("%u603E%uEE18%u0798")+":"+g0+tX("%u516E%uE338"):"Total distance:"+g0+"km"}else{xB=(en==0)?tX("%u603E%uEE18%u0798")+":"+g0+tX("%u7C74"):"Total distance:"+g0+"m"}setMoveMode();if(this.vA!="undefined"){this.setMode(this.vA)}sC(this.width/2+this.left+this.offsetX,this.height/2+this.top+this.offsetY,xB);if(apiType==1){MEvent.trigger(this,"measure",(parseInt(g0*1000)/10))}else{MEvent.trigger(this,"measure","&act=measure&dist="+(parseInt(g0*1000)/10)+tX("%u516E%uE338"))}}}else{if(this.sS==ts.lz||this.sS==ts.ly){var yg=null;if(this.zy){var hnh=this.zy.pts.length;if(!px){hnh=hnh-1}this.zy.pts.length=hnh;if(this.zy.zX.parentNode==this.lA.div){this.zy.remove(true)}if(apiType==1){yg=this.zy.zn();yg.zoom=this.AG}else{yg=("&act=add&pline="+this.zy.zn()+"&zm="+this.AG)}}if(this.tG&&this.tG.zX.parentNode==this.lA.div){this.tG.remove(true)}this.zy=null;this.tG=null;if(!px){this.refresh()}var nb=(this.sS==ts.lz)?"drawline":"drawarea";if(this.vA!="undefined"){this.setMode(this.vA)}MEvent.trigger(this,nb,yg)}else{if(this.sS==ts.ty||this.sS==ts.tu||this.sS==ts.l3){if(this.l6&&(this.l6=="LayerMask"||this.l6=="LayerDrawMap"||this.l6=="LayerDrawSVG"||target.parentNode.id=="LayerMap"||target.id.indexOf("OverlayBg")>=0||this.l6.substring(0,"mk_shadow_".length)=="mk_shadow_"||target.getAttribute("traffic")=="yes")||(target.getAttribute(TET))){this.vi=0;if(this.getZoomLevel()<sY){this.zoomTo(this.getZoomLevel()+1,void (0),this.width/2-this.fS,-this.fT+this.height/2)}else{if(this.getZoomLevel()==sY){this.panTo(this.width/2-this.fS,-this.fT+this.height/2)}}}}}}}};Maplet.prototype.a2=function(lM){if(this.sS!=ts.ty){this.hideBubble()}if(this.markerDragAnimation){this.d1rDu(false)}var Ap=parseInt((px)?event.clientX:lM.clientX)-this.offsetX;var Av=parseInt((px)?event.clientY:lM.clientY)-this.offsetY;this.l6=(px)?event.srcElement.id:lM.target.id;if(!px&&this.vb.style.position!="absolute"){}this.downX=Ap-this.left;this.downY=Av-this.top;if(this.l6!=null&&this.l6.indexOf("ctrl")>=0&&this.controlCanvas!=null){this.controlCanvas.onmousedown(lM);return}if(lM.type=="mousedown"){MEvent.trigger(this,"mousedown",lM)}this.tQ="";if(this.ff&&this.nI().qn(this.downX,this.downY)){this.AP.tE(this.downX,this.downY);return false}else{var VC7=px?event.srcElement:lM.target;this.cL=(VC7.getAttribute(cV7)||VC7.getAttribute("traffic"))?true:false;if(this.aY()&&this.cS){if(this.sS==ts.$9f&&!this.snapshotBox.K9J){this.snapshotBox.show()}else{this.sD.resize(1,1);this.sD.show()}}else{if(this.sS==ts.ty||this.sS==ts.tu||this.sS==ts.l3){if(px&&(this.l6.indexOf("MPolyline")==this.l6.length-9)){this.d7q("move",event.srcElement)}else{eval(document.body.scrollTop);this.d7q("move",this.map)}}}}};Maplet.prototype.a5=function(b){var a=P2jRn(this.map);var d=0;var c=0;if(document.body&&(parseInt(document.documentElement.scrollTop)!=0||parseInt(document.documentElement.scrollLeft)!=0)){d=document.documentElement.scrollTop;c=document.documentElement.scrollLeft}else{d=document.body.scrollTop;c=document.body.scrollLeft}this.offsetX=a[0]-parseInt(c)-this.left;this.offsetY=a[1]-parseInt(d)-this.top};Maplet.prototype.a4=function(c){MEvent.trigger(this,"mouseout",c);this.l6=(px)?event.srcElement.id:c.target.id;if(!px||(px&&event.clientX!=-1)){var b=parseInt((px)?event.clientX:c.clientX)-this.offsetX;var a=parseInt((px)?event.clientY:c.clientY)-this.offsetY;this.tR=b-this.left;this.tS=a-this.top;this.tR=b-this.left-(px?1:0);this.tS=a-this.top-(px?1:0);this.ClPI=this.tR-this.downX;this.c970q=this.tS-this.downY}this.cI=false;if((px&&event.clientX==-1)||!this.aY()){if(this.controlCanvas!=null){this.controlCanvas.onmouseout(c)}this.a6((px)?event:c)}if(px){document.onmousewheel=new Function("return true")}};Maplet.prototype.a3=function(b){if(this.cL&&this.xc){this.xc.hide()}this.cI=true;if(!this.cL){this.a5(b)}this.l6=(px)?event.srcElement.id:b.target.id;var l=parseInt((px)?event.clientX:b.clientX)-this.offsetX;var f=parseInt((px)?event.clientY:b.clientY)-this.offsetY;this.tR=(l)-this.left;this.tS=(f)-this.top;if(this.controlCanvas!=null){if(this.controlCanvas.onmousemove(b)){return}}if(this.gc!=null){for(var g in this.gc){if(this.gc[g].toString().indexOf("MStandardControl")>0&&this.gc[g].nR&&this.gc[g].nR.onmousemove(b)){return}}}if(this.sS==ts.tb||this.sS==ts.ta||this.sS==ts.lz||this.sS==ts.ly){var d=(en)?"Click to start":"\u8bf7\u5355\u51fb\u5f00\u59cb";showMouseTipBox(this.tR,this.tS,d,this.map)}else{if(this.sS==ts.tw){if(this.gJ!=null&&this.gJ!="undefined"&&this.gJ!="null"&&this.gJ!=""){showMouseTipBox(this.tR-this.gI.width/2-10-1,this.tS-this.gI.height-2-18,"<img src='"+this.gI.src+"'>",this.map)}else{nX()}}else{if(this.sS==24){var d=(en)?"Click to start":"\u6309\u4F4F\u5DE6\u952E\u622A\u56FE\uFF0C\u6216\u53F3\u51FB\u53D6\u6D88";showMouseTipBox(this.tR-6,this.tS-12,d,this.map)}else{nX()}}}if(this.ff&&this.nI().g8023(this.l6,this.tR,this.tS)){return}if(this.sS==ts.ty&&!this.cN){var m=false;if(this.aG!=null&&this.aH!=null){for(var a=0;a<this.aG.length;a++){if(Math.abs(this.aG[a]-this.tR)<8&&Math.abs(this.aH[a]-this.tS)<8){m=true;break}}}if(m){this.d7q("pointer",this.map)}else{if(!this.cL){this.d7q("default",this.map)}}if(this.H434){var k=null;if(k=this.getImgByXY(this.tR,this.tS,true)){for(var j in this.qS){if(!this.qS[j].inZoomRange(this.AG)){continue}var h=this.qS[j].vq28a(k.id,this.tR,this.tS);if(h){MEvent.trigger(this,"layer_mousemove",h)}}}}}if(this.cO&&this.cL){if(this.K33){return}if(!this.T9087){this.no();this.T9087=true}if(px){if(!document.getElementById("_map_marker_speeder")){var n=document.createElement("DIV");n.id="_map_marker_speeder";n.style.display="none";document.body.appendChild(n)}document.getElementById("_map_marker_speeder").innerHTML=""}if(iToolTipStyle==0){hideToolTipMenu()}if(iToolTipStyle==0){hideToolTipMenu()}this.ClPI=this.tR-this.downX;this.c970q=this.tS-this.downY;if(!px&&ContentInfo&&ContentInfo.isVisible()){ContentInfo.LG8O9(true)}this.sF.moveTo(this.ClPI,this.c970q);this.cN=true;this.cn=true}else{if(this.cS&&this.cL){if(this.aY()){this.cR=true;this.lu()}}else{if(this.sS==ts.tb||this.sS==ts.ta||this.sS==ts.lz||this.sS==ts.ly){var c=this.zp(this.tR,this.tS);var e=this.zo(this.tR,this.tS);if(this.zy!=null){this.tG.pts[1]=new MPoint(cq.zn(c,e));this.tG.update()}}else{if(this.l6=="LayerDrawMap"&&iToolTipStyle==0){hideToolTipMenu()}}}}};Maplet.prototype.a6=function(c,n,o,m){var q=0;var p=0;var k=0;var l=0;this.l6=(px)?event.srcElement.id:c.target.id;this.zQ=this.tR;this.zR=this.tS;this.cL=false;if(this.l6.indexOf("MPolyline")!=-1){this.cn=false}if(this.l6!=null){if(this.l6.indexOf("ctrl")>=0){this.sD.hide()}else{if(c.type=="mouseup"){MEvent.trigger(this,"mouseup",c)}}}if(this.sS==ts.ty||this.sS==ts.tu||this.sS==ts.l3){this.d7q("default",this.map)}if(this.ff&&this.nI().tJ(this.zQ,this.zR)){this.setZoomLevel(parseInt(this.AP.getZoomLevel()));return}if((this.cN||this.cR)&&(this.cS||this.cO)){this.cN=false;this.cR=false;if(this.cO){if(true||this.AG>0){q=-(this.zQ-this.downX);p=(this.zR-this.downY);k=this.zp(q+this.width/2,-p+this.height/2);l=this.zo(q+this.width/2,-p+this.height/2);this.gA=k;this.gx=l}var g=(px)?event.srcElement:c.target;if(g.getAttribute(cV7)){if(g.getAttribute(R06w8)=="polyline"){this.edj5=true}if(g.getAttribute(R06w8)=="marker"){this.bV8=true}}if(typeof basepoilist!="object"&&!this.DllQ7&&this._G9f){this._G9f=false}this.N31=true;this.Y$_8=new Date().getTime();maplet.setZoomLevel(maplet.AG);this.N31=false;if(apiType==1){MEvent.trigger(this,"pan",new MPoint(this.toMapCoordinate(this.width/2,this.height/2)))}else{MEvent.trigger(this,"pan","&act=pan&ctr="+this.toMapCoordinate(this.width/2,this.height/2))}if(this.allowDrawingDragMap&&((this.sS==ts.tb||this.sS==ts.ta||this.sS==ts.lz||this.sS==ts.ly))){this.Y7d32=false}}else{var f=1;var i=Math.max(1,Math.abs(this.zQ-this.downX));if(this.sS==1){q=(this.zQ+this.downX)/2;p=(this.zR+this.downY)/2;k=this.zp(q,p);l=this.zo(q,p);this.gA=k;this.gx=l;if(i<this.imgWidth){f=Math.min(sY-this.AG,Math.max(1,parseInt(Math.log(this.imgWidth/i)/Math.log(2))))}this.setZoomLevel(this.AG+f);if(apiType==1){MEvent.trigger(this,"zoomin",this.AG)}else{MEvent.trigger(this,"zoomin","&act=zoomin&zm="+this.AG)}}else{if(this.sS==2){q=(this.zQ+this.downX)/2;p=(this.zR+this.downY)/2;k=this.zp(q,p);l=this.zo(q,p);this.gA=k;this.gx=l;if(i<this.imgWidth){f=Math.min(this.AG,Math.max(1,parseInt(Math.log(this.imgWidth/i)/Math.log(2))))}this.setZoomLevel(this.AG-f);if(apiType==1){MEvent.trigger(this,"zoomout",this.AG)}else{MEvent.trigger(this,"zoomout","&act=zoomout&zm="+this.AG)}}else{if(this.sS==ts.tv){var u=this.gA+(Math.max(this.zQ,this.downX)-this.width/2)*this.xg/this.imgWidth;var b=this.gx-(Math.min(this.zR,this.downY)-this.height/2)*this.xf/this.imgHeight;cq.li=u;cq.lf=b;var a=cq.zn();var e=this.gA+(Math.min(this.zQ,this.downX)-this.width/2)*this.xg/this.imgWidth;var j=this.gx-(Math.max(this.zR,this.downY)-this.height/2)*this.xf/this.imgHeight;cq.li=e;cq.lf=j;var h=cq.zn();cq.li=e;cq.lf=b;var d=cq.zn();cq.li=u;cq.lf=j;var r=cq.zn();var t="&act=lookup&max="+a+"&min="+h+"&mmx="+d+"&mxm="+r;if(this.vA!="undefined"){this.setMode(this.vA)}this.cQ=true;if(apiType==1){MEvent.trigger(this,"lookup",{action:"lookup",max:new MPoint(a),min:new MPoint(h),mmx:new MPoint(d),mxm:new MPoint(r)})}else{MEvent.trigger(this,"lookup",t)}}else{if(this.sS==ts.$9f){this.snapshotBox.evL();this.snapshotBox.K9J=false}}}}this.sD.hide();this.sD.resize(1,1);this.sD.moveTo(-10,-10)}}};Maplet.prototype.a7=function(f){function g(){if(this.GK04==null){this.GK04=this.AG;g.apply(this)}else{if(this.GK04!=this.Ai){var k=Math.abs(this.Ai-this.AG)/10;var j=0.25;k=k<j?j:k;if(this.tK<0){this.GK04-=k;if(this.GK04<=this.Ai+0.05){this.GK04=this.Ai}}else{this.GK04+=k;if(this.GK04>=this.Ai-0.1){this.GK04=this.Ai}}if(this.GK04!=this.Ai){var l=Math.pow(2,this.GK04)/Math.pow(2,this.AG);var h=(this.width/2-this.asli)*(l-1);var i=(this.height/2-this.$iX)*(l-1);this.AN(this.GK04,h,i)}if(this.GK04==this.Ai){g.apply(this)}else{getTimeout(this,g,0)}}else{this.GK04=null;this.tK=0;this.setZoomLevel(this.Ai);this.Ai=0}}}var d=f||window.event;if(typeof d=="object"&&d){if(typeof d.wheelDelta=="undefined"){d.wheelDelta=-d.detail}if(typeof d.srcElement=="undefined"){d.srcElement=d.target}if(d.wheelDelta==0||(this.AG==te&&d.wheelDelta<0)||(this.AG==sY&&d.wheelDelta>0)){return}if(this.fa){return}if(typeof this.tK=="undefined"){this.tK=0}if(typeof this.Ai=="undefined"){this.Ai=0}var e=k9B(d.srcElement,j25$O);if(!e||e=="false"){_66(d);var c=d.wheelDelta<0?-1:1;this.tK+=c<0?Math.floor(c):Math.ceil(c);if(this.tK==0){return}var a=true;if(ContentInfo&&ContentInfo.isVisible()){var b=this.toScreenCoordinate(avBubble.ax729);if(_isInsideRect({x:b[0],y:b[1]},{min:{x:0,y:0},max:{x:this.width,y:this.height}})){a=false}}if(a){this._61="wheel";if(typeof this.l6=="undefined"){this.a3(d)}this.asli=this.tR;this.$iX=this.tS;this.wUW=this.toMapCoordinate(this.asli,this.$iX);this.QhIW6(d.wheelDelta)}this.Ai=parseInt(this.AG+this.tK);if(this.Ai<te){this.Ai=te}if(this.Ai>sY){this.Ai=sY}if(ZOOM_TRANSITION&&this.GK04==null){if(ContentInfo&&ContentInfo.isVisible()){this.GK04=this.Ai}g.apply(this)}}}};var px=false;var D2a=false;var _F62=false;var e1Kcn=false;var _7n71=false;var gvQ2=false;var s;var bi3=navigator.userAgent.toLowerCase();if(s=bi3.match(new RegExp("msie ([\\d.]+)"))){px=true;if(cm5UC(s[1],0)==6){D2a=true}}else{if(s=bi3.match(new RegExp("firefox/([\\d.]+)"))){_F62=true}else{if(s=bi3.match(new RegExp("chrome/([\\d.]+)"))){e1Kcn=true}else{if(s=bi3.match(new RegExp("opera.([\\d.]+)"))){gvQ2=true}else{if(s=bi3.match(new RegExp("version/([\\d.]+).*safari"))){_7n71=true}}}}}var ut=document.qS?1:0;var lm=(px)?"document.all.":"document.";var yj=(px)?".style":"";if(px){document.write("<html xmlns:v='urn chemas-microsoft-com:vml'>");document.write("<style>v\\:* {behavior: url( #default#VML )}</style>")}document.write("<style type='text/css'> ");document.write(".ptlabel {  ");document.write("  text-decoration: none;");document.write("  cursor: pointer;");document.write("  font-family: Arial, Helvetica, sans-serif; ");document.write("  font-size: 8pt; ");document.write("}  ");document.write("");document.write(".tooltiptitle {");document.write("  color: #2754bb; ");document.write("  text-decoration: none;");document.write("  cursor: pointer;");document.write("  font-family: Arial, Helvetica, sans-serif; ");document.write("  font-size: 14px;");document.write("  padding: 5px;");document.write(" font-weight:bold");document.write("}  ");document.write("");document.write(".tooltipcontent { ");document.write("  color: #000000; ");document.write("  text-decoration: none;");document.write("  cursor: pointer;");document.write("  font-family: Arial, Helvetica, sans-serif; ");document.write("  font-size: 12px; ");document.write("  padding:0 3px ");document.write("}  ");document.write("");document.write(".hotspotlabel {");document.write("  position: absolute;");document.write("  color: #000; ");document.write("  text-decoration: none;");document.write("  cursor: pointer;");document.write("  font-family: Arial, Helvetica, sans-serif; ");document.write("  font-size: 10pt;");document.write("}  ");document.write("");document.write(".editableimg { ");document.write("  position: absolute;");document.write("  overflow: hidden;  ");document.write("  cursor: pointer;");document.write("  border: 1px solid #fff;  ");document.write("  z-index: 1000;  ");if(px){document.write("  filter: alpha( opacity = 60 );")}else{document.write("  opacity: 0.6;  ")}document.write("  font-size: 0px; ");document.write("  display: block; ");document.write("}  ");document.write("");document.write(".buffering {");document.write("  position: absolute;");document.write("  height: 16px;");document.write("  z-index: 24; ");if(px){document.write("  filter: alpha( opacity = 60 );")}else{document.write("  opacity: 0.6;  ")}document.write("  font-size: 12px;");document.write("  font-weight: bold; ");document.write("  background-color: #fff;  ");document.write("  color: #000; ");document.write("  border: 0px solid #000;  ");document.write("  text-align: center;");document.write("  padding-top: 0px;  ");document.write("  display: block; ");document.write("}  ");document.write("");document.write(".tiplabel { ");document.write("  position: absolute;");document.write("  height: 12px;");document.write("  z-index: 0; white-space: nowrap; ");document.write("  display: block; ");document.write("  background-color: #FFFFCC;  ");document.write("  border: 1px solid #f00;  ");document.write("  color: #f00; ");document.write("  font-size: 12px;");document.write("  font-weight: bold; ");document.write("}  ");document.write("");document.write("#ToolTip {  ");document.write("  position: absolute;");if(px){document.write("  filter: alpha( opacity = 80 );")}else{document.write("  opacity: 0.8;  ")}document.write("  width: 100px;");document.write("  top: 0px; ");document.write("  left: 0px;");document.write("  z-index: 24; ");document.write("  visibility: hidden;");document.write("}  ");document.write("");document.write("#loading {  ");document.write("  position: absolute;");document.write("  z-index: 24; ");if(px){document.write("  filter: alpha( opacity = 60 );")}else{document.write("  opacity: 0.6;  ")}document.write("  font-size: 13px;");document.write("  font-weight: bold; ");document.write("  background-color: #fff;  ");document.write("  color: #000; ");document.write("  border: 0px solid #000;  ");document.write("  text-align: center;");document.write("  padding-top: 4px;  ");document.write("  display: block; ");document.write("}  ");document.write("");document.write("#mbglabel { ");document.write("  position: absolute;");document.write("  z-index: 0;  ");document.write("  white-space: nowrap;  ");document.write("  display: block; ");document.write("  visibility: visible;  ");document.write("}  ");document.write("");document.write("#mfglabel { ");document.write("  position: absolute;");document.write("  z-index: 0;  ");document.write("  white-space: nowrap;  ");document.write("  display: block; ");document.write("  visibility: visible;  ");document.write("  background-color: #FFFFCC;  ");document.write("}  ");document.write("");document.write("#stylelabel {  ");document.write("  position: absolute;");document.write("  z-index: 24; ");if(px){document.write("  filter: alpha( opacity = 80 );")}else{document.write("  opacity: 0.8;  ")}document.write("  font-size: 13px;");document.write("  font-weight: bold; ");document.write("  background-color: #fff;  ");document.write("  color: #000; ");document.write("  border: 1px solid #000;  ");document.write("  text-align: center;");document.write("  padding-top: 4px;  ");document.write("  display: block; ");document.write("}  ");document.write("");document.write("#mapbar-overview-viewport {");document.write("  position: absolute;");document.write("  width: 0px;  ");document.write("  top: 0px; ");document.write("  left: 0px;");document.write("  height: 0px; ");document.write("  z-index: 10; ");document.write("  font-size: 0px; ");if(px){document.write("  filter: alpha( opacity = 50 );")}else{document.write("  opacity: 0.5;  ")}document.write("  background-color: white;  ");document.write("  border: 2px solid white;  ");document.write("  visibility: visible;  ");document.write("}  ");document.write("");document.write("#mapbar-overview-viewframe {  ");document.write("  position: absolute;");document.write("  width: 0px;  ");document.write("  top: 0px; ");document.write("  left: 0px;");document.write("  height: 0px; ");document.write("  z-index: 11; ");document.write("  font-size: 0px; ");document.write("  border: 2px solid #D50F1E;  ");document.write("  visibility: visible;  ");document.write("}  ");document.write("");document.write("#mapbar-overview-viewpad_ctrl { ");document.write("  position: absolute;");document.write("  width: 0px;  ");document.write("  top: 0px; ");document.write("  left: 0px;");document.write("  height: 0px; ");document.write("  z-index: 12; ");document.write("  font-size: 0px; ");document.write("  border: 2px solid #D50F1E;  ");document.write("  visibility: visible;  ");document.write("}  ");document.write("");document.write("#mapbar-bordertop {  ");document.write("  position: absolute;");document.write("  z-index: 2;  ");document.write("  font-size: 0px; ");document.write("  border-top: 1px solid #949694; ");document.write("  visibility: visible;  ");document.write("}  ");document.write("");document.write("#mapbar-borderbtm {  ");document.write("  position: absolute;");document.write("  z-index: 2;  ");document.write("  font-size: 0px; ");document.write("  border-bottom: 1px solid #949694; ");document.write("  visibility: visible;  ");document.write("}  ");document.write("");document.write("#mapbar-borderlft {  ");document.write("  position: absolute;");document.write("  z-index: 2;  ");document.write("  font-size: 0px; ");document.write("  border-left: 1px solid #949694;");document.write("  visibility: visible;  ");document.write("}  ");document.write("");document.write("#mapbar-borderrgt {  ");document.write("  position: absolute;");document.write("  z-index: 2;  ");document.write("  font-size: 0px; ");document.write("  border-right: 1px solid #949694;  ");document.write("  visibility: visible;  ");document.write("}  ");document.write("");document.write(".contextmenuitem {");document.write("  color: #000000; ");document.write("  text-decoration: none;");document.write("  cursor: pointer;");document.write("  font-family: Arial, Helvetica, sans-serif; ");document.write("  font-size: 9pt; ");document.write("  padding:3px 12px 3px 0; ");document.write("  width: 100%; ");document.write("}  ");document.write("");document.write(".contextmenutable {  ");document.write("  text-decoration: none;");document.write("  cursor: pointer;");document.write("}  ");document.write("");document.write(".mapcontextmenu { ");document.write("  position: absolute;");document.write("  filter: alpha( opacity = 90);-moz-opacity: 0.90; opacity:0.9; ");document.write("  background-color: #e8f2fd; ");document.write("  padding: 1px; ");document.write("  border: 1px solid #437abf; ");document.write("  top: 0px; ");document.write("  left: 0px;");document.write("  z-index: 24; ");document.write("  visibility: hidden;");document.write("}  ");document.write("");document.write(".mapCirEdging .borT, ");document.write("  .mapCirEdging .borB { ");document.write("  height: 1px; ");document.write("  margin: 0 1px;  ");document.write("  border-bottom: 1px solid #8F8F8F; ");document.write("  line-height: 1px;  ");document.write("  font-size: 1px; ");document.write("}  ");document.write("");document.write(".mapCirEdging .borB {");document.write("  border: 0;");document.write("  border-top: 1px solid #8F8F8F; ");document.write("}  ");document.write("");document.write(".mapCirEdging .borT2, .mapCirEdging .borB2 { ");document.write("  height: 1px; ");document.write("  border: 1px solid #BCBCBC;  ");document.write("  border-top: 0;  ");document.write("  border-bottom: 0;  ");document.write("  line-height: 1px;  ");document.write("  font-size: 1px; ");document.write("}  ");document.write("");document.write(".mapCirEdging .MPBox2 { ");document.write("  height: auto;");document.write("  border: 1px solid #8F8F8F;  ");document.write("  border-top: 0;  ");document.write("  border-bottom: 0;  ");document.write("  background: #fff;  ");document.write("}  ");document.write("");document.write(".mapCirEdging .MPbox {  ");document.write("  margin: 3px; ");document.write("  font-size: 12px;");document.write("  text-align: left;  ");document.write("}  ");document.write("</style>");if(typeof xl=="undefined"){var xl=strImgsvrUrl}if(typeof ds=="undefined"){var ds="mapbar"}if(typeof en=="undefined"){var en=0}if(typeof rs=="undefined"){var rs=0}if(typeof apiType=="undefined"){var apiType=0}if(typeof hs=="undefined"){var hs=false}if(typeof MOUSEWHEEL=="undefined"){var MOUSEWHEEL=true}if(typeof kp=="undefined"){var kp=true}if(typeof bDefaultControlOn=="undefined"){var bDefaultControlOn=false}if(typeof hbo=="undefined"){var hbo=false}if(typeof otp=="undefined"){var otp=false}if(typeof ZOOM_TRANSITION=="undefined"){var ZOOM_TRANSITION=true}if(typeof bsc=="undefined"){var bsc=true}if(typeof __mapbar_magic_id=="undefined"){var __mapbar_magic_id=""}if(typeof REFRESH_MK_INDEX!="boolean"){var REFRESH_MK_INDEX=true}if(typeof SNAPSHOT_SERVER!="string"){var SNAPSHOT_SERVER="http://ditu.pujia.com/preview/snapshot.php"}if(typeof SNAPSHOT_MAPIMG_URI_PREFIX!="string"){var SNAPSHOT_MAPIMG_URI_PREFIX="http://img[1-9]?.mapbar.com/maplite/"}if(typeof SNAPSHOT_MARKER_URI_PREFIX!="string"){var SNAPSHOT_MARKER_URI_PREFIX="http://img[1-9]?.mapbar.com/maplite/mapbank/ditu/"}var SNAPSHOT_OPTIONS={mode:"fullscreen",format:"png",depth:0,processMode:"event"};if(typeof ALLOW_MV!="boolean"){var ALLOW_MV=true}if(typeof cV7!="string"){var cV7="_dragmap"}if(typeof R06w8!="string"){var R06w8="_overlay"}if(typeof j25$O!="string"){var j25$O="_disable_mw"}if(typeof TET!="string"){var TET="_mlayer"}var c75=2;var ac=null;var ad=true;if(typeof bp=="undefined"){var bp=true}if(typeof oo=="undefined"){var oo=true}if(typeof bmc=="undefined"){var bmc=false}if(typeof OVER_LOCATION!="object"||OVER_LOCATION){var OVER_LOCATION=null}if(typeof STD_BUBBLE_WIDTH=="undefined"){var STD_BUBBLE_WIDTH=217}if(typeof MIN_BUBBLE_HEIGHT=="undefined"){var MIN_BUBBLE_HEIGHT=120}if(typeof OVER_WIN_WIDTH!="number"){OVER_WIN_WIDTH=150}else{if(OVER_WIN_WIDTH<100){OVER_WIN_WIDTH=100}else{if(OVER_WIN_WIDTH>210){OVER_WIN_WIDTH=210}}}if(typeof OVER_WIN_HEIGHT!="number"){OVER_WIN_HEIGHT=120}else{if(OVER_WIN_HEIGHT<100){OVER_WIN_HEIGHT=100}else{if(OVER_WIN_HEIGHT>210){OVER_WIN_HEIGHT=210}}}if(typeof MAX_BUBBLE_HEIGHT=="undefined"){var MAX_BUBBLE_HEIGHT=380}var sX=strImgsvrUrl+"images/mask.gif";var ul=strImgsvrUrl+"images/node.gif";var lV=strImgsvrUrl+"images/wmk.gif";if(typeof LPN_HOVERING_TIME=="undefined"){var LPN_HOVERING_TIME=100}var l6M=null;if(typeof gQ=="undefined"){gQ=0}var xz="";var AB="";Array.prototype.clear=function(){while(this.length>0){this.pop()}};document.write('<img id="sendmapload" style="display:none;visibility:hidden;" />');document.writeln('<div id="myalert" style="position:absolute;z-index:100000;filter:alpha(opacity=85);opacity:0.85;visibility:hidden;background-color:white;padding:1px;"></div>');var sb=0;var sc='<div id="loading" unselectable = "on"><img src="'+strImgsvrUrl+'images/loading.gif"></div>';if(typeof bArrow=="undefined"){var bArrow=0}var sB=new Image();var initialize=0;var xN=(en==0)?new Array(tX("%u5415%uDD90%uE7F2%uD86E"),tX("%u5415%uA728%uB18A%uD86E"),tX("%u5415%uA22D%uAC8F%uD86E"),tX("%u5415%uA768%uB1CA%uD86E"),tX("%u6D4F%uFF1A%u1FAC%u0798"),tX("%u70BF%uC2B4%uE1D6%u1827%u0775%uE467"),tX("%u6540%uBE65"),tX("%u7F2B%uDB38"),tX("%u62D1%uB571%uC179%uC628%uE732%u1827%u0775%uE467")):new Array("Go left","Go up","Go right","Go down","Measure distance","Click to zoom","Zoom In","Zoom Out","Drag to zoom");var lt=(en==0)?"\u62D6\u62FD\u6B64\u70B9":"drag to move this point";var pe=new Array();var pa=new Array();var pF=2;var sI=new Array("W","0","1","2","3","4","5","6","7","8","9","10","11","12","13","16");var sj=new Array(90,40,20,10,5,2,1,0.5,0.2,0.1,0.05,0.02,0.01,0.005,0.002,0.001);var qP=new Array(90*0.8,40*0.8,20*0.8,10*0.8,5*0.8,2*0.8,0.8,0.5*0.8,0.2*0.8,0.1*0.8,0.05*0.8,0.02*0.8,0.01*0.8,0.005*0.8,0.002*0.8,0.001*0.8);var nM=new Array(10,10,10,10,10,10,10,10,10,10,50,50,50,50,50,50);var w8=new Array(0,0,0,0,0,0,0,0,75,0,0,-150,0,0,0,0);if(typeof DEFAULT_MAX_ZOOM_LEVEL!="number"){var DEFAULT_MAX_ZOOM_LEVEL=13}if(typeof DEFAULT_MIN_ZOOM_LEVEL!="number"){var DEFAULT_MIN_ZOOM_LEVEL=0}var sY=DEFAULT_MAX_ZOOM_LEVEL;var te=DEFAULT_MIN_ZOOM_LEVEL;var wp=100000;var sw=105;var sx=35;var sz=new Array(-360,360);var sy=new Array(-90,90);var $3kS=null;var uU=8;var uS=15;var uT=strImgsvrUrl+"images/overclose.gif";var uV=strImgsvrUrl+"images/overopen.gif";if(!otp){uT=strImgsvrUrl+"images/overclose2.gif";uV=strImgsvrUrl+"images/overopen2.gif"}var uW=[0,0,0,0,0,1,2,3,4,5,6,7,8,9,10];var bpp=[xl+"mapbank/base/",2,13];var vs=strMapsvrUrl+"images/done.gif";var vt=strMapsvrUrl+"images/edit.gif";var v3=strMapsvrUrl+"images/stretch.gif";var at=0;var as=1;var au=2;var av=0;var ar=2;var s9=1001;if(typeof TRAFFIC_REFRESH_INTERVAL!="number"){var TRAFFIC_REFRESH_INTERVAL=5*60}if(typeof TRAFFIC_MIN_LEVEL!="number"){var TRAFFIC_MIN_LEVEL=8}if(typeof TRAFFIC_MAX_LEVEL!="number"){var TRAFFIC_MAX_LEVEL=sY}function setMoveMode(){maplet.setMode("pan");maplet.setCursorStyle("default","")};
